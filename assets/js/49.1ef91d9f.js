(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{366:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"时差转换-gettimezoneoffset"}},[t._v("时差转换 getTimezoneOffset()")]),t._v(" "),s("p",[t._v("如果我们的应用是针对世界各地的，当要把后台(服务器)存的时间展示给不同地区的用户时，这个时间应该经过时差转换、 转成用户客户端本地的时间，然后呈现给用户，即下面用到的getTimezoneOffset()")]),t._v(" "),s("p",[t._v("如果单纯的换算本地时间与其他时区的时间，也要用到getTimezoneOffset（）")]),t._v(" "),s("h4",{attrs:{id:"需要了解的概念"}},[t._v("需要了解的概念：")]),t._v(" "),s("ul",[s("li",[t._v("格林威治时间")])]),t._v(" "),s("p",[t._v("格林威治子午线上的地方时，或零时区（中时区）的区时叫做格林威治时间，也叫世界时。（更多详细的概念不说了，这里我们不需要。） 比如我们中国是东八区，北京时间是（GMT+08:00）")]),t._v(" "),s("ul",[s("li",[t._v("getTimezoneOffset 方法")])]),t._v(" "),s("p",[t._v("getTimezoneOffset 方法返回一个整数值，该整数表示了当前计算机上的时间和 UTC 时间之间相差的分钟数。 这些值适用于执行脚本的计算机。 如果从一个服务器脚本调用该方法，返回值适用于服务器。 若从一个客户端脚本调用该方法，则返回值适用于该客户端。")]),t._v(" "),s("p",[t._v("如果您的时间晚于 UTC 时间（例如太平洋夏时制），则此值为正，而如果您的时间早于 UTC 时间（例如日本），则此值为负。")]),t._v(" "),s("p",[t._v("例如，假设位于洛杉矶的客户端与位于纽约的服务器于 12 月 1 日 进行联系。 若在客户端执行 getTimezoneOffset，则将返回 480；若在服务器端执行，则返回 300。")]),t._v(" "),s("p",[t._v("获得本地与格林威治时间的时差：new Date().getTimezoneOffset()，单位为分钟。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("已知格林威治时间，换算本地正确时间\n本地时间 = 格林威治时间 - 时差\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("已知本地时间，换算对应格林威治时间：\n格林威治时间 = 本地时间 + 时差\n")])])]),s("p",[t._v("已知本地时间，换算其他时区的时间")]),t._v(" "),s("p",[t._v("因为时区间的差异是以小时为单位的。所以算出0时区的时间后，再减去或加上相应的小时即可（东N区便+N小时，西N区便-N小时）。 为了方便计算，东N区记做正数，西N区记做负数，即：")]),t._v(" "),s("p",[t._v("目标时区时间 = 本地时间 + 时差 + 时区间隔")]),t._v(" "),s("h3",{attrs:{id:"解决方案"}},[t._v("解决方案")]),t._v(" "),s("p",[t._v("使用的dayjs，所以代码如下")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" dayjs "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dayjs"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" utc "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dayjs/plugin/utc"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" timezone "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dayjs/plugin/timezone"')]),t._v("\n\ndayjs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("utc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndayjs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timezone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndayjs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Asia/Shanghai"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用时")]),t._v("\ndayjs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formatStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);