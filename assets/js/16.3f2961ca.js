(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{336:function(t,v,_){"use strict";_.r(v);var a=_(2),s=Object(a.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"linux基础及文件"}},[t._v("Linux基础及文件")]),t._v(" "),v("ul",[v("li",[t._v("Linux是一套免费使用和自由传播的类Unix操作系统")]),t._v(" "),v("li",[t._v("在服务器端领域和嵌入式领域有非常广泛的应用")])]),t._v(" "),v("h4",{attrs:{id:"_2-版本"}},[t._v("2.版本")]),t._v(" "),v("p",[t._v("分为内核版本和发型版本")]),t._v(" "),v("ul",[v("li",[t._v("kernel")]),t._v(" "),v("li",[t._v("各个厂商会制作自己的发行版本\n"),v("ul",[v("li",[t._v("redhat")]),t._v(" "),v("li",[t._v("CentOS")]),t._v(" "),v("li",[t._v("ubuntu")]),t._v(" "),v("li",[t._v("fedora")])])])]),t._v(" "),v("h4",{attrs:{id:"_3-linux与windows的不同"}},[t._v("3. Linux与Windows的不同")]),t._v(" "),v("ul",[v("li",[t._v("Linux严格区分大小写")]),t._v(" "),v("li",[t._v("Linux中所有的内容以文件形式保存，包括硬件、用户和文件。")]),t._v(" "),v("li",[t._v("Linux不靠扩展名区分文件类型，是靠权限来区分，但是有一些约定的扩展名，是给管理员看的\n"),v("ul",[v("li",[t._v("压缩包 .gz .bz2 .tar.bz2 .tgz")]),t._v(" "),v("li",[t._v("二进制文件 .rpm")]),t._v(" "),v("li",[t._v("网页文件 .html .php")]),t._v(" "),v("li",[t._v("脚本文件 .sh")]),t._v(" "),v("li",[t._v("配置文件 .conf")])])]),t._v(" "),v("li",[t._v("Windows下的程序不能直接在Linux中安装和运行")]),t._v(" "),v("li",[t._v("Linux更多使用字符界面\n"),v("ul",[v("li",[t._v("占用的系统资源更少")]),t._v(" "),v("li",[t._v("减少了出错和被攻击的可能性，会让系统更稳定")])])])]),t._v(" "),v("p",[t._v("如何购买服务器")]),t._v(" "),v("ul",[v("li",[t._v("阿里云 ECS")]),t._v(" "),v("li",[t._v("亚马逊 AWS")]),t._v(" "),v("li",[t._v("百度云")])]),t._v(" "),v("h6",{attrs:{id:"_4-连接服务器"}},[t._v("4. 连接服务器")]),t._v(" "),v("ul",[v("li",[t._v("git bash")]),t._v(" "),v("li",[t._v("mac shell")]),t._v(" "),v("li",[t._v("xshell4")]),t._v(" "),v("li",[t._v("xftp4")])]),t._v(" "),v("h5",{attrs:{id:"_5-分区"}},[t._v("5. 分区")]),t._v(" "),v("p",[t._v("磁盘分区是使用分区编辑器在磁盘上划分几个逻辑部分"),v("br"),t._v("\n磁盘一旦划分成多个分区，不同类的目录与文件可以存储进不同的分区内")]),t._v(" "),v("h5",{attrs:{id:"_6-挂载点"}},[t._v("6. 挂载点")]),t._v(" "),v("ul",[v("li",[t._v("为了让Linux系统中可以访问这些分区，需要把这些分区挂载到对应的目录上")]),t._v(" "),v("li",[t._v("在Linux中是把目录称为挂载点")]),t._v(" "),v("li",[t._v("把目录和分区链接在一起的过程成为挂载")]),t._v(" "),v("li",[t._v("/为根目录，必须挂载到一个分区上，默认所有子目录都会写入这个分区")]),t._v(" "),v("li",[t._v("同一级目录下面的所有子目录可以有自己的独立存储空间")]),t._v(" "),v("li",[t._v("必须有的分区\n"),v("ul",[v("li",[t._v("/ 根分区")]),t._v(" "),v("li",[t._v("swap分区(交换分区，虚拟内存，一般为内存的2倍，不要超过2G)")])])]),t._v(" "),v("li",[t._v("推荐分区\n"),v("ul",[v("li",[t._v("/boot (启动分区,200M) 单独分区，避免分区写满造成系统无法启动")])])])]),t._v(" "),v("h2",{attrs:{id:"linux常用命令"}},[t._v("linux常用命令")]),t._v(" "),v("h3",{attrs:{id:"_1-目录"}},[t._v("1. 目录")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("目录")]),t._v(" "),v("th",[t._v("用途")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("/")]),t._v(" "),v("td",[t._v("根目录")])]),t._v(" "),v("tr",[v("td",[t._v("/boot")]),t._v(" "),v("td",[t._v("启动目录，启动相关文件")])]),t._v(" "),v("tr",[v("td",[t._v("/dev")]),t._v(" "),v("td",[t._v("设备文件")])]),t._v(" "),v("tr",[v("td",[t._v("/etc")]),t._v(" "),v("td",[t._v("配置文件")])]),t._v(" "),v("tr",[v("td",[t._v("/home")]),t._v(" "),v("td",[t._v("普通用户的家目录,可以操作")])]),t._v(" "),v("tr",[v("td",[t._v("/lib")]),t._v(" "),v("td",[t._v("系统库保存目录")])]),t._v(" "),v("tr",[v("td",[t._v("/mnt")]),t._v(" "),v("td",[t._v("移动设备挂载目录")])]),t._v(" "),v("tr",[v("td",[t._v("/media")]),t._v(" "),v("td",[t._v("光盘挂载目录")])]),t._v(" "),v("tr",[v("td",[t._v("/misc")]),t._v(" "),v("td",[t._v("磁带机挂载目录")])]),t._v(" "),v("tr",[v("td",[t._v("/root")]),t._v(" "),v("td",[t._v("超级用户的家目录,可以操作")])]),t._v(" "),v("tr",[v("td",[t._v("/tmp")]),t._v(" "),v("td",[t._v("临时目录,可以操作")])]),t._v(" "),v("tr",[v("td",[t._v("/proc")]),t._v(" "),v("td",[t._v("正在运行的内核信息映射, 主要输出进程信息、内存资源信息和磁盘分区信息等等")])]),t._v(" "),v("tr",[v("td",[t._v("/sys")]),t._v(" "),v("td",[t._v("硬件设备的驱动程序信息")])]),t._v(" "),v("tr",[v("td",[t._v("/var")]),t._v(" "),v("td",[t._v("变量")])]),t._v(" "),v("tr",[v("td",[t._v("/bin")]),t._v(" "),v("td",[t._v("普通的基本命令，如ls,chmod等,一般的用户也都可以使用")])]),t._v(" "),v("tr",[v("td",[t._v("/sbin")]),t._v(" "),v("td",[t._v("基本的系统命令，如shutdown，reboot，用于启动系统，修复系统,只有管理员才可以运行")])]),t._v(" "),v("tr",[v("td",[t._v("/usr/bin")]),t._v(" "),v("td",[t._v("是你在后期安装的一些软件的运行脚本")])]),t._v(" "),v("tr",[v("td",[t._v("/usr/sbin")]),t._v(" "),v("td",[t._v("放置一些用户安装的系统管理的必备程序")])])])]),t._v(" "),v("h4",{attrs:{id:"_1-2-命令基本格式"}},[t._v("1.2 命令基本格式")]),t._v(" "),v("h5",{attrs:{id:"_1-2-1-命令提示符"}},[t._v("1.2.1 命令提示符")]),t._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),v("ul",[v("li",[t._v("root 当前登录用户")]),t._v(" "),v("li",[t._v("localhost 主机名")]),t._v(" "),v("li",[t._v("~ 当前工作目录,默认是当前用户的家目录，root就是/root,普通用户是 /home/用户名")]),t._v(" "),v("li",[t._v("提示符 超级用户是 #,普通用户是$")])]),t._v(" "),v("h5",{attrs:{id:"_1-2-2-命令格式"}},[t._v("1.2.2 命令格式")]),t._v(" "),v("ul",[v("li",[t._v("命令 [选项] [参数]")]),t._v(" "),v("li",[t._v("当有多个选项时，可以写在一起")]),t._v(" "),v("li",[t._v("一般参数有简化和完整写法两种 -a 与 --all等效")])]),t._v(" "),v("h5",{attrs:{id:"_1-2-3-ls"}},[t._v("1.2.3 ls")]),t._v(" "),v("ul",[v("li",[t._v("查询目录中的内容")]),t._v(" "),v("li",[t._v("ls [选项] [文件或者目录]")]),t._v(" "),v("li",[t._v("选项\n"),v("ul",[v("li",[t._v("-a 显示所有文件，包括隐藏文件")]),t._v(" "),v("li",[t._v("-l 显示详细信息")]),t._v(" "),v("li",[t._v("-d 查看目录本身的属性而非子文件 ls /etc/")]),t._v(" "),v("li",[t._v("-h 人性化的方式显示文件大小")]),t._v(" "),v("li",[t._v("-i 显示inode,也就是i节点，每个节点都有ID号")])])]),t._v(" "),v("li",[t._v("默认当前目录下的文件列表")])]),t._v(" "),v("h6",{attrs:{id:"_1-2-3-1-l"}},[t._v("1.2.3.1 -l")]),t._v(" "),v("p",[t._v("显示详细信息")]),t._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("drwxr-xr-x "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root  root   "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),t._v(" Sep "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" 00:19 logs\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("drwxr-xr-x")]),t._v(" "),v("th",[t._v(".")]),t._v(" "),v("th",[t._v("1")]),t._v(" "),v("th",[t._v("root")]),t._v(" "),v("th",[t._v("root")]),t._v(" "),v("th",[t._v("800")]),t._v(" "),v("th",[t._v("Sep 16 00:19")]),t._v(" "),v("th",[t._v("logs")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("文件类型和权限")]),t._v(" "),v("td",[t._v("ACL权限")]),t._v(" "),v("td",[t._v("硬链接引用计数")]),t._v(" "),v("td",[t._v("所有者")]),t._v(" "),v("td",[t._v("所属组")]),t._v(" "),v("td",[t._v("文件大小")]),t._v(" "),v("td",[t._v("最后修改时间")]),t._v(" "),v("td",[t._v("文件名")])])])]),t._v(" "),v("h6",{attrs:{id:"_1-2-3-2-文件类型和权限"}},[t._v("1.2.3.2 文件类型和权限")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("-rw-r--r--\n")])])]),v("ul",[v("li",[t._v("文件类型 - 文件、d 目录、l 软链接文件")]),t._v(" "),v("li",[t._v("u(所有者)、g(所属组)、o(其他人)")]),t._v(" "),v("li",[t._v("r(read) 读取、w(write) 写入、x(execute) 执行")])]),t._v(" "),v("h4",{attrs:{id:"_1-3-文件处理命令"}},[t._v("1.3 文件处理命令")]),t._v(" "),v("h5",{attrs:{id:"_1-3-1-mkdir"}},[t._v("1.3.1 mkdir")]),t._v(" "),v("ul",[v("li",[t._v("建立目录 make directory")]),t._v(" "),v("li",[t._v("mkdir -p [目录名]\n"),v("ul",[v("li",[t._v("-p 递归创建")])])])]),t._v(" "),v("h5",{attrs:{id:"_1-3-2-cd"}},[t._v("1.3.2 cd")]),t._v(" "),v("ul",[v("li",[t._v("切换所在目录 change directory")]),t._v(" "),v("li",[t._v("cd [目录]\n"),v("ul",[v("li",[t._v("~ 家目录")]),t._v(" "),v("li",[t._v("家目录")]),t._v(" "),v("li",[t._v("上次目录")]),t._v(" "),v("li",[t._v(". 当前目录")]),t._v(" "),v("li",[t._v(".. 上级目录")])])]),t._v(" "),v("li",[t._v("相对路径是参照当前所在目录")]),t._v(" "),v("li",[t._v("绝对路径是从根目录开始")]),t._v(" "),v("li",[t._v("按TAB键可以补全命令和目录")])]),t._v(" "),v("h5",{attrs:{id:"_1-3-3-pwd"}},[t._v("1.3.3 pwd")]),t._v(" "),v("ul",[v("li",[t._v("显示当前目录 pwd")])]),t._v(" "),v("h5",{attrs:{id:"_1-3-4-rmdir"}},[t._v("1.3.4 rmdir")]),t._v(" "),v("ul",[v("li",[t._v("删除目录 remove empty directory")]),t._v(" "),v("li",[t._v("rmdir [目录名]")])]),t._v(" "),v("h4",{attrs:{id:"_1-3-5-rm"}},[t._v("1.3.5 rm")]),t._v(" "),v("ul",[v("li",[t._v("删除文件或者目录 remove")]),t._v(" "),v("li",[t._v("rm [文件或者目录]\n"),v("ul",[v("li",[t._v("-r 删除目录")]),t._v(" "),v("li",[t._v("-f 强制删除")])])]),t._v(" "),v("li",[t._v("rm -rf 文件或者目录] 递归强制删除所有目录")])]),t._v(" "),v("h5",{attrs:{id:"_1-3-6-cp"}},[t._v("1.3.6 cp")]),t._v(" "),v("ul",[v("li",[t._v("copy 复制命令")]),t._v(" "),v("li",[t._v("copy [源文件或者目录] [目标文件]\n"),v("ul",[v("li",[t._v("-r 复制目录,默认是复制文件")]),t._v(" "),v("li",[t._v("-p 连带文件属性复制")]),t._v(" "),v("li",[t._v("-d 若源文件是链接文件，则复制连接属性")]),t._v(" "),v("li",[t._v("-a 相当于 -rpd")])])])]),t._v(" "),v("h5",{attrs:{id:"_1-3-7-mv"}},[t._v("1.3.7 mv")]),t._v(" "),v("ul",[v("li",[t._v("移动文件或者改名 move")]),t._v(" "),v("li",[t._v("mv [源文件或者目录] [目标文件]")])]),t._v(" "),v("p",[t._v("当第二个参数类型是文件时，mv命令完成文件重命名，它将所给的源文件或目录重命名为给定的目标文件名。"),v("br"),t._v("\n当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。在跨文件系统移动文件时，mv先拷贝，再将原有文件删除，而链至该文件的链接也将丢失。")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("# 将webdata 移动到/bin/usr/中\nmv  webdata  /bin/usr/\n\n# 将 /usr/lib/下所有的东西移到/zone/中。\nmv    /usr/lib/*    /zone\n\n\n# 是将lib下以txt结尾的所有文件移到/zone中。\nmv    /usr/lib/*.txt    /zone\n\n# 将文件temp.txt 修改名字为tempTest.txt\nmv   temp.txt  tempTest.txt\n\n")])])]),v("p",[v("code",[t._v("[options]")]),t._v("主要参数(几个重要的参数)"),v("br"),t._v(" "),v("code",[t._v("-i")]),t._v("：交互方式操作。如果mv操作将导致对已存在的目标文件的覆盖，此时系统询问是否重写，要求用户回答”y”或”n”，这样可以避免误覆盖文件。"),v("br"),t._v(" "),v("code",[t._v("-f")]),t._v("：禁止交互操作。mv操作要覆盖某个已有的目标文件时不给任何指示，指定此参数后i参数将不再起作用。 "),v("code",[t._v("- r")]),t._v(" 指示mv将参数中列出的全部目录和子目录均递归地移动。")]),t._v(" "),v("h5",{attrs:{id:"_1-3-8-ln"}},[t._v("1.3.8 ln")]),t._v(" "),v("ul",[v("li",[t._v("链接命令,生成链接文件 link")])]),t._v(" "),v("h6",{attrs:{id:"_1-3-8-1-硬链接特征"}},[t._v("1.3.8.1 硬链接特征")]),t._v(" "),v("ul",[v("li",[t._v("拥有相同的i节点和存储block块，可以看作是同一个文件")]),t._v(" "),v("li",[t._v("可以通过i节点访问")]),t._v(" "),v("li",[t._v("不能跨分区")]),t._v(" "),v("li",[t._v("不能针对目录使用")]),t._v(" "),v("li",[t._v("一般不使用")])]),t._v(" "),v("h6",{attrs:{id:"_1-3-8-2-软链接特征"}},[t._v("1.3.8.2 软链接特征")]),t._v(" "),v("ul",[v("li",[t._v("ln -s [源文件] [目标文件]\n"),v("ul",[v("li",[t._v("-s 创建软链接")])])]),t._v(" "),v("li",[t._v("类似Windows快捷方式")]),t._v(" "),v("li",[t._v("软链接拥有自己的i节点和Block块，但是数据块中只保存源文件的文件名和i节点号，并没有实际的文件数据")]),t._v(" "),v("li",[t._v("lrwxrwxrwx l 软链接 软链接的文件权限都是 777")]),t._v(" "),v("li",[t._v("修改任意一个文件，另一个都会改变")]),t._v(" "),v("li",[t._v("删除源文件，软链接不能使用")]),t._v(" "),v("li",[t._v("软链接源文件必须写绝对路径")])]),t._v(" "),v("h4",{attrs:{id:"_1-4-文件搜索命令"}},[t._v("1.4 文件搜索命令")]),t._v(" "),v("h5",{attrs:{id:"_1-4-1-locate"}},[t._v("1.4.1 locate")]),t._v(" "),v("ul",[v("li",[t._v("在后台数据库中按文件名搜索，速度比较快")]),t._v(" "),v("li",[t._v("数据保存在/var/lib/mlocate后台数据库，每天更新一次")]),t._v(" "),v("li",[t._v("可以updatedb命令立刻更新数据库")]),t._v(" "),v("li",[t._v("只能搜索文件名")]),t._v(" "),v("li",[t._v("/etc/updatedb.conf 建立索引的配置文件\n"),v("ul",[v("li",[t._v('PRUNE_BIND_MOUNTS = "yes" 全部生效，开启搜索限制')]),t._v(" "),v("li",[t._v("PRUNEFS 不搜索的文件系统")]),t._v(" "),v("li",[t._v("PRUNENAMES 忽略的文件类型")]),t._v(" "),v("li",[t._v("PRUNEPATHS 忽略的路径 /tmp")])])])]),t._v(" "),v("h5",{attrs:{id:"_1-4-2-whereis"}},[t._v("1.4.2 whereis")]),t._v(" "),v("ul",[v("li",[t._v("搜索命令所在路径以及帮助文档所在位置")]),t._v(" "),v("li",[t._v("whereis 命令名 whereis ls\n"),v("ul",[v("li",[t._v("-b 只查找可执行文件")]),t._v(" "),v("li",[t._v("-m 只查找帮助文件")])])])]),t._v(" "),v("h5",{attrs:{id:"_1-4-3-which"}},[t._v("1.4.3 which")]),t._v(" "),v("p",[t._v("可以看到别名 which ls\n能看到的都是外部安装的命令\n无法查看Shell自带的命令，如 which cd")]),t._v(" "),v("h5",{attrs:{id:"_1-4-4-环境变量"}},[t._v("1.4.4 环境变量")]),t._v(" "),v("p",[v("code",[t._v("/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin")])]),t._v(" "),v("ul",[v("li",[t._v("定义的是系统搜索命令的路径")]),t._v(" "),v("li",[t._v("echo $PATH")])]),t._v(" "),v("h5",{attrs:{id:"_1-4-5-find"}},[t._v("1.4.5 find")]),t._v(" "),v("ul",[v("li",[t._v("文件搜索命令")]),t._v(" "),v("li",[t._v("find [搜索范围] [搜索条件]")])]),t._v(" "),v("h6",{attrs:{id:"_1-4-5-1-按名称搜索"}},[t._v("1.4.5.1 按名称搜索")]),t._v(" "),v("ul",[v("li",[t._v("避免大范围的搜索，会非常消耗系统资源")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find / -name aaa.log\n")])])]),v("h6",{attrs:{id:"_1-4-5-2-通配符"}},[t._v("1.4.5.2 通配符")]),t._v(" "),v("ul",[v("li",[t._v("find是在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配")]),t._v(" "),v("li",[t._v("通配符\n"),v("ul",[v("li",[v("code",[t._v("*")]),t._v(" 匹配任意内容")]),t._v(" "),v("li",[v("code",[t._v("?")]),t._v(" 匹配任意一个字符")]),t._v(" "),v("li",[v("code",[t._v("[]")]),t._v(" 匹配任意一个中括号内的字符")])])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('find . -name "ab[cdef]"\n')])])]),v("h6",{attrs:{id:"_1-4-5-3-i"}},[t._v("1.4.5.3 -i")]),t._v(" "),v("p",[t._v("不区分大小写")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find / -iname A.log\n")])])]),v("h6",{attrs:{id:"_1-4-5-4-user"}},[t._v("1.4.5.4 -user")]),t._v(" "),v("p",[t._v("按所有者进行搜索")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find /root -user root\nfind /root -nouser\n")])])]),v("h6",{attrs:{id:"_1-4-5-5-按时间搜索"}},[t._v("1.4.5.5 按时间搜索")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find /nginx/access.log -mtime +5\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("atime")]),t._v(" "),v("td",[t._v("文件访问时间")])]),t._v(" "),v("tr",[v("td",[t._v("ctime")]),t._v(" "),v("td",[t._v("改变文件属性")])]),t._v(" "),v("tr",[v("td",[t._v("mtime")]),t._v(" "),v("td",[t._v("修改文件内容")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("-5")]),t._v(" "),v("td",[t._v("5天内修改的文件")])]),t._v(" "),v("tr",[v("td",[t._v("5")]),t._v(" "),v("td",[t._v("5天前当前修改的文件")])]),t._v(" "),v("tr",[v("td",[t._v("+5")]),t._v(" "),v("td",[t._v("5天前修改的文件")])])])]),t._v(" "),v("h6",{attrs:{id:"_1-4-5-6-按大小搜索"}},[t._v("1.4.5.6 按大小搜索")]),t._v(" "),v("ul",[v("li",[t._v("k小写,M大写")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find . -size 100k\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("-8k")]),t._v(" "),v("td",[t._v("小于8K")])]),t._v(" "),v("tr",[v("td",[t._v("8k")]),t._v(" "),v("td",[t._v("等于8K")])]),t._v(" "),v("tr",[v("td",[t._v("+8k")]),t._v(" "),v("td",[t._v("大于8K")])]),t._v(" "),v("tr",[v("td",[t._v("+8M")]),t._v(" "),v("td",[t._v("小于8M")])])])]),t._v(" "),v("h6",{attrs:{id:"_1-4-5-7-按i节点搜索"}},[t._v("1.4.5.7 按i节点搜索")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find . -inum 123456\n")])])]),v("h6",{attrs:{id:"_1-4-5-8-综合应用"}},[t._v("1.4.5.8 综合应用")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find /tmp -size +10k -a -size -20k\n")])])]),v("ul",[v("li",[t._v("查找/etc目录下，大于10KB并且小于20KB的文件")]),t._v(" "),v("li",[t._v("-a and 逻辑与，两个条件都满足")]),t._v(" "),v("li",[t._v("-o or 逻辑或，两个条件满足一个就可以")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("find /tmp -size +10k -a -size -20k -exec ls -lh {} \\;\n\n")])])]),v("ul",[v("li",[t._v("exec 对上个命令的结果进行操作")])]),t._v(" "),v("h6",{attrs:{id:"_1-4-5-9-grep"}},[t._v("1.4.5.9 grep")]),t._v(" "),v("ul",[v("li",[t._v("在文件当中匹配符合条件的字符串")]),t._v(" "),v("li",[t._v('grep "10" access.log\n'),v("ul",[v("li",[t._v("-i 忽略大小写")]),t._v(" "),v("li",[t._v("-v 排除指定字符串")])])]),t._v(" "),v("li",[t._v("find命令，在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配")]),t._v(" "),v("li",[t._v("grep命令 在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式时包含匹配")])]),t._v(" "),v("h4",{attrs:{id:"_1-5-帮助命令"}},[t._v("1.5 帮助命令")]),t._v(" "),v("h5",{attrs:{id:"_1-5-1-基本用法"}},[t._v("1.5.1 基本用法")]),t._v(" "),v("ul",[v("li",[t._v("man 命令 获取指定命令的帮助")]),t._v(" "),v("li",[t._v("man ls 查看ls的帮助")])]),t._v(" "),v("h5",{attrs:{id:"_1-5-2-man的级别"}},[t._v("1.5.2 man的级别")]),t._v(" "),v("ul",[v("li",[t._v("1 查看命令的帮助")]),t._v(" "),v("li",[t._v("2 查看可被内核调用的函数的帮助")]),t._v(" "),v("li",[t._v("3 查看函数和函数库的帮助")]),t._v(" "),v("li",[t._v("4 查看特殊文件的帮助")]),t._v(" "),v("li",[t._v("5 查看配置文件的帮助")]),t._v(" "),v("li",[t._v("6 查看游戏的帮助")]),t._v(" "),v("li",[t._v("7 查看其它的帮助")]),t._v(" "),v("li",[t._v("8 查看系统管理员可用命令的帮助")]),t._v(" "),v("li",[t._v("9 查看和内核相关文件的帮助")])]),t._v(" "),v("h5",{attrs:{id:"_1-5-3-查看命令级别"}},[t._v("1.5.3 查看命令级别")]),t._v(" "),v("ul",[v("li",[t._v("查看命令级别")]),t._v(" "),v("li",[t._v("1p: POSIX utilities")]),t._v(" "),v("li",[t._v("POSIX表示可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ），POSIX标准定义了操作系统应该为应用程序提供的接口标准.")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("man -f ls\nwhatis ls\nman 1 ls\nman 1p ls\n")])])]),v("h5",{attrs:{id:"_1-5-4-关键字搜索"}},[t._v("1.5.4 关键字搜索")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("- man -k passwd\n")])])]),v("h5",{attrs:{id:"_1-5-5-shell-内部帮助"}},[t._v("1.5.5 shell 内部帮助")]),t._v(" "),v("ul",[v("li",[t._v("whereis找到就是外部，找不到就是内部")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("help cd\n")])])]),v("h4",{attrs:{id:"_1-6-压缩与解压缩命令"}},[t._v("1.6 压缩与解压缩命令")]),t._v(" "),v("p",[t._v("后缀 "),v("code",[t._v(".zip")]),t._v(" "),v("code",[t._v(".gz")]),t._v(" "),v("code",[t._v(".bz2")]),t._v(" "),v("code",[t._v(".tar.gz")]),t._v(" "),v("code",[t._v(".tar.bz2")])]),t._v(" "),v("h5",{attrs:{id:"_1-6-1-zip格式"}},[t._v("1.6.1 zip格式")]),t._v(" "),v("ul",[v("li",[t._v("压缩文件 zip 压缩文件名 源文件")]),t._v(" "),v("li",[t._v("压缩目录 zip -r 压缩文件名 源目录")]),t._v(" "),v("li",[t._v("解压 unzip 压缩文件名")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("mkdir book\ntouch book/1.txt\ntouch book/2.txt\nzip -r book.zip book\nunzip book.zip\n")])])]),v("h5",{attrs:{id:"_1-6-2-gzip"}},[t._v("1.6.2 gzip")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("gzip 源文件")]),t._v(" "),v("td",[t._v("gzip a.txt")]),t._v(" "),v("td",[t._v("压缩为.gz格式的压缩文件，源文件会消失")])]),t._v(" "),v("tr",[v("td",[t._v("gzip c 源文件 > 压缩文件")]),t._v(" "),v("td",[t._v("gzip -c yum.txt > yum.txt.gz")]),t._v(" "),v("td",[t._v("压缩为.gz格式的压缩文件，源文件不会消失")])]),t._v(" "),v("tr",[v("td",[t._v("gzip -r 目录")]),t._v(" "),v("td",[t._v("gzip -r xx")]),t._v(" "),v("td",[t._v("压缩目录下的所有子文件，但是不压缩目录")])]),t._v(" "),v("tr",[v("td",[t._v("gzip -d 压缩文件名")]),t._v(" "),v("td",[t._v("gzip -d yum.txt.gz")]),t._v(" "),v("td",[t._v("解压缩文件,不保留压缩包")])]),t._v(" "),v("tr",[v("td",[t._v("gunzip 压缩文件")]),t._v(" "),v("td",[t._v("gunzip yum.txt.gz")]),t._v(" "),v("td",[t._v("解压缩文件,不保留压缩包")])])])]),t._v(" "),v("ul",[v("li",[t._v("压缩是压缩目录下的文件")])]),t._v(" "),v("h5",{attrs:{id:"_1-6-3-bz2格式压缩"}},[t._v("1.6.3 .bz2格式压缩")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("bzip2 源文件")]),t._v(" "),v("td",[t._v("bzip2 1.txt")]),t._v(" "),v("td",[t._v("压缩为.bz2格式的文件，不保留源文件")])]),t._v(" "),v("tr",[v("td",[t._v("bzip2 -k 源文件")]),t._v(" "),v("td",[t._v("zip2 -k 1.txt")]),t._v(" "),v("td",[t._v("压缩为.bz2格式的文件，保留源文件")])]),t._v(" "),v("tr",[v("td",[t._v("bzip2 -d 压缩文件名")]),t._v(" "),v("td",[t._v("bzip2 -d 1.txt.bz2")]),t._v(" "),v("td",[t._v("解压压缩包")])]),t._v(" "),v("tr",[v("td",[t._v("bunzip2 压缩文件名")]),t._v(" "),v("td",[t._v("bunzip2 1.txt.bz2")]),t._v(" "),v("td",[t._v("解压压缩包")])])])]),t._v(" "),v("ul",[v("li",[t._v("bzip2 不能压缩目录")])]),t._v(" "),v("h5",{attrs:{id:"_1-6-4-tar"}},[t._v("1.6.4 tar")]),t._v(" "),v("ul",[v("li",[t._v("打包命令")]),t._v(" "),v("li",[t._v("tar -cvf 打包文件名 源文件\n"),v("ul",[v("li",[t._v("-c 打包")]),t._v(" "),v("li",[t._v("-v 显示过程")]),t._v(" "),v("li",[t._v("-f 指定打包后的文件名")])])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("tar -cvf book.tar book\ngzip book.tar\nbzip2 book.tar\n")])])]),v("ul",[v("li",[t._v("x 解打包")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("tar -xvf book.tar\n")])])]),v("h5",{attrs:{id:"_1-6-5-tar-gz压缩格式"}},[t._v("1.6.5 tar.gz压缩格式")]),t._v(" "),v("ul",[v("li",[t._v("可以先打包为"),v("code",[t._v(".tar")]),t._v("格式，再压缩为"),v("code",[t._v(".gz")]),t._v("格式 "),v("code",[t._v("-z")]),t._v(" 压缩为"),v("code",[t._v(".tar.gz")]),t._v("格式 "),v("code",[t._v("-x")]),t._v(" 解压缩"),v("code",[t._v(".tar.gz")]),t._v("格式 。")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("tar -zcvf")]),t._v(" 压缩包名 "),v("code",[t._v(".tar.gz")]),t._v("源文件")]),t._v(" "),v("td",[v("code",[t._v("tar -zcvf book.gar.gz book")])]),t._v(" "),v("td",[t._v("可以先打包为"),v("code",[t._v(".tar")]),t._v("格式，再压缩为"),v("code",[t._v(".gz")]),t._v("格式")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("tar -zxvf")]),t._v(" 压缩包名"),v("code",[t._v(".tar.gz")])]),t._v(" "),v("td",[v("code",[t._v("tar -zxvf book.tar.gz")])]),t._v(" "),v("td",[t._v("解压"),v("code",[t._v("tar.gz")]),t._v("压缩包")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("tar -jcvf")]),t._v(" 压缩包名 "),v("code",[t._v(".tar.bz2")]),t._v("源文件")]),t._v(" "),v("td",[v("code",[t._v("tar -zcvf .tar.bz2 book")])]),t._v(" "),v("td",[t._v("可以先打包为"),v("code",[t._v(".tar")]),t._v("格式，再压缩为"),v("code",[t._v(".bz2")]),t._v("格式")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("tar -jxvf")]),t._v(" 压缩包名"),v("code",[t._v(".tar.bz2")])]),t._v(" "),v("td",[v("code",[t._v("tar -zxvf book.tar.bz2")])]),t._v(" "),v("td",[t._v("解压"),v("code",[t._v("tar.bz2")]),t._v("压缩包")])])])]),t._v(" "),v("h4",{attrs:{id:"_1-7-关机和重启命令"}},[t._v("1.7 关机和重启命令")]),t._v(" "),v("h5",{attrs:{id:"_1-7-1-shutdown"}},[t._v("1.7.1 shutdown")]),t._v(" "),v("p",[t._v("shutdown 关机命令")]),t._v(" "),v("ul",[v("li",[t._v("-c 取消前一个关机命令")]),t._v(" "),v("li",[t._v("-h 关机")]),t._v(" "),v("li",[t._v("-r 重启")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("shutdown -r 06:00\nshutdown -c\n")])])]),v("h5",{attrs:{id:"_1-7-2-init"}},[t._v("1.7.2 init")]),t._v(" "),v("p",[t._v("关机")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("init 0\n")])])]),v("p",[t._v("重启")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("init 6\n")])])]),v("p",[t._v("系统的运行级别")]),t._v(" "),v("ul",[v("li",[t._v("0 关机")]),t._v(" "),v("li",[t._v("1 但用户")]),t._v(" "),v("li",[t._v("2 不 完全多用户，不包含NFS服务")]),t._v(" "),v("li",[t._v("3 完全多用户")]),t._v(" "),v("li",[t._v("4 未分配")]),t._v(" "),v("li",[t._v("5 图形界面")]),t._v(" "),v("li",[t._v("6 重启")])]),t._v(" "),v("h5",{attrs:{id:"_1-7-3-logout"}},[t._v("1.7.3 logout")]),t._v(" "),v("p",[t._v("退出登录")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("logout\n")])])]),v("h4",{attrs:{id:"_1-8-挂载"}},[t._v("1.8 挂载")]),t._v(" "),v("h5",{attrs:{id:"_1-8-1-挂载命令"}},[t._v("1.8.1 挂载命令")]),t._v(" "),v("ul",[v("li",[t._v("mount 查看系统中已经挂载的设备")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("mount \nmount -a\n")])])]),v("h5",{attrs:{id:"_1-8-2-挂载命令格式"}},[t._v("1.8.2 挂载命令格式")]),t._v(" "),v("ul",[v("li",[t._v("mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点")]),t._v(" "),v("li",[t._v("选项\n"),v("ul",[v("li",[t._v("-t 文件系统 ext4 iso9660")]),t._v(" "),v("li",[t._v("-o 特殊选项")])])])]),t._v(" "),v("h5",{attrs:{id:"_1-8-3-挂载光驱"}},[t._v("1.8.3 挂载光驱")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("mkdir /mnt/cd\nmount -t iso9660 /dev/sr0 /mnt/cdrom\n")])])]),v("h5",{attrs:{id:"_1-8-4-卸载光驱"}},[t._v("1.8.4 卸载光驱")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("umount /dev/sr0\numount /mnt/cdrom\n")])])]),v("h5",{attrs:{id:"_1-8-4-挂载u盘"}},[t._v("1.8.4 挂载U盘")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("fdisk -l\nmount -t vfat /dev/sdb1 /mnt/usb\n")])])]),v("ul",[v("li",[t._v("linux默认不支持NTFS格式")])]),t._v(" "),v("h4",{attrs:{id:"_1-9-查看登录用户信息"}},[t._v("1.9 查看登录用户信息")]),t._v(" "),v("h5",{attrs:{id:"_1-9-1-w"}},[t._v("1.9.1 w")]),t._v(" "),v("p",[t._v("查看登录用户信息")]),t._v(" "),v("ul",[v("li",[t._v("USER 登录的用户名")]),t._v(" "),v("li",[t._v("TTY 登录的终端 tty1 本地终端 pts/0远程终端")]),t._v(" "),v("li",[t._v("FROM 登录的IP")]),t._v(" "),v("li",[t._v("LOGIN 登录时间")]),t._v(" "),v("li",[t._v("IDLE 用户闲置时间")]),t._v(" "),v("li",[t._v("JCPU 该终端所有进程占用的时间")]),t._v(" "),v("li",[t._v("PCPU 当前进程所占用的时间")]),t._v(" "),v("li",[t._v("WHAT 正在执行的命令")])]),t._v(" "),v("h5",{attrs:{id:"_1-9-2-who"}},[t._v("1.9.2 who")]),t._v(" "),v("p",[t._v("查看登录用户信息")]),t._v(" "),v("ul",[v("li",[t._v("USER 登录的用户名")]),t._v(" "),v("li",[t._v("TTY 登录的终端 tty1 本地终端 pts/0远程终端")]),t._v(" "),v("li",[t._v("LOGIN 登录时间（登录的IP）")])]),t._v(" "),v("h5",{attrs:{id:"_1-9-3-last"}},[t._v("1.9.3 last")]),t._v(" "),v("p",[t._v("查看当前登录和过去登录的用户信息 默认读取 /var/log/wtmp 文件")]),t._v(" "),v("ul",[v("li",[t._v("用户名")]),t._v(" "),v("li",[t._v("登录终端")]),t._v(" "),v("li",[t._v("登录IP")]),t._v(" "),v("li",[t._v("登录时间")]),t._v(" "),v("li",[t._v("退出时间(在线时间)")])]),t._v(" "),v("h5",{attrs:{id:"_1-9-4-lastlog"}},[t._v("1.9.4 lastlog")]),t._v(" "),v("p",[t._v("查看所有用户的最后一次登录时间")]),t._v(" "),v("ul",[v("li",[t._v("用户名")]),t._v(" "),v("li",[t._v("登录终端")]),t._v(" "),v("li",[t._v("登录IP")]),t._v(" "),v("li",[t._v("最后一次登录时间")])]),t._v(" "),v("h3",{attrs:{id:"_2-shell"}},[t._v("2. shell")]),t._v(" "),v("ul",[v("li",[t._v("shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序")]),t._v(" "),v("li",[t._v("用户可以用Shell来启动、挂起、停止或者编写一些程序")]),t._v(" "),v("li",[t._v("Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。")]),t._v(" "),v("li",[t._v("Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。")])]),t._v(" "),v("h4",{attrs:{id:"_2-1-查看支持的shell"}},[t._v("2.1 查看支持的shell")]),t._v(" "),v("ul",[v("li",[t._v("/etc/shells")])]),t._v(" "),v("h4",{attrs:{id:"_2-2-echo"}},[t._v("2.2 echo")]),t._v(" "),v("ul",[v("li",[t._v("输出命令")]),t._v(" "),v("li",[t._v("--e 支持反斜线控制的字符转换")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("控制字符")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("\\a")]),t._v(" "),v("td",[t._v("输出警告音")])]),t._v(" "),v("tr",[v("td",[t._v("\\b")]),t._v(" "),v("td",[t._v("退格键，也就是向左删除键")])]),t._v(" "),v("tr",[v("td",[t._v("\\n")]),t._v(" "),v("td",[t._v("换行符")])]),t._v(" "),v("tr",[v("td",[t._v("\\r")]),t._v(" "),v("td",[t._v("回车键")])]),t._v(" "),v("tr",[v("td",[t._v("\\t")]),t._v(" "),v("td",[t._v("制表符，也就是Tab键")])]),t._v(" "),v("tr",[v("td",[t._v("\\v")]),t._v(" "),v("td",[t._v("垂直制表符")])]),t._v(" "),v("tr",[v("td",[t._v("\\onnn")]),t._v(" "),v("td",[t._v("按照八进制ASCII码表输出字符，其中0为数字零，nnn是三位八进制数")])]),t._v(" "),v("tr",[v("td",[t._v("\\xhh")]),t._v(" "),v("td",[t._v("按照十六进制ASCII码表输出字符，其中hh是两位十六进制数")])])])]),t._v(" "),v("ul",[v("li",[t._v("30m-47m")]),t._v(" "),v("li",[t._v('echo -e "\\e[1;31m warning \\e[0m"')])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("符号")]),t._v(" "),v("th",[t._v("颜色")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("#30m")]),t._v(" "),v("td",[t._v("黑色")])]),t._v(" "),v("tr",[v("td",[t._v("#31")]),t._v(" "),v("td",[t._v("红色")])]),t._v(" "),v("tr",[v("td",[t._v("#32")]),t._v(" "),v("td",[t._v("绿色")])]),t._v(" "),v("tr",[v("td",[t._v("#33")]),t._v(" "),v("td",[t._v("黄色")])]),t._v(" "),v("tr",[v("td",[t._v("##34")]),t._v(" "),v("td",[t._v("蓝色")])]),t._v(" "),v("tr",[v("td",[t._v("##35")]),t._v(" "),v("td",[t._v("洋红")])]),t._v(" "),v("tr",[v("td",[t._v("##36")]),t._v(" "),v("td",[t._v("青涩")])]),t._v(" "),v("tr",[v("td",[t._v("##37")]),t._v(" "),v("td",[t._v("白色")])])])]),t._v(" "),v("h4",{attrs:{id:"_2-3-编写执行shell"}},[t._v("2.3 编写执行shell")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('#!/bin/bash\necho -e "\\e[1;34m hello world \\e[0m"\n')])])]),v("p",[t._v("赋予执行权限，直接运行")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("chmod 755 hello.sh\n./hello.sh\n")])])]),v("p",[t._v("通过Bash调用执行脚本")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("bash hello.sh\n")])])]),v("h4",{attrs:{id:"_2-4-别名"}},[t._v("2.4 别名")]),t._v(" "),v("ul",[v("li",[t._v("命令别名 == 小名")]),t._v(" "),v("li",[t._v("临时生效")]),t._v(" "),v("li",[t._v("alias")]),t._v(" "),v("li",[t._v('alias rm="rm -i"')]),t._v(" "),v("li",[t._v("写入环境变量配置文件 vi ~/.bashrc")]),t._v(" "),v("li",[t._v("source ~/.bashrc")]),t._v(" "),v("li",[t._v("unalias 别名 删除别名")])]),t._v(" "),v("h4",{attrs:{id:"_2-5-命令的生效顺序"}},[t._v("2.5 命令的生效顺序")]),t._v(" "),v("ul",[v("li",[t._v("绝对路径或者相对路径")]),t._v(" "),v("li",[t._v("别名")]),t._v(" "),v("li",[t._v("bash内部命令")]),t._v(" "),v("li",[t._v("按照$PATH环境变量定义的目录查找顺序找到的第一个命令")])]),t._v(" "),v("h4",{attrs:{id:"_2-6-命令快捷键"}},[t._v("2.6 命令快捷键")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("ctrl+c")]),t._v(" "),v("td",[t._v("强制终止当前命令")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+l")]),t._v(" "),v("td",[t._v("清屏")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+a")]),t._v(" "),v("td",[t._v("光标移动到命令行首")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+e")]),t._v(" "),v("td",[t._v("光标移动到命令行尾")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+u")]),t._v(" "),v("td",[t._v("从光标所在的位置删除到行首")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+z")]),t._v(" "),v("td",[t._v("把命令放入后台")])]),t._v(" "),v("tr",[v("td",[t._v("ctrl+r")]),t._v(" "),v("td",[t._v("在历史命令中搜索")])])])]),t._v(" "),v("h4",{attrs:{id:"_2-7-历史命令"}},[t._v("2.7 历史命令")]),t._v(" "),v("ul",[v("li",[t._v("history [选项] [历史命令保存文件]")]),t._v(" "),v("li",[t._v("选项\n"),v("ul",[v("li",[t._v("-c 清空历史命令")]),t._v(" "),v("li",[t._v("-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history")])])]),t._v(" "),v("li",[t._v("默认保存1000条 /etc/profile HISSIZE=10000")])]),t._v(" "),v("h4",{attrs:{id:"_2-8-调用"}},[t._v("2.8 调用")]),t._v(" "),v("ul",[v("li",[t._v("使用上下箭头调用以前的历史命令")]),t._v(" "),v("li",[t._v("使用 !n 重复执行第n条历史命令")]),t._v(" "),v("li",[t._v("使用 !! 重复执行上一条命令")]),t._v(" "),v("li",[t._v("使用 !字符 重复执行最后一条以该字符串开头的命令")])]),t._v(" "),v("h4",{attrs:{id:"_2-9-输出重定向"}},[t._v("2.9 输出重定向")]),t._v(" "),v("h5",{attrs:{id:"_2-9-1-标准输入输出"}},[t._v("2.9.1 标准输入输出")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("设备")]),t._v(" "),v("th",[t._v("设备文件名")]),t._v(" "),v("th",[t._v("文件描述符")]),t._v(" "),v("th",[t._v("类型")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("键盘")]),t._v(" "),v("td",[t._v("/dev/stdin")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("标准输入")])]),t._v(" "),v("tr",[v("td",[t._v("显示器")]),t._v(" "),v("td",[t._v("/dev/stdout")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("标准输出")])]),t._v(" "),v("tr",[v("td",[t._v("显示器")]),t._v(" "),v("td",[t._v("/dev/stderr")]),t._v(" "),v("td",[t._v("2")]),t._v(" "),v("td",[t._v("标准错误输出")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("符号")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("标准输出重定向")]),t._v(" "),v("td",[t._v("命令 > 文件")]),t._v(" "),v("td",[t._v("以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中")])]),t._v(" "),v("tr",[v("td",[t._v("标准输出重定向")]),t._v(" "),v("td",[t._v("命令 >> 文件")]),t._v(" "),v("td",[t._v("以追加的方式，把命令的正确输出输出到指定的文件或设备当中")])]),t._v(" "),v("tr",[v("td",[t._v("错误输出重定向")]),t._v(" "),v("td",[t._v("命令>文件")]),t._v(" "),v("td",[t._v("以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中")])]),t._v(" "),v("tr",[v("td",[t._v("错误输出重定向")]),t._v(" "),v("td",[t._v("命令>>文件")]),t._v(" "),v("td",[t._v("以追加的方式，把命令的错误输出输出到指定的文件或设备当中")])]),t._v(" "),v("tr",[v("td",[t._v("正确输出和错误输出同时保存")]),t._v(" "),v("td",[t._v("命令>文件 2>&1")]),t._v(" "),v("td",[t._v("以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中")])]),t._v(" "),v("tr",[v("td",[t._v("正确输出和错误输出同时保存")]),t._v(" "),v("td",[t._v("命令>文件 2>>&1")]),t._v(" "),v("td",[t._v("以追加的方式，把正确输出和错误输出都保存到同一个文件当中")])]),t._v(" "),v("tr",[v("td",[t._v("正确输出和错误输出同时保存")]),t._v(" "),v("td",[t._v("命令&>文件")]),t._v(" "),v("td",[t._v("以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中")])]),t._v(" "),v("tr",[v("td",[t._v("正确输出和错误输出同时保存")]),t._v(" "),v("td",[t._v("命令&>>文件")]),t._v(" "),v("td",[t._v("以追加的方式，把正确输出和错误输出都保存到同一个文件当中")])]),t._v(" "),v("tr",[v("td",[t._v("正确输出和错误输出同时保存")]),t._v(" "),v("td",[t._v("命令>>文件1 2>文件2")]),t._v(" "),v("td",[t._v("以覆盖的方式，正确的输出追加到文件1中，把错误输出追加到文件2中")])])])]),t._v(" "),v("h5",{attrs:{id:"_2-9-2-输入重定向"}},[t._v("2.9.2 输入重定向")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("命令 < 文件把文件做为命令的输入")])]),t._v(" "),v("li",[v("p",[t._v("命令 << 标识符 标识符把标识符之间内容作为命令的输入")])]),t._v(" "),v("li",[v("p",[t._v("wc < access.log")])]),t._v(" "),v("li",[v("p",[t._v("wc <>")])])]),t._v(" "),v("h4",{attrs:{id:"_2-10-管道符号"}},[t._v("2.10 管道符号")]),t._v(" "),v("h5",{attrs:{id:"_2-10-1-多命令顺序执行"}},[t._v("2.10.1 多命令顺序执行")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("多命令执行符")]),t._v(" "),v("th",[t._v("格式")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v(";")]),t._v(" "),v("td",[t._v("命令1;命令2")]),t._v(" "),v("td",[t._v("多个命令执行，命令之间没有任何逻辑联系")])]),t._v(" "),v("tr",[v("td",[t._v("&&")]),t._v(" "),v("td",[t._v("命令1&&命令2")]),t._v(" "),v("td",[t._v("逻辑与 当命令1正确执行，则命令2才会执行 当命令1执行不正确，则命令2不会执行")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("||")])]),t._v(" "),v("td",[t._v("命令1 "),v("code",[t._v("||")]),t._v(" 命令2")]),t._v(" "),v("td",[t._v("逻辑或 当命令1执行不正确，则命令2才会执行 当命令1正确执行，则命令2不会执行")])])])]),t._v(" "),v("ul",[v("li",[t._v("date;ls;date;ls")]),t._v(" "),v("li",[t._v("ls && echo yes || echo no")])]),t._v(" "),v("h5",{attrs:{id:"_2-10-2-管道符号"}},[t._v("2.10.2 管道符号")]),t._v(" "),v("ul",[v("li",[t._v("命令1的正确输出会作为命令2的操作对象")]),t._v(" "),v("li",[t._v("命令1|命令2")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("ls /etc/ | more\nnetstat -an | grep ESTABLISHED | wc -l\n")])])]),v("h5",{attrs:{id:"_2-10-3-通配符"}},[t._v("2.10.3 通配符")]),t._v(" "),v("p",[t._v("匹配文件名和目录名")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"left"}},[t._v("通配符")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"left"}},[t._v("?")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("匹配一个任意字符")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[t._v("*")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("匹配0个或任意字符，也就是可以匹配任意内容")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[t._v("[]")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("匹配中括号中任意一个字符")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[t._v("[-]")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("匹配中括号中任意一个字符,-代表范围")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[t._v("[^]")]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("匹配不是中括号中的一个字符")])])])]),t._v(" "),v("h5",{attrs:{id:"_2-10-4-其它符号"}},[t._v("2.10.4 其它符号")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("符号")]),t._v(" "),v("th",[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("''")]),t._v(" "),v("td",[t._v("单引号。在单引号中所有的特殊符号，如$和`都没有特殊含义")])]),t._v(" "),v("tr",[v("td",[t._v('""')]),t._v(" "),v("td",[t._v("双引号，在双引号里特殊符号都没有特殊含义，但是 $ ` \\ 例外，拥有调用变量值，引用命令和转义的含义")])]),t._v(" "),v("tr",[v("td",[t._v("``")]),t._v(" "),v("td",[t._v("反引号，扩起来的是系统命令")])]),t._v(" "),v("tr",[v("td",[t._v("$()")]),t._v(" "),v("td",[t._v("和反引号一样")])]),t._v(" "),v("tr",[v("td",[t._v("#")]),t._v(" "),v("td",[t._v("在shell脚本中，#开头的行代表注释")])]),t._v(" "),v("tr",[v("td",[t._v("$")]),t._v(" "),v("td",[t._v("用于调用变量的值")])]),t._v(" "),v("tr",[v("td",[t._v("\\")]),t._v(" "),v("td",[t._v("转义符号")])])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v(" a=`ls`\n b=$(ls)\n")])])]),v("h3",{attrs:{id:"_3-vi编辑器"}},[t._v("3. vi编辑器")]),t._v(" "),v("ul",[v("li",[t._v("VI visual interface")]),t._v(" "),v("li",[t._v("可视化接口")]),t._v(" "),v("li",[t._v("类似与windows中的记事本")]),t._v(" "),v("li",[t._v("vim支持多级撤销")]),t._v(" "),v("li",[t._v("跨平台")]),t._v(" "),v("li",[t._v("语法高亮")]),t._v(" "),v("li",[t._v("支持图形界面")])]),t._v(" "),v("h4",{attrs:{id:"_3-1-操作模式"}},[t._v("3.1 操作模式")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("模式名")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Command Mode 命令模式")]),t._v(" "),v("td",[t._v("等待输入的模式")])]),t._v(" "),v("tr",[v("td",[t._v("Insert Mode 输入模式")]),t._v(" "),v("td",[t._v("编辑模式，用于输入文本")])]),t._v(" "),v("tr",[v("td",[t._v("Last Line Mode 底行模式(尾行、末行)")]),t._v(" "),v("td",[t._v("可以输入指令，搜索，保存")])])])]),t._v(" "),v("ul",[v("li",[t._v("vim + abc")]),t._v(" "),v("li",[t._v("vim +3 abc")]),t._v(" "),v("li",[t._v("vim +5 abc")]),t._v(" "),v("li",[t._v("vim +/xxx abc")]),t._v(" "),v("li",[t._v("vim a b c :n")])]),t._v(" "),v("h4",{attrs:{id:"_3-2-常用指令"}},[t._v("3.2 常用指令")]),t._v(" "),v("h5",{attrs:{id:"_3-2-1-底行模式"}},[t._v("3.2.1 底行模式")]),t._v(" "),v("ul",[v("li",[t._v(":w 保存")]),t._v(" "),v("li",[t._v(":q 退出")]),t._v(" "),v("li",[t._v(":! 强制保存")]),t._v(" "),v("li",[t._v(":ls 列出所有的文件")]),t._v(" "),v("li",[t._v(":n 下一个")]),t._v(" "),v("li",[t._v(":N 上一个")]),t._v(" "),v("li",[t._v(":15 跳转到指定行")]),t._v(" "),v("li",[t._v("/xxx 从光标位置开始向后搜索 xxx 字符串")]),t._v(" "),v("li",[t._v("?xxx 从光标位置开始向前搜索")])]),t._v(" "),v("h5",{attrs:{id:"_3-2-2-命令模式"}},[t._v("3.2.2 命令模式")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("h 光标左移")])]),t._v(" "),v("li",[v("p",[t._v("j 光标下移")])]),t._v(" "),v("li",[v("p",[t._v("k 光标上移")])]),t._v(" "),v("li",[v("p",[t._v("l 光标右移")])]),t._v(" "),v("li",[v("p",[t._v("ctrl+f 向下翻页(front)")])]),t._v(" "),v("li",[v("p",[t._v("ctrl+b 向上翻页")])]),t._v(" "),v("li",[v("p",[t._v("ctrl+d 向下翻半页")])]),t._v(" "),v("li",[v("p",[t._v("ctrl+u 向上翻半页")])]),t._v(" "),v("li",[v("p",[t._v("dd 删除光标所在行")])]),t._v(" "),v("li",[v("p",[t._v("o 在光标所在行的下方插入一行并切换到输入模式")])]),t._v(" "),v("li",[v("p",[t._v("yy 复制光标所在的行")])]),t._v(" "),v("li",[v("p",[t._v("p 在光标所在行的下方粘贴")])]),t._v(" "),v("li",[v("p",[t._v("P 在光标所在行的上方粘贴")])])]),t._v(" "),v("h3",{attrs:{id:"_4-用户和用户组"}},[t._v("4. 用户和用户组")]),t._v(" "),v("ul",[v("li",[t._v("使用操作系统的人都是用户")]),t._v(" "),v("li",[t._v("用户组是具有相同系统权限的一组用户")])]),t._v(" "),v("h4",{attrs:{id:"_4-1-用户组"}},[t._v("4.1 用户组")]),t._v(" "),v("h5",{attrs:{id:"_4-1-1-etc-group"}},[t._v("4.1.1 /etc/group")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("/etc/group")]),t._v(" 存储当前系统中所有用户组信息")]),t._v(" "),v("li",[v("code",[t._v("group:x:123:abc,def")])]),t._v(" "),v("li",[t._v("组名称:组密码占位符:组编号:组中用户名列表")]),t._v(" "),v("li",[t._v("root 组编号为0")]),t._v(" "),v("li",[t._v("1-499系统预留的编号 预留给安装的软件和服务的")]),t._v(" "),v("li",[t._v("用户手动创建的用户组从500开始")]),t._v(" "),v("li",[t._v("组密码占位符都是x")])]),t._v(" "),v("h5",{attrs:{id:"_4-1-2-etc-gshadow"}},[t._v("4.1.2 /etc/gshadow")]),t._v(" "),v("ul",[v("li",[t._v("存放当前系统中用户组的密码信息")]),t._v(" "),v("li",[t._v("和group中的记录一一对应")]),t._v(" "),v("li",[v("code",[t._v("Group: * : :abc")])]),t._v(" "),v("li",[t._v("组名称 组密码 组管理者 组中用户名")])]),t._v(" "),v("h5",{attrs:{id:"_4-1-3-etc-passwd"}},[t._v("4.1.3 /etc/passwd")]),t._v(" "),v("ul",[v("li",[t._v("存储当前系统中所有用户的信息")]),t._v(" "),v("li",[v("code",[t._v("user:x:123:456:xxxxx:/home/user:/bin/bash")])]),t._v(" "),v("li",[t._v("用户名:密码占位符:用户编号: 用户注释信息:用户主目录:shell类型")])]),t._v(" "),v("h5",{attrs:{id:"_4-1-4-etc-shadow"}},[t._v("4.1.4 /etc/shadow")]),t._v(" "),v("ul",[v("li",[t._v("存放当前系统中所有用户的密码信息")]),t._v(" "),v("li",[v("code",[t._v("user:xxx:::::::")])]),t._v(" "),v("li",[t._v("用户名:密码:")])]),t._v(" "),v("h4",{attrs:{id:"_4-2-用户操作"}},[t._v("4.2 用户操作")]),t._v(" "),v("p",[t._v("添加组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupadd student\n")])])]),v("p",[t._v("修改组名称")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupmod -n stu student \n")])])]),v("p",[t._v("修改组编号")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupmod -g 111 stu \n")])])]),v("p",[t._v("添加分组并指定编号")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupadd -g 222 teacher \n")])])]),v("p",[t._v("删除分组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupdel 222 \n")])])]),v("p",[t._v("添加分组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groupadd teacher \n")])])]),v("p",[t._v("为用户指定所属组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("useradd -g teacher zhangsan \n")])])]),v("p",[t._v("为用户指定所属组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("useradd -g teacher lisi \n")])])]),v("p",[t._v("为用户指定工作目录")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("useradd -d /home/zhangsan zhangsan \n")])])]),v("p",[t._v("指定注释")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("usermod -c iamateacher zhangsan \n")])])]),v("p",[t._v("修改用户名")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("usermod -l zhangsan zhangsan2\n")])])]),v("p",[t._v("指定文件夹")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("usermod -d /home/zhangsan2 zhangsan2 \n")])])]),v("p",[t._v("修改用户所属组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("usermod -g stu zhangsan2 \n")])])]),v("p",[t._v("删除用户")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("userdel zhangsan2 \n")])])]),v("p",[t._v("删除所属文件夹")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("userdel -r lisi \n")])])]),v("h3",{attrs:{id:"_5-用户命令"}},[t._v("5. 用户命令")]),t._v(" "),v("p",[t._v("显示登录的用户名")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("whoami\n")])])]),v("p",[t._v("显示指定用户信息，包括用户编号，用户名 主要组的编号及名称，附属组列表")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("id zhangsan  \n")])])]),v("p",[t._v("显示zhangsan用户所在的所有组")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("groups zhangsan \n")])])]),v("p",[t._v("显示用户详细资料")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("finger zhangsan  \n")])])]),v("h3",{attrs:{id:"_6-附录"}},[t._v("6. 附录")]),t._v(" "),v("h4",{attrs:{id:"_6-1-系统启动"}},[t._v("6.1 系统启动")]),t._v(" "),v("h5",{attrs:{id:"_6-1-1-bios"}},[t._v("6.1.1 BIOS")]),t._v(" "),v("ul",[v("li",[t._v("计算机通电后，第一件事就是读取刷入ROM芯片的开机程序，这个程序叫做(Basic Input/Output System)")])]),t._v(" "),v("h5",{attrs:{id:"_6-1-2-硬件自检"}},[t._v("6.1.2 硬件自检")]),t._v(" "),v("ul",[v("li",[t._v('BIOS程序首先检查，计算机硬件能否满足运行的基本条件，这叫做"硬件自检"（Power-On Self-Test)')]),t._v(" "),v("li",[t._v("如果硬件出现问题，主板会发出不同含义的蜂鸣，启动中止。如果没有问题，屏幕就会显示出CPU、内存、硬盘等信息。")])]),t._v(" "),v("h5",{attrs:{id:"_6-1-3-启动顺序"}},[t._v("6.1.3 启动顺序")]),t._v(" "),v("ul",[v("li",[t._v("硬件自检完成后，BIOS把控制权转交给下一阶段的启动程序。")]),t._v(" "),v("li",[t._v('这时，BIOS需要知道，"下一阶段的启动程序"具体存放在哪一个设备')]),t._v(" "),v("li",[t._v('BIOS需要有一个外部储存设备的排序，排在前面的设备就是优先转交控制权的设备。这种排序叫做"启动顺序"（Boot Sequence）')]),t._v(" "),v("li",[t._v('BIOS按照"启动顺序"，把控制权转交给排在第一位的储存设备。')]),t._v(" "),v("li",[t._v('这时，计算机读取该设备的第一个扇区，也就是读取最前面的512个字节。如果这512个字节的最后两个字节是0x55和0xAA，表明这个设备可以用于启动；如果不是，表明设备不能用于启动，控制权于是被转交给"启动顺序"中的下一个设备。')]),t._v(" "),v("li",[t._v('这最前面的512个字节，就叫做"主引导记录"（Master boot record，缩写为MBR）')])]),t._v(" "),v("h5",{attrs:{id:"_6-1-4-主引导记录的结构"}},[t._v("6.1.4 主引导记录的结构")]),t._v(" "),v("ul",[v("li",[t._v('"主引导记录"只有512个字节，放不了太多东西。它的主要作用是，告诉计算机到硬盘的哪一个位置去找操作系统。\n'),v("ul",[v("li",[t._v("（1） 第1-446字节：是用来记录系统的启动信息的,调用操作系统的机器码")]),t._v(" "),v("li",[t._v("（2） 第447-510字节(64个字节)：分区表（Partition table），分区表的作用，是将硬盘分成若干个区")]),t._v(" "),v("li",[t._v("（3） 第511-512字节：主引导记录签名（0x55和0xAA）")])])])]),t._v(" "),v("h5",{attrs:{id:"_6-1-5-分区表"}},[t._v("6.1.5 分区表")]),t._v(" "),v("ul",[v("li",[t._v("磁盘分区是使用分区编辑器在磁盘上划分几个逻辑部分")]),t._v(" "),v("li",[t._v("磁盘一旦划分成多个分区，不同类的目录与文件可以存储进不同的分区内")]),t._v(" "),v("li",[t._v('"主引导记录"因此必须知道将控制权转交给哪个区')]),t._v(" "),v("li",[t._v('分区表的长度只有64个字节，里面又分成四项，每项16个字节。所以，一个硬盘最多只能分四个一级分区，又叫做"主分区"\n'),v("ul",[v("li",[t._v("（1） 第1个字节：如果为0x80，就表示该主分区是激活分区，控制权要转交给这个分区。四个主分区里面只能有一个是激活的。")]),t._v(" "),v("li",[t._v("（2） 第2-4个字节：主分区第一个扇区的物理位置（柱面、磁头、扇区号等等）。")]),t._v(" "),v("li",[t._v("（3） 第5个字节：主分区类型，比如FAT32、NTFS等。")]),t._v(" "),v("li",[t._v("（4） 第6-8个字节：主分区最后一个扇区的物理位置。")]),t._v(" "),v("li",[t._v("（5） 第9-12字节：该主分区第一个扇区的逻辑地址。")]),t._v(" "),v("li",[t._v("（6） 第13-16字节：主分区的扇区总数。")])])])]),t._v(" "),v("h5",{attrs:{id:"_6-1-6-硬盘启动"}},[t._v("6.1.6 硬盘启动")]),t._v(" "),v("ul",[v("li",[t._v("计算机的控制权就要转交给硬盘的某个分区了")]),t._v(" "),v("li",[t._v('四个主分区里面，只有一个是激活的。计算机会读取激活分区的第一个扇区，叫做"卷引导记录"（Volume boot record，缩写为VBR）')])]),t._v(" "),v("h5",{attrs:{id:"_6-1-7-操作系统"}},[t._v("6.1.7 操作系统")]),t._v(" "),v("ul",[v("li",[t._v("控制权转交给操作系统后，操作系统的内核首先被载入内存。")]),t._v(" "),v("li",[t._v("以Linux系统为例，先载入/boot目录下面的kernel。内核加载成功后，第一个运行的程序是/sbin/init。它根据配置文件（Debian系统是/etc/initab）产生init进程。这是Linux启动后的第一个进程，pid进程编号为1，其他进程都是它的后代")]),t._v(" "),v("li",[t._v("然后，init线程加载系统的各个模块，比如窗口程序和网络程序，直至执行/bin/login程序，跳出登录界面，等待用户输入用户名和密码。")])]),t._v(" "),v("h3",{attrs:{id:"_7-进程管理"}},[t._v("7 进程管理")]),t._v(" "),v("h4",{attrs:{id:"_7-1-进程"}},[t._v("7.1 进程")]),t._v(" "),v("ul",[v("li",[t._v("进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间并且用一定的系统资源")]),t._v(" "),v("li",[t._v("进程就是正在执行的某个程序")])]),t._v(" "),v("h4",{attrs:{id:"_7-2-进程管理简介"}},[t._v("7.2 进程管理简介")]),t._v(" "),v("ul",[v("li",[t._v("判断服务器的状态")]),t._v(" "),v("li",[t._v("查看系统中的所有进程")]),t._v(" "),v("li",[t._v("杀死进程，只有无法关闭才要杀死进程")])]),t._v(" "),v("h4",{attrs:{id:"_7-3-进程的查看命令-ps"}},[t._v("7.3 进程的查看命令(ps)")]),t._v(" "),v("ul",[v("li",[t._v("ps aux 查看系统中所有进程，使用BSD操作系统格式")]),t._v(" "),v("li",[t._v("ps -le 查看系统中所有进程，使用Linux标准格式")]),t._v(" "),v("li",[t._v("TTY是TeleType的一个缩写，原来指的是电传打字机，是通过串行线用打印机键盘通过阅读和发送信息的东西")]),t._v(" "),v("li",[v("code",[t._v("pts(pseudo['su:doʊ]-terminal slave)")]),t._v("是所谓的伪终端或虚拟终端")])]),t._v(" "),v("h5",{attrs:{id:"_7-3-1-选项"}},[t._v("7.3.1 选项")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("-a")]),t._v(" "),v("td",[t._v("显示一个终端的所有进程")])]),t._v(" "),v("tr",[v("td",[t._v("-u")]),t._v(" "),v("td",[t._v("显示进程的归属用户及内存的使用情况")])]),t._v(" "),v("tr",[v("td",[t._v("-x")]),t._v(" "),v("td",[t._v("显示没有控制终端的进程")])]),t._v(" "),v("tr",[v("td",[t._v("-l")]),t._v(" "),v("td",[t._v("长格式显示，显示更详细的信息")])])])]),t._v(" "),v("h5",{attrs:{id:"_7-3-2-结果字段含义"}},[t._v("7.3.2 结果字段含义")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("数据")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("USER")]),t._v(" "),v("td",[t._v("该进程是由哪个用户创建的")])]),t._v(" "),v("tr",[v("td",[t._v("PID")]),t._v(" "),v("td",[t._v("进程的ID号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%CPU")])]),t._v(" "),v("td",[t._v("该进程占用CPU资源的百分比，占用越高说明越消耗系统资源")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("%MEM")])]),t._v(" "),v("td",[t._v("该进程占用物理内存的百分比，占用越高说明越消耗系统资源")])]),t._v(" "),v("tr",[v("td",[t._v("VSZ")]),t._v(" "),v("td",[t._v("该进程占用虚拟内存的百分比，单位是KB")])]),t._v(" "),v("tr",[v("td",[t._v("RSS")]),t._v(" "),v("td",[t._v("该进程占用实际物理内存大小，单位是KB")])]),t._v(" "),v("tr",[v("td",[t._v("TTY")]),t._v(" "),v("td",[t._v("该进程在哪个终端中运行。tty1~tty7表示本地控制终端，tty1~tty6是字符终端，tty7是图形终端。pts/0~255代表虚拟终端，?表示此终端是系统启动的")])]),t._v(" "),v("tr",[v("td",[t._v("STAT")]),t._v(" "),v("td",[t._v("进程状态")])]),t._v(" "),v("tr",[v("td",[t._v("START")]),t._v(" "),v("td",[t._v("该进程的启动时间")])]),t._v(" "),v("tr",[v("td",[t._v("TIME")]),t._v(" "),v("td",[t._v("该进程占用CPU的运算时间,数值越高说明越消耗系统资源")])]),t._v(" "),v("tr",[v("td",[t._v("COMMAND")]),t._v(" "),v("td",[t._v("产生此进程的命令名")])])])]),t._v(" "),v("h5",{attrs:{id:"_7-3-3-进程状态-stat"}},[t._v("7.3.3 进程状态(STAT)")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("R(Runing)")]),t._v(" "),v("td",[t._v("运行")])]),t._v(" "),v("tr",[v("td",[t._v("S(Sleep)")]),t._v(" "),v("td",[t._v("休眠")])]),t._v(" "),v("tr",[v("td",[t._v("T(Terminated)")]),t._v(" "),v("td",[t._v("停止")])]),t._v(" "),v("tr",[v("td",[t._v("S(Son)")]),t._v(" "),v("td",[t._v("包含子进程")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("+")])]),t._v(" "),v("td",[t._v("位于后台")])])])]),t._v(" "),v("h4",{attrs:{id:"_7-4-pstree"}},[t._v("7.4 pstree")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("pstree [选项]")]),t._v(" "),v("ul",[v("li",[t._v("-p 显示进程PID")]),t._v(" "),v("li",[t._v("-u 显示进程的所属用户")])])])]),t._v(" "),v("h4",{attrs:{id:"_7-5-进程的查看-top"}},[t._v("7.5 进程的查看(top)")]),t._v(" "),v("ul",[v("li",[t._v("top")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("top -b -n 1 > top.txt\n")])])]),v("h5",{attrs:{id:"_7-5-1-选项"}},[t._v("7.5.1 选项")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("选项")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("-b")]),t._v(" "),v("td",[t._v("使用批处理模式输出，一般和-n配合使用")])]),t._v(" "),v("tr",[v("td",[t._v("-n")]),t._v(" "),v("td",[t._v("次数，指定top命令执行的次数。一般了-b选项配合使用")])]),t._v(" "),v("tr",[v("td",[t._v("-d")]),t._v(" "),v("td",[t._v("秒数，指定top命令每隔几秒更新。默认是3秒")])])])]),t._v(" "),v("h5",{attrs:{id:"_7-5-2-交互模式的命令"}},[t._v("7.5.2 交互模式的命令")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("选项")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("?或h")]),t._v(" "),v("td",[t._v("显示交互模式的帮助")])]),t._v(" "),v("tr",[v("td",[t._v("P")]),t._v(" "),v("td",[t._v("按CPU使用率排序，默认就是此选项")])]),t._v(" "),v("tr",[v("td",[t._v("M")]),t._v(" "),v("td",[t._v("以内存的使用率排序")])]),t._v(" "),v("tr",[v("td",[t._v("N")]),t._v(" "),v("td",[t._v("以PID排序")])]),t._v(" "),v("tr",[v("td",[t._v("q")]),t._v(" "),v("td",[t._v("退出top")])])])]),t._v(" "),v("h5",{attrs:{id:"_7-5-3-状态栏"}},[t._v("7.5.3 状态栏")]),t._v(" "),v("h6",{attrs:{id:"_7-5-3-1-第一行为任务队列信息"}},[t._v("7.5.3.1 第一行为任务队列信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("内容")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("12:12:12")]),t._v(" "),v("td",[t._v("系统的当前时间")])]),t._v(" "),v("tr",[v("td",[t._v("up 1 day 5:33")]),t._v(" "),v("td",[t._v("系统的运行时间，本机已经运行了1天5小时33分")])]),t._v(" "),v("tr",[v("td",[t._v("2 users")]),t._v(" "),v("td",[t._v("当前登录了二个客户端")])]),t._v(" "),v("tr",[v("td",[t._v("load average 0 0 0")]),t._v(" "),v("td",[t._v("系统在之前1分钟、5分钟、15分钟的平均负载。一般认为小于1小时负载较小，大于1超过负载")])])])]),t._v(" "),v("h6",{attrs:{id:"_7-5-3-2-第二行为进程信息"}},[t._v("7.5.3.2 第二行为进程信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("内容")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Tasks: 100 total")]),t._v(" "),v("td",[t._v("系统中的进程总数")])]),t._v(" "),v("tr",[v("td",[t._v("1 running")]),t._v(" "),v("td",[t._v("正在运行的进程数")])]),t._v(" "),v("tr",[v("td",[t._v("94 sleeping")]),t._v(" "),v("td",[t._v("睡眠的进程")])]),t._v(" "),v("tr",[v("td",[t._v("0 stopped")]),t._v(" "),v("td",[t._v("正在停止的进程")])]),t._v(" "),v("tr",[v("td",[t._v("0 zombie")]),t._v(" "),v("td",[t._v("僵尸进程。如果不是0的话要进行检查")])])])]),t._v(" "),v("h6",{attrs:{id:"_7-5-3-3-第三行为cpu信息"}},[t._v("7.5.3.3 第三行为CPU信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("内容")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Cpu(s): 0.1%us")]),t._v(" "),v("td",[t._v("用户模式占用的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.1%sy")]),t._v(" "),v("td",[t._v("系统模式占用的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.0%ni")]),t._v(" "),v("td",[t._v("改变过优先级的用户进程 占用的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("99.7%id")]),t._v(" "),v("td",[t._v("空闲CPU的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.1%wa")]),t._v(" "),v("td",[t._v("等待输入/输出的进程的占用CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.1%hi")]),t._v(" "),v("td",[t._v("硬中断请求服务占用的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.1%si")]),t._v(" "),v("td",[t._v("软中断请求服务占用的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("0.0%st")]),t._v(" "),v("td",[t._v("st(Steal time)虚拟时间百分比，就是当有")])])])]),t._v(" "),v("h6",{attrs:{id:"_7-5-3-4-第四行为物理内存信息"}},[t._v("7.5.3.4 第四行为物理内存信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("内容")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Mem: 1030720k total")]),t._v(" "),v("td",[t._v("物理内存的问题，单位是KB")])]),t._v(" "),v("tr",[v("td",[t._v("551860k used")]),t._v(" "),v("td",[t._v("已经使用的物理内存数量")])]),t._v(" "),v("tr",[v("td",[t._v("478860k free")]),t._v(" "),v("td",[t._v("空闲的物理内存数量，虚拟机分配了1024M内存，使用了538M,空闲467M")])]),t._v(" "),v("tr",[v("td",[t._v("43180k buffers")]),t._v(" "),v("td",[t._v("作为缓冲的内存数量，可以存放需要写入硬盘的数据，用来加速数据的写入")])])])]),t._v(" "),v("h6",{attrs:{id:"_7-5-3-5-第四行为交换分区信息"}},[t._v("7.5.3.5 第四行为交换分区信息")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("内容")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Swap: 2047992k total")]),t._v(" "),v("td",[t._v("总计的交换分区(虚拟内存)大小")])]),t._v(" "),v("tr",[v("td",[t._v("536k used")]),t._v(" "),v("td",[t._v("已经使用的交换分区大小")])]),t._v(" "),v("tr",[v("td",[t._v("2047456k free")]),t._v(" "),v("td",[t._v("空闲的交换分区大小")])]),t._v(" "),v("tr",[v("td",[t._v("368164k cached")]),t._v(" "),v("td",[t._v("把需要经常读取的数据从硬盘读到内存中，加速了数据的读取")])])])]),t._v(" "),v("h4",{attrs:{id:"_7-6-杀死进程-kill"}},[t._v("7.6 杀死进程(kill)")]),t._v(" "),v("h5",{attrs:{id:"_7-6-1-进程信号"}},[t._v("7.6.1 进程信号")]),t._v(" "),v("ul",[v("li",[t._v("kill -l 查看可用的进程信号\n|信号 |代码\t|信号名称\t|说明\t|示例|\n| -- | -- | -- | -- | -- |\n|1\t|SIGHUP\t|该信号让进程立即关闭，然后重写读取配置文件后重启,平滑重启\t|kill -1 -HUP 进程号|\n|2\t|SIGINT\t|程序终止信号，用于关闭前台进程,相当于ctrl+c\t|\n|9\t|SIGKILL\t|用来立刻结束程序的运行，本信号不能阻塞、处理和忽略，一般用于强制中止\t|\n|15\t|SIGTERM\t|正常结束进程的信号，kill命令的默认信号。如果不能正常中止，才会尝试SIGKILL信号|")])]),t._v(" "),v("h5",{attrs:{id:"_7-6-2-杀死进程"}},[t._v("7.6.2 杀死进程")]),t._v(" "),v("p",[t._v("sleep.sh")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("i")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-le")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n   "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n   "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" 1s\n "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" sleep.sh "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ef")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" sleep.sh\n")])])]),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v("  进程号\n")])])]),v("h3",{attrs:{id:"_8-系统资源查看"}},[t._v("8. 系统资源查看")]),t._v(" "),v("h4",{attrs:{id:"_8-1-vmstat"}},[t._v("8.1 vmstat")]),t._v(" "),v("ul",[v("li",[t._v("监控系统资源使用状态")]),t._v(" "),v("li",[v("code",[t._v("vmstat [刷新延时 刷新次数]")])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("vmstat 1 3\nprocs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 1  0    532 329932  99388 459768    0    0    16    81   59   50  3  1 96  0  0    \n")])])]),v("h5",{attrs:{id:"_8-1-1-procs-进程信息字段"}},[t._v("8.1.1 (procs)进程信息字段")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("procs")]),t._v(" "),v("td",[t._v("r")]),t._v(" "),v("td",[t._v("等待运行的进程数，数量越大，系统就越繁忙")])]),t._v(" "),v("tr",[v("td",[t._v("procs")]),t._v(" "),v("td",[t._v("b")]),t._v(" "),v("td",[t._v("不可被唤醒的进程数量，数量越大，系统越繁忙")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-1-2-memory-内存信息字段"}},[t._v("8.1.2 memory(内存信息字段)")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("memory")]),t._v(" "),v("td",[t._v("swpd")]),t._v(" "),v("td",[t._v("使用的Swap空间的大小，单位KB")])]),t._v(" "),v("tr",[v("td",[t._v("memory")]),t._v(" "),v("td",[t._v("free")]),t._v(" "),v("td",[t._v("空闲的内存容量，单位KB")])]),t._v(" "),v("tr",[v("td",[t._v("memory")]),t._v(" "),v("td",[t._v("buff")]),t._v(" "),v("td",[t._v("缓冲的内存容量，单位KB")])]),t._v(" "),v("tr",[v("td",[t._v("memory")]),t._v(" "),v("td",[t._v("cache")]),t._v(" "),v("td",[t._v("缓存的内存容量，单位KB")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-1-3-swap-交换分区信息"}},[t._v("8.1.3 swap(交换分区信息)")]),t._v(" "),v("ul",[v("li",[t._v("如果说si和so数越大说明数据经常要在磁盘和内存之间数据交换，系统性能就会越差")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("swap")]),t._v(" "),v("td",[t._v("si(in)")]),t._v(" "),v("td",[t._v("从磁盘中交换到内存中的数据的数量，单位KB")])]),t._v(" "),v("tr",[v("td",[t._v("swap")]),t._v(" "),v("td",[t._v("so(out)")]),t._v(" "),v("td",[t._v("从内存中交换到硬盘中的数据的数量，单位KB")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-1-4-io-磁盘读写"}},[t._v("8.1.4 io(磁盘读写)")]),t._v(" "),v("ul",[v("li",[t._v("bi和bo数越大，说明磁盘的I/O越繁忙")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("io")]),t._v(" "),v("td",[t._v("bi(in)")]),t._v(" "),v("td",[t._v("从块设备读入数据的问题，单位是块")])]),t._v(" "),v("tr",[v("td",[t._v("io")]),t._v(" "),v("td",[t._v("bo(out)")]),t._v(" "),v("td",[t._v("写到块设备的数据的总量，单位是块")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-1-5-system-系统信息字段"}},[t._v("8.1.5 system(系统信息字段)")]),t._v(" "),v("ul",[v("li",[t._v("in和cs数越大，说明系统与接口设备的通信越繁忙")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("system")]),t._v(" "),v("td",[t._v("in(interrupt)")]),t._v(" "),v("td",[t._v("每秒被中断的进程次数")])]),t._v(" "),v("tr",[v("td",[t._v("system")]),t._v(" "),v("td",[t._v("cs(switch)")]),t._v(" "),v("td",[t._v("每秒钟进行的事件切换次数")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-1-6-cpu-cpu信息字段"}},[t._v("8.1.6 CPU(CPU信息字段)")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("分类")]),t._v(" "),v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("us(user)")]),t._v(" "),v("td",[t._v("非内核进程消耗CPU运算时间的百分比")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("sy(system)")]),t._v(" "),v("td",[t._v("内核进程消耗CPU运算时间的百分比")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("id(idea)")]),t._v(" "),v("td",[t._v("空闲CPU的百分比")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("wa(wait)")]),t._v(" "),v("td",[t._v("等待I/O所消耗的CPU百分比")])]),t._v(" "),v("tr",[v("td",[t._v("CPU")]),t._v(" "),v("td",[t._v("st(steal)")]),t._v(" "),v("td",[t._v("被虚拟机偷走的CPU百分比")])])])]),t._v(" "),v("h4",{attrs:{id:"_8-3-free"}},[t._v("8.3 free")]),t._v(" "),v("ul",[v("li",[t._v("查看内存使用状态")]),t._v(" "),v("li",[v("code",[t._v("free [-b|-k|-m|-g]")])]),t._v(" "),v("li",[t._v("选项\n"),v("ul",[v("li",[t._v("-b 以字节为单位")]),t._v(" "),v("li",[t._v("-k 以KB字节为单位")]),t._v(" "),v("li",[t._v("-m 以MB字节为单位")]),t._v(" "),v("li",[t._v("-g 以GB字节为单位")])])])]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# free -m")]),t._v("\n             total       used       "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v("     shared    buffers     cached\nMem:          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1006")]),t._v("        "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("687")]),t._v("        "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("319")]),t._v("          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("         "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("98")]),t._v("        "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("449")]),t._v("\n-/+ buffers/cache:        "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("139")]),t._v("        "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("866")]),t._v("\nSwap:         "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1999")]),t._v("          "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1999")]),t._v("\n")])])]),v("h5",{attrs:{id:"_8-3-1-第一行"}},[t._v("8.3.1 第一行")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("total")]),t._v(" "),v("td",[t._v("内存总数")])]),t._v(" "),v("tr",[v("td",[t._v("used")]),t._v(" "),v("td",[t._v("已经使用的内存数")])]),t._v(" "),v("tr",[v("td",[t._v("free")]),t._v(" "),v("td",[t._v("空闲的内存数")])]),t._v(" "),v("tr",[v("td",[t._v("shared")]),t._v(" "),v("td",[t._v("多个进程共享的内存数")])]),t._v(" "),v("tr",[v("td",[t._v("buffers")]),t._v(" "),v("td",[t._v("缓冲区内存数")])]),t._v(" "),v("tr",[v("td",[t._v("cached")]),t._v(" "),v("td",[t._v("缓存内存数")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-3-2-第二行"}},[t._v("8.3.2 第二行")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("算法")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("- buffers/cache")]),t._v(" "),v("td",[t._v("第一行的used-buffers-cached")]),t._v(" "),v("td",[t._v("已经使用的要减去缓存和缓冲的内存量")])]),t._v(" "),v("tr",[v("td",[t._v("+ buffers/cache")]),t._v(" "),v("td",[t._v("第一行的free+buffers+cached")]),t._v(" "),v("td",[t._v("空闲的要加上缓存和缓冲的内存量")])])])]),t._v(" "),v("h5",{attrs:{id:"_8-3-3-第三行"}},[t._v("8.3.3 第三行")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("total")]),t._v(" "),v("td",[t._v("swap总数，默认单位是K")])]),t._v(" "),v("tr",[v("td",[t._v("used")]),t._v(" "),v("td",[t._v("已经使用的swap数，默认单位是K")])]),t._v(" "),v("tr",[v("td",[t._v("free")]),t._v(" "),v("td",[t._v("空闲的swap数，默认单位是K")])])])]),t._v(" "),v("h4",{attrs:{id:"_8-6-查看内核相关信息"}},[t._v("8.6 查看内核相关信息")]),t._v(" "),v("ul",[v("li",[t._v("uname")])]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uname -a")]),t._v("\nLinux localhost "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.6")]),t._v(".32-279.el6.i686 "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1 SMP Fri Jun 22 10:59:55 UTC 2012 i686 i686 i386 GNU/Linux")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uname -s")]),t._v("\nLinux\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uname -r")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.6")]),t._v(".32-279.el6.i686\n")])])]),v("h4",{attrs:{id:"_8-7-查看操作系统位数"}},[t._v("8.7 查看操作系统位数")]),t._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" /bin/ls\n")])])]),v("h4",{attrs:{id:"_8-8-查看发行版本"}},[t._v("8.8 查看发行版本")]),t._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("lsb_release "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n")])])]),v("h4",{attrs:{id:"_8-9-查看发行版本"}},[t._v("8.9 查看发行版本")]),t._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[t._v("yum "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" redhat-lsb "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v("\nlsb_release "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v("\n")])])]),v("h3",{attrs:{id:"_9-系统定时任务"}},[t._v("9. 系统定时任务")]),t._v(" "),v("ul",[v("li",[t._v("有些任务比如备份数据库等操作需要在系统空闲的时候执行")])]),t._v(" "),v("h4",{attrs:{id:"_9-2-crontab"}},[t._v("9.2 crontab")]),t._v(" "),v("ul",[v("li",[t._v("可以循环定时执行定时任务")]),t._v(" "),v("li",[v("a",{attrs:{href:"https://www.bejson.com/othertools/cron/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cron"),v("OutboundLink")],1)])]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[t._v("systemctl restart crond.service\n")])])]),v("h5",{attrs:{id:"_9-2-3-crontab设置"}},[t._v("9.2.3 crontab设置")]),t._v(" "),v("ul",[v("li",[t._v("crontab [选项]")]),t._v(" "),v("li",[t._v("选项\n"),v("ul",[v("li",[t._v("-e 编辑crontab定时任务")]),t._v(" "),v("li",[t._v("-l 查询crontab任务")]),t._v(" "),v("li",[t._v("-r 删除当前用户所有的crontab任务")])])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("* * * * *  执行的任务\n")])])]),v("h6",{attrs:{id:"_9-2-3-1-语法"}},[t._v("9.2.3.1 语法")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .---------------- minute (0 - 59)")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# |  .------------- hour (0 - 23)")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# |  |  .---------- day of month (1 - 31)")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# |  |  |  |  |")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# *  *  *  *  * user-name command to be executed")]),t._v("\n")])])]),v("h6",{attrs:{id:"_9-2-3-2-位置"}},[t._v("9.2.3.2 位置")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("项目")]),t._v(" "),v("th",[t._v("含义")]),t._v(" "),v("th",[t._v("范围")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("第1个星")]),t._v(" "),v("td",[t._v("1个小时中的第几分钟")]),t._v(" "),v("td",[t._v("0~59")])]),t._v(" "),v("tr",[v("td",[t._v("第2个星")]),t._v(" "),v("td",[t._v("1天当中的第几小时")]),t._v(" "),v("td",[t._v("0~23")])]),t._v(" "),v("tr",[v("td",[t._v("第3个星")]),t._v(" "),v("td",[t._v("1月当中的第几天")]),t._v(" "),v("td",[t._v("1~31")])]),t._v(" "),v("tr",[v("td",[t._v("第4个星")]),t._v(" "),v("td",[t._v("1年当中的第几月")]),t._v(" "),v("td",[t._v("1~12")])]),t._v(" "),v("tr",[v("td",[t._v("第5个星")]),t._v(" "),v("td",[t._v("1周当中的星期几")]),t._v(" "),v("td",[t._v("0~6")])])])]),t._v(" "),v("h6",{attrs:{id:"_9-2-3-3-特殊符号"}},[t._v("9.2.3.3 特殊符号")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("符号")]),t._v(" "),v("th",[t._v("含义")]),t._v(" "),v("th",[t._v("例子")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("*")])]),t._v(" "),v("td",[t._v("代表任意时间")]),t._v(" "),v("td",[t._v("比如第一个星就代表一个小时中每分钟都执行一次")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v(",")])]),t._v(" "),v("td",[t._v("代表不连续的时间")]),t._v(" "),v("td",[t._v('比如"1,2,3 ",就代表每小时的1分、2分、3分执行命令')])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("-")])]),t._v(" "),v("td",[t._v("代表连续的时间范围")]),t._v(" "),v("td",[t._v('比如 " 1-5 * ** ",代表每小时的第1分到第5分执行命令')])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("*/n")])]),t._v(" "),v("td",[t._v("代表每隔多久执行一次")]),t._v(" "),v("td",[t._v('比如 "/10 " 就代表每隔10分钟就执行一次命令')])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("0 0 1,10 * 1")])]),t._v(" "),v("td",[t._v("每月1号和10号，每周1的0点0分都会执行")]),t._v(" "),v("td")])])]),t._v(" "),v("h6",{attrs:{id:"_9-2-3-4-案例"}},[t._v("9.2.3.4 案例")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("符号")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("10 22 *")]),t._v(" "),v("td",[t._v("在每天的22点10分执行")])]),t._v(" "),v("tr",[v("td",[t._v("0 15 1")]),t._v(" "),v("td",[t._v("每周1的15点0分执行")])]),t._v(" "),v("tr",[v("td",[t._v("0 5 5,10")]),t._v(" "),v("td",[t._v("每月5号和10号的凌晨5点整执行")])]),t._v(" "),v("tr",[v("td",[t._v("10 5 1-5")]),t._v(" "),v("td",[t._v("每周一到周五的凌晨5点10分执行命令")])]),t._v(" "),v("tr",[v("td",[t._v("/10 10")]),t._v(" "),v("td",[t._v("每天凌晨10点钟，每隔10分钟执行一次")])])])]),t._v(" "),v("h6",{attrs:{id:"_9-2-3-5-注意事项"}},[t._v("9.2.3.5 注意事项")]),t._v(" "),v("ul",[v("li",[t._v("所有选项不能为空，必须填写")]),t._v(" "),v("li",[t._v("crontab最小单位是分钟,最大单位是天")]),t._v(" "),v("li",[t._v("不管写命令还是脚本都要使用绝对路径")])]),t._v(" "),v("h4",{attrs:{id:"_9-3-系统定时任务"}},[t._v("9.3 系统定时任务")]),t._v(" "),v("p",[t._v("crontab -e是用户执行的命令，不同的用户身份可以执行自己的定时任务\n如果需要系统执行定时任务，可以编辑/etc/crontab文件\n/etc/crontab可以指定shell、路径、邮件发送和家目录")]),t._v(" "),v("h5",{attrs:{id:"_9-3-1-etc-crontab"}},[t._v("9.3.1 /etc/crontab")]),t._v(" "),v("ul",[v("li",[t._v("修改/etc/crontab配置文件")])]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" * * * "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /root/date.log\n")])])]),v("h3",{attrs:{id:"_10-实战任务"}},[t._v("10. 实战任务")]),t._v(" "),v("h4",{attrs:{id:"_10-1-监控nginx"}},[t._v("10.1 监控nginx")]),t._v(" "),v("p",[t._v("nginx.sh")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" nginx\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nginx")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token variable"}},[v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ef")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("wc")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$nginx")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-gt")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your nginx is running"')]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    /bin/systemctl start nginx.service\n    "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),v("h4",{attrs:{id:"_10-2-监控mysql状态"}},[t._v("10.2 监控mysql状态")]),t._v(" "),v("p",[t._v("mysql.sh")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/sh")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PortNum")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token variable"}},[v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -lnt"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("wc")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PortNum")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-eq")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysqld is running."')]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysqld is stoped."')]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),v("h4",{attrs:{id:"_10-3-mysql备份脚本"}},[t._v("10.3 mysql备份脚本")]),t._v(" "),v("p",[t._v("mysql_backup.sh")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DATE")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token variable"}},[v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" +%F_%H-%M-%S"),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HOST")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DB")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("test\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[v("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("USER")])]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PASS")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("abcd1"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#EFG")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MAIL")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxx@qq.com"')]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BACKUP_DIR")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/data/db_backup\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BACKUP_DIR")]),t._v('"')]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BACKUP_DIR")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SQL_FILE")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${DB}")]),t._v("_FULL_"),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATE")]),t._v(".sql\n"),v("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BAK_FILE")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${DB}")]),t._v("_FULL_"),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATE")]),t._v(".zip\n"),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BACKUP_DIR")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" mysqldump -h"),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HOST")]),t._v(" -u"),v("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v(" -p"),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PASS")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-B")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DB")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SQL_FILE")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("zip")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BAK_FILE")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SQL_FILE")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SQL_FILE")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BAK_FILE")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATE")]),t._v(' 备份失败"')]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" mail "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"备份失败"')]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAIL")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$DATE")]),t._v(' 备份失败"')]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" mail "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"备份失败"')]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAIL")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BACKUP_DIR")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-name")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.zip'")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ctime")]),t._v(" +14 "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-exec")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),v("h4",{attrs:{id:"登陆授权"}},[t._v("登陆授权")]),t._v(" "),v("p",[t._v("授权后下次登陆不用输密码")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("ssh-copy-id 47.104.220.xx\n")])])]),v("p",[t._v("如果没有生成 "),v("code",[t._v("/root/.ssh/id_rsa")]),t._v("可以通过下面命令生成密钥")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("ssh-keygen -t rsa\n")])])]),v("h4",{attrs:{id:"关闭防火墙"}},[t._v("关闭防火墙")]),t._v(" "),v("h5",{attrs:{id:"关闭-iptables"}},[t._v("关闭 iptables")]),t._v(" "),v("p",[t._v("iptables命令是Linux上常用的防火墙软件")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("功能")]),t._v(" "),v("th",[t._v("命令")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("停止防火墙")]),t._v(" "),v("td",[t._v("systemctl stop firewalld.service")])]),t._v(" "),v("tr",[v("td",[t._v("永久关闭防火墙")]),t._v(" "),v("td",[t._v("systemctl disable firewalld.service")])])])]),t._v(" "),v("h5",{attrs:{id:"确认停用-selinux"}},[t._v("确认停用 selinux")]),t._v(" "),v("p",[t._v("安全增强型 Linux（Security-Enhanced Linux）简称 SELinux，它是一个 Linux 内核模块，也是 Linux 的一个安全子系统。\nSELinux 主要作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("功能")]),t._v(" "),v("th",[t._v("命令")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("检查状态")]),t._v(" "),v("td",[v("code",[t._v("getenforce")])])]),t._v(" "),v("tr",[v("td",[t._v("检查状态")]),t._v(" "),v("td",[v("code",[t._v("/usr/sbin/sestatus -v")])])]),t._v(" "),v("tr",[v("td",[t._v("临时关闭")]),t._v(" "),v("td",[v("code",[t._v("setenforce 0")])])]),t._v(" "),v("tr",[v("td",[t._v("永久关闭")]),t._v(" "),v("td",[v("code",[t._v("/etc/selinux/config SELINUX=enforcing改为SELINUX=disabled")])])])])]),t._v(" "),v("h5",{attrs:{id:"安装依赖模块"}},[t._v("安装依赖模块")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("yum  -y install gcc gcc-c++ autoconf pcre pcre-devel make automake\nyum  -y install wget httpd-tools vim\n")])])])])}),[],!1,null,null,null);v.default=s.exports}}]);