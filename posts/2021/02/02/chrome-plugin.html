<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chromeæ’ä»¶ | é©¬æ˜å¨Ÿ</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This is my blog">
    
    <link rel="preload" href="/assets/css/0.styles.711d61d2.css" as="style"><link rel="preload" href="/assets/js/app~d0ae3f07.711d61d2.js" as="script"><link rel="preload" href="/assets/css/styles.2a2e3cfe.css" as="style"><link rel="preload" href="/assets/js/app~db300d2f.2a2e3cfe.js" as="script"><link rel="preload" href="/assets/css/9.styles.712f52cc.css" as="style"><link rel="preload" href="/assets/js/9.712f52cc.js" as="script"><link rel="preload" href="/assets/js/120.897f2181.js" as="script"><link rel="prefetch" href="/assets/css/10.styles.df6adbd6.css"><link rel="prefetch" href="/assets/css/2.styles.d0fad4ec.css"><link rel="prefetch" href="/assets/css/3.styles.2489d1b2.css"><link rel="prefetch" href="/assets/css/4.styles.84d5f650.css"><link rel="prefetch" href="/assets/css/5.styles.f8c7c5ef.css"><link rel="prefetch" href="/assets/css/6.styles.352fac64.css"><link rel="prefetch" href="/assets/css/7.styles.867e09b5.css"><link rel="prefetch" href="/assets/css/8.styles.ae1b02b5.css"><link rel="prefetch" href="/assets/js/10.df6adbd6.js"><link rel="prefetch" href="/assets/js/100.90225e05.js"><link rel="prefetch" href="/assets/js/101.70b59f35.js"><link rel="prefetch" href="/assets/js/102.f7d3dc56.js"><link rel="prefetch" href="/assets/js/103.b85d8f0d.js"><link rel="prefetch" href="/assets/js/104.1b23dab1.js"><link rel="prefetch" href="/assets/js/105.f7ced59f.js"><link rel="prefetch" href="/assets/js/106.31183072.js"><link rel="prefetch" href="/assets/js/107.e6aa12a0.js"><link rel="prefetch" href="/assets/js/108.f063ed73.js"><link rel="prefetch" href="/assets/js/109.20e358c5.js"><link rel="prefetch" href="/assets/js/11.372a2578.js"><link rel="prefetch" href="/assets/js/110.51bdc3ed.js"><link rel="prefetch" href="/assets/js/111.41389b6d.js"><link rel="prefetch" href="/assets/js/112.0e517ab3.js"><link rel="prefetch" href="/assets/js/113.b943b71e.js"><link rel="prefetch" href="/assets/js/114.bfa5086b.js"><link rel="prefetch" href="/assets/js/115.abc024a7.js"><link rel="prefetch" href="/assets/js/116.138aba7a.js"><link rel="prefetch" href="/assets/js/117.65ab5373.js"><link rel="prefetch" href="/assets/js/118.c81db69c.js"><link rel="prefetch" href="/assets/js/119.97c4b4b8.js"><link rel="prefetch" href="/assets/js/12.1f23d526.js"><link rel="prefetch" href="/assets/js/121.560c69e3.js"><link rel="prefetch" href="/assets/js/122.0590295a.js"><link rel="prefetch" href="/assets/js/123.6554fac5.js"><link rel="prefetch" href="/assets/js/124.1973dfd8.js"><link rel="prefetch" href="/assets/js/125.529f8cc1.js"><link rel="prefetch" href="/assets/js/126.8f9f9dda.js"><link rel="prefetch" href="/assets/js/127.f800f3f9.js"><link rel="prefetch" href="/assets/js/128.7fadd372.js"><link rel="prefetch" href="/assets/js/129.4d70fc27.js"><link rel="prefetch" href="/assets/js/13.2fb58aa0.js"><link rel="prefetch" href="/assets/js/130.cc4109dc.js"><link rel="prefetch" href="/assets/js/131.b1a85d30.js"><link rel="prefetch" href="/assets/js/132.4b97f955.js"><link rel="prefetch" href="/assets/js/14.a0c0f222.js"><link rel="prefetch" href="/assets/js/15.d0e5b621.js"><link rel="prefetch" href="/assets/js/16.dedfce85.js"><link rel="prefetch" href="/assets/js/17.8893aabe.js"><link rel="prefetch" href="/assets/js/18.13d2fb6b.js"><link rel="prefetch" href="/assets/js/19.b8521502.js"><link rel="prefetch" href="/assets/js/2.d0fad4ec.js"><link rel="prefetch" href="/assets/js/20.35e9e5ed.js"><link rel="prefetch" href="/assets/js/21.a757eeda.js"><link rel="prefetch" href="/assets/js/22.76d13959.js"><link rel="prefetch" href="/assets/js/23.b4e1507f.js"><link rel="prefetch" href="/assets/js/24.6f97a785.js"><link rel="prefetch" href="/assets/js/25.03d47021.js"><link rel="prefetch" href="/assets/js/26.6d101fe7.js"><link rel="prefetch" href="/assets/js/27.12d03d47.js"><link rel="prefetch" href="/assets/js/28.10f0c26b.js"><link rel="prefetch" href="/assets/js/29.79b73f97.js"><link rel="prefetch" href="/assets/js/3.2489d1b2.js"><link rel="prefetch" href="/assets/js/30.d83922e1.js"><link rel="prefetch" href="/assets/js/31.82272a86.js"><link rel="prefetch" href="/assets/js/32.94df637d.js"><link rel="prefetch" href="/assets/js/33.6adada74.js"><link rel="prefetch" href="/assets/js/34.89abb8ab.js"><link rel="prefetch" href="/assets/js/35.3945a9e6.js"><link rel="prefetch" href="/assets/js/36.ade7ece7.js"><link rel="prefetch" href="/assets/js/37.4f1d0ac3.js"><link rel="prefetch" href="/assets/js/38.ad7b188c.js"><link rel="prefetch" href="/assets/js/39.cf5351ae.js"><link rel="prefetch" href="/assets/js/4.84d5f650.js"><link rel="prefetch" href="/assets/js/40.08305d83.js"><link rel="prefetch" href="/assets/js/41.16bb1c67.js"><link rel="prefetch" href="/assets/js/42.58b08fd8.js"><link rel="prefetch" href="/assets/js/43.84b83ec8.js"><link rel="prefetch" href="/assets/js/44.9f03dd17.js"><link rel="prefetch" href="/assets/js/45.867fcf77.js"><link rel="prefetch" href="/assets/js/46.c5720267.js"><link rel="prefetch" href="/assets/js/47.b6a710e6.js"><link rel="prefetch" href="/assets/js/48.7f646c27.js"><link rel="prefetch" href="/assets/js/49.6f85ac62.js"><link rel="prefetch" href="/assets/js/5.f8c7c5ef.js"><link rel="prefetch" href="/assets/js/50.f96aa0dd.js"><link rel="prefetch" href="/assets/js/51.897b6a32.js"><link rel="prefetch" href="/assets/js/52.42618bea.js"><link rel="prefetch" href="/assets/js/53.6b8ecca9.js"><link rel="prefetch" href="/assets/js/54.0436a2d3.js"><link rel="prefetch" href="/assets/js/55.e30a869c.js"><link rel="prefetch" href="/assets/js/56.457d6970.js"><link rel="prefetch" href="/assets/js/57.df8b80d0.js"><link rel="prefetch" href="/assets/js/58.07b92037.js"><link rel="prefetch" href="/assets/js/59.e7e651a8.js"><link rel="prefetch" href="/assets/js/6.352fac64.js"><link rel="prefetch" href="/assets/js/60.a1d56433.js"><link rel="prefetch" href="/assets/js/61.aec50a99.js"><link rel="prefetch" href="/assets/js/62.b6863d82.js"><link rel="prefetch" href="/assets/js/63.5d5e88d4.js"><link rel="prefetch" href="/assets/js/64.0a352fba.js"><link rel="prefetch" href="/assets/js/65.0994be13.js"><link rel="prefetch" href="/assets/js/66.77e2b366.js"><link rel="prefetch" href="/assets/js/67.2ab5a21b.js"><link rel="prefetch" href="/assets/js/68.ae3cc098.js"><link rel="prefetch" href="/assets/js/69.c1310250.js"><link rel="prefetch" href="/assets/js/7.867e09b5.js"><link rel="prefetch" href="/assets/js/70.2a660850.js"><link rel="prefetch" href="/assets/js/71.e9c81cae.js"><link rel="prefetch" href="/assets/js/72.4bccd2d9.js"><link rel="prefetch" href="/assets/js/73.750e9ff1.js"><link rel="prefetch" href="/assets/js/74.8ea7283e.js"><link rel="prefetch" href="/assets/js/75.8b21a9c0.js"><link rel="prefetch" href="/assets/js/76.5082a218.js"><link rel="prefetch" href="/assets/js/77.ed84d888.js"><link rel="prefetch" href="/assets/js/78.4c7b8693.js"><link rel="prefetch" href="/assets/js/79.d78b6ffb.js"><link rel="prefetch" href="/assets/js/8.ae1b02b5.js"><link rel="prefetch" href="/assets/js/80.77cab851.js"><link rel="prefetch" href="/assets/js/81.7e60d99d.js"><link rel="prefetch" href="/assets/js/82.ffe31c8c.js"><link rel="prefetch" href="/assets/js/83.e9c891ca.js"><link rel="prefetch" href="/assets/js/84.9a73f6ce.js"><link rel="prefetch" href="/assets/js/85.0f30237a.js"><link rel="prefetch" href="/assets/js/86.52aaf70f.js"><link rel="prefetch" href="/assets/js/87.492d1c5e.js"><link rel="prefetch" href="/assets/js/88.e46d9ad6.js"><link rel="prefetch" href="/assets/js/89.69081a45.js"><link rel="prefetch" href="/assets/js/90.12f8606f.js"><link rel="prefetch" href="/assets/js/91.6b7dee62.js"><link rel="prefetch" href="/assets/js/92.ca36a5fc.js"><link rel="prefetch" href="/assets/js/93.39d5f03c.js"><link rel="prefetch" href="/assets/js/94.f4dc64e6.js"><link rel="prefetch" href="/assets/js/95.d1d4f569.js"><link rel="prefetch" href="/assets/js/96.72a5742d.js"><link rel="prefetch" href="/assets/js/97.7faf837d.js"><link rel="prefetch" href="/assets/js/98.5981dbc6.js"><link rel="prefetch" href="/assets/js/99.6bb97f1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.711d61d2.css"><link rel="stylesheet" href="/assets/css/styles.2a2e3cfe.css"><link rel="stylesheet" href="/assets/css/9.styles.712f52cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-glitzma"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/assets/img/header-image-05.jpg);" data-v-e4a0ebe0><div data-v-6654f004 data-v-e4a0ebe0><nav class="navbar" data-v-6654f004><div class="container" data-v-6654f004><a href="/" class="router-link-active" data-v-6654f004><span class="navbar-site-name" data-v-6654f004>
          é©¬æ˜å¨Ÿ
        </span></a> <div class="navbar-toggler" data-v-6654f004><svg class="icon" style="font-size:1.2em;" data-v-6654f004 data-v-6654f004><title data-v-6654f004 data-v-6654f004>menu</title><use xlink:href="#icon-menu" data-v-6654f004 data-v-6654f004></use></svg></div> <div class="navbar-links" data-v-6654f004><a href="/" class="navbar-link" data-v-6654f004>
            æ¬¢è¿é¡µ
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-6654f004>
            å¸–å­
          </a><a href="/custom-pages/" class="navbar-link" data-v-6654f004>
            å…³äº
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-6654f004></div></div> <div class="banner" data-v-e2d7da12 data-v-e4a0ebe0 data-v-e4a0ebe0><div class="container" data-v-e2d7da12><div class="center" data-v-e2d7da12></div></div></div></header> <div class="container clearfix show-aside" data-v-0874e876 data-v-0874e876><main class="main" data-v-0874e876><div class="post" data-v-0874e876 data-v-0874e876><section class="post-meta main-div" data-v-7f7ca342><section class="post-date clearfix" data-v-7f7ca342><span class="create-date" data-v-7f7ca342>
      å‘å¸ƒæ—¶é—´ : 2021-02-02
    </span> <span class="update-date" data-v-7f7ca342>
      æœ€åä¿®æ”¹ : 2021-11-15
    </span></section> <section class="post-links" data-v-7f7ca342><a href="/posts/2020/10/13/seek.html" class="post-link" data-v-7f7ca342>
      ä¸Šä¸€ç¯‡ : æŸ¥æ‰¾
    </a> <a href="/posts/2021/02/26/react-basics.html" class="post-link" data-v-7f7ca342>
      ä¸‹ä¸€ç¯‡ : reactåŸºç¡€çŸ¥è¯†
    </a></section></section> <article class="main-div"><div class="post-content content__default"><p><a href="https://juejin.cn/post/6939872514927493156" target="_blank" rel="noopener noreferrer">è¿™æ˜¯åˆ«äººå¼€å‘chromeæ’ä»¶çš„è¿‡ç¨‹,åŸæ–‡ç« åœ°å€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6922815205575491597#heading-9" target="_blank" rel="noopener noreferrer">5åˆ†é’Ÿä¸Šæ‰‹å¼€å‘æµè§ˆå™¨æ’ä»¶â€”â€”æ²¹çŒ´è„šæ‰‹æ¶wokoo(ä½¿ç”¨ç¯‡)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://zhuanlan.zhihu.com/p/99390731" target="_blank" rel="noopener noreferrer">çŸ¥ä¹æ‰¾åˆ°çš„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="è¯´æ˜">è¯´æ˜</h2> <p>å¦‚æœç›´æ¥å¼€å‘æ²¹çŒ´æ’ä»¶ï¼Œå¼€å‘è€…éœ€è¦è´¹æ—¶æ­å»ºvueæˆ–reactåŸºç¡€é¡¹ç›®ï¼Œè¿˜éœ€è¦å¯¹æ²¹çŒ´è„šæœ¬åŒºåŸŸåšå¯¹åº”çš„é…ç½®ï¼Œå¼€å‘ä½“éªŒå·®ã€‚</p> <p>wokooå¯ä»¥ä¸€é”®å¼ç”ŸæˆåŸºç¡€é¡¹ç›®ï¼Œå¹¶ä¸”æä¾›åŸºç¡€Tampermonkeyé…ç½®ã€‚</p> <p>ä¸»è¦æä¾›çš„åŠŸèƒ½æœ‰ï¼š</p> <ul><li>å‘½ä»¤è¡Œå¼åˆ›å»ºè„šæ‰‹æ¶åˆå§‹é¡¹ç›®</li> <li>æ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼Œç”Ÿæˆvueã€reactçš„åŸºæœ¬é¡¹ç›®</li> <li>tampermonkey.js æ–‡ä»¶ä¸­æä¾›Tampermonkeyé…ç½®</li></ul> <p>å…³äºæ²¹çŒ´æ’ä»¶å’Œwokooçš„å…·ä½“ä½¿ç”¨å¯ä»¥é˜…è¯» <a href="https://juejin.cn/post/6922815205575491597" target="_blank" rel="noopener noreferrer">5åˆ†é’Ÿä¸Šæ‰‹å¼€å‘æµè§ˆå™¨æ’ä»¶â€”â€”æ²¹çŒ´è„šæ‰‹æ¶wokoo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>è¿™é‡Œæ˜¯wokooè„šæ‰‹æ¶ä»£ç ï¼š<a href="https://github.com/kinyaying/wokoo" target="_blank" rel="noopener noreferrer">wokooè„šæ‰‹æ¶githubä»“åº“<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨wokooå¼€å‘<a href="https://greasyfork.org/zh-CN/scripts/421189-movesearch" target="_blank" rel="noopener noreferrer">MoveSearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ˆåˆ’è¯æœç´¢æ’ä»¶ï¼‰</p> <p>wokooè„šæ‰‹æ¶çš„è®¾è®¡å‚è€ƒäº†<a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener noreferrer">create-react-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæˆ‘ä¹Ÿæ›¾ç»å†™è¿‡ä¸€ç¯‡åˆ†æcraæºç çš„æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥é˜…è¯»è¿™ç¯‡ğŸ‘‰<a href="https://juejin.cn/post/6916531902773985294" target="_blank" rel="noopener noreferrer">create-react-appæ ¸å¿ƒæºç è§£è¯»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h2 id="æ‰‹æŠŠæ‰‹æ•™æ­å»ºè¿‡ç¨‹">æ‰‹æŠŠæ‰‹æ•™æ­å»ºè¿‡ç¨‹</h2> <ul><li>lerna: è¿›è¡Œé¡¹ç›®ç®¡ç†</li> <li>wokoo-scripts: å’Œç”¨æˆ·äº¤äº’ï¼Œæ‹‰å– wokoo-templateï¼Œç”Ÿæˆå¯¹åº”çš„åˆå§‹é¡¹ç›®</li> <li>wokoo-template: æä¾›æ¨¡æ¿æ¥åˆå§‹åŒ–ä¸€ä¸ªæœ‰åŸºç¡€é…ç½®çš„æ²¹çŒ´é¡¹ç›®ã€‚æ¨¡æ¿æœ‰ä¸¤ç§ï¼šreact å’Œ vue</li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf77f0701b274c7483a0d6aaba207640~tplv-k3u1fbpfcp-watermark.image?imageslim" alt="img"></p> <ol><li>å®‰è£…lerna</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i lerna -g
</code></pre></div><ol start="2"><li>åˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œåˆå§‹åŒ–</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> wokoo
<span class="token builtin class-name">cd</span> wokoo
lerna init
</code></pre></div><ol start="3"><li>å¼€å¯workspaceï¼Œåœ¨package.jsonä¸­å¢åŠ <code>workspaces</code>é…ç½®</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&quot;workspaces&quot;: [
	&quot;packages/*&quot;
],
</code></pre></div><ol start="4"><li>åˆ›å»ºå­é¡¹ç›®</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>lerna create wokoo-scripts
lerna create wokoo-template
</code></pre></div><h2 id="wokoo-scriptsç¼–å†™">wokoo-scriptsç¼–å†™</h2> <p>wokoo-scriptsçš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š</p> <ul><li>commander è·å–shellä¸­ç”¨æˆ·é”®å…¥çš„projectName</li> <li>fs.writeFileåˆ›å»ºæ–‡ä»¶è·¯å¾„</li> <li>å®‰è£…wokoo-templateæ¨¡æ¿</li> <li>è¯»å–æ¨¡æ¿æŒ‡å®šåç¼€æ–‡ä»¶.md, .jsï¼Œå°†ejsè¯­æ³•è¿›è¡Œæ›¿æ¢</li> <li>åˆ é™¤å¤šä½™å†…å®¹</li> <li>å¸è½½æ¨¡æ¿</li></ul> <p><strong>1.åˆ›å»ºå…¥å£</strong></p> <p>è¿›å…¥<code>packages/wokoo-scripts</code>ï¼Œåˆ›å»º<code>bin/www</code>æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token hashbang comment">#! /usr/bin/env node</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../index.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¿®æ”¹package.jsonï¼Œå¢åŠ <code>bin</code>å­—æ®µé…ç½®</p> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;wokoo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/www&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>åœ¨wokoo-scriptsä¸‹åˆ›å»ºindex.jsæ–‡ä»¶ä½œä¸ºé¡¹ç›®å…¥å£ã€‚</p> <p><strong>2.å®‰è£…ä¾èµ–æ¨¡å—</strong></p> <p>ä»‹ç»ä¸‹ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼š</p> <ul><li><p><a href="https://www.npmjs.com/package/chalk" target="_blank" rel="noopener noreferrer">chalk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç²‰ç¬”ï¼Œä¸°å¯Œæ§åˆ¶å°æ˜¾ç¤ºçš„å­—é¢œè‰²</p></li> <li><p><a href="https://www.npmjs.com/package/cross-spawn" target="_blank" rel="noopener noreferrer">cross-spawn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¼€å¯å­çº¿ç¨‹</p></li> <li><p><a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener noreferrer">commander<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è§£æå‘½ä»¤è¡Œä¸­çš„å‘½ä»¤</p></li> <li><p><a href="https://www.npmjs.com/package/fs-extra" target="_blank" rel="noopener noreferrer">fs-extra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  æ“ä½œæ–‡ä»¶</p></li> <li><p><a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="noopener noreferrer">inquirer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œæœ‰ä»–å°±å¯ä»¥å®ç°å‘½ä»¤è¡Œçš„é€‰æ‹©åŠŸèƒ½</p></li> <li><p><a href="https://www.npmjs.com/package/metalsmith" target="_blank" rel="noopener noreferrer">metalsmith<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  è¯»å–æ‰€æœ‰æ–‡ä»¶,å®ç°æ¨¡æ¿æ¸²æŸ“</p></li> <li><p><a href="https://www.npmjs.com/package/consolidate" target="_blank" rel="noopener noreferrer">consolidate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç»Ÿä¸€æ¨¡æ¿å¼•æ“</p></li></ul> <p>å®‰è£…ä¾èµ–ï¼Œæ·»åŠ è½¯é“¾</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> chalk cross-spawn commander fs-extra inquirer metalsmith consolidate ejs  -S
<span class="token function">npm</span> <span class="token function">link</span>
</code></pre></div><p><strong>3.å®ç°initæ–¹æ³•ï¼Œè¯»å–å‘½ä»¤è¡ŒæŒ‡ä»¤</strong></p> <p>ä¸»è¦ä½¿ç”¨<a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener noreferrer">commander<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥è¯»å–å‘½ä»¤è¡Œä¸­ç”¨æˆ·è¾“å…¥çš„é¡¹ç›®åï¼Œæ­¤æ—¶åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ<code>wokoo my-app</code>ï¼Œèƒ½å¤Ÿåœ¨ä»£ç ä¸­è·å–åˆ°é¡¹ç›®åmy-app</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> spawn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cross-spawn'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Command <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> packageJson <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> program <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Command</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ç¨‹åºå…¥å£ï¼Œè¯»å–å‘½ä»¤è¡Œè„šæœ¬ï¼Œè·å¾—é¡¹ç›®åç§°</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> projectName
  program
    <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>packageJson<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">arguments</span><span class="token punctuation">(</span><span class="token string">'&lt;project-directory&gt;'</span><span class="token punctuation">)</span> <span class="token comment">// é¡¹ç›®ç›®å½•å å‚æ•°æ ¼å¼ï¼š&lt;å¿…é€‰&gt; [å¯é€‰]</span>
    <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;project-directory&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      projectName <span class="token operator">=</span> name
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'projectName:'</span><span class="token punctuation">,</span> projectName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token comment">// [nodeè·¯å¾„ï¼Œè„šæœ¬è·¯å¾„ï¼Œå‚æ•°]</span>
		<span class="token keyword">await</span> <span class="token function">createApp</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>4.createAppæ–¹æ³•ï¼Œæ ¹æ®é¡¹ç›®åç”Ÿæˆé¡¹ç›®</strong></p> <p>åœ¨runæ–¹æ³•ä¸­è°ƒcreateAppæ–¹æ³•ï¼Œä¼ å…¥projectNameã€‚createAppä¸»è¦å®ç°äº†åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå†™å…¥package.jsonçš„åŠŸèƒ½ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token parameter">appName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> root <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>appName<span class="token punctuation">)</span> <span class="token comment">// è¦ç”Ÿæˆçš„é¡¹ç›®çš„ç»å¯¹è·¯å¾„</span>
  fs<span class="token punctuation">.</span><span class="token function">ensureDirSync</span><span class="token punctuation">(</span>appName<span class="token punctuation">)</span> <span class="token comment">// æ²¡æœ‰åˆ™åˆ›å»ºæ–‡ä»¶å¤¹</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">create a new app in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// åˆå§‹åŒ–package.json</span>
  <span class="token keyword">const</span> packageJson <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> appName<span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">'0.0.1'</span><span class="token punctuation">,</span>
    <span class="token keyword">private</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    scripts<span class="token operator">:</span> <span class="token punctuation">{</span>
      start<span class="token operator">:</span> <span class="token string">'cross-env NODE_ENV=development webpack serve'</span><span class="token punctuation">,</span>
      build<span class="token operator">:</span> <span class="token string">'webpack'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å†™å…¥package.json</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token string">'package.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>packageJson<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token comment">// æ”¹å˜å·¥ä½œç›®å½•ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•</span>
  process<span class="token punctuation">.</span><span class="token function">chdir</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">run</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> appName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>5. runï¼šå¤åˆ¶é¡¹ç›®æ¨¡æ¿åˆ°å½“å‰é¡¹ç›®ä¸‹ï¼Œç”ŸæˆåŸºç¡€é¡¹ç›®</strong></p> <p>createAppæœ€åè¦è°ƒç”¨runæ–¹æ³•ã€‚runä¸»è¦åšäº†ä»¥ä¸‹å‡ ç‚¹ğŸ‘‡ï¼š</p> <ol><li>å®‰è£…wokoo-template</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> templateName <span class="token operator">=</span> <span class="token string">'wokoo-template'</span> <span class="token comment">// å¯¹åº”çš„wokooæ¨¡æ¿</span>
<span class="token keyword">const</span> allDependencies <span class="token operator">=</span> <span class="token punctuation">[</span>templateName<span class="token punctuation">]</span>
<span class="token comment">// å®‰è£…wokoo-templateåŒ…</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Installing packages. This might take a couple of minutes'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Installing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span>templateName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">doAction</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> allDependencies<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Installing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span>templateName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> failed ...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¨¡æ¿ç±»å‹å¤åˆ¶ç›¸åº”æ¨¡æ¿æ–‡ä»¶åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹tempï¼Œæ›¿æ¢å…¶ä¸­çš„ejsæ¨¡æ¿ï¼Œç„¶ååˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹temp</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é€‰æ‹©æ¨¡æ¿</span>
  <span class="token keyword">const</span> repos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'react'</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> targetTemplate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'targetTemplate'</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
    message<span class="token operator">:</span> <span class="token string">'which template do you prefer?'</span><span class="token punctuation">,</span>
    choices<span class="token operator">:</span> repos<span class="token punctuation">,</span> <span class="token comment">// é€‰æ‹©æ¨¡å¼</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> templatePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>
    require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>templateName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> paths<span class="token operator">:</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  <span class="token comment">// å¤åˆ¶æ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•</span>
  <span class="token keyword">const</span> scriptsConfigDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">,</span> <span class="token string">'webpack.config.js'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> gitIgnoreDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">,</span> <span class="token string">'.npmignore'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> publicDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> tempDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token string">'temp'</span><span class="token punctuation">)</span> <span class="token comment">// ä¸´æ—¶æ¨¡æ¿è·¯å¾„</span>
  <span class="token keyword">const</span> templateDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>targetTemplate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-template</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// ä»wokoo-templateä¸­æ‹·è´æ¨¡æ¿åˆ°é¡¹ç›®ç›®å½•</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å°†templateDirå†…æ¨¡æ¿æ‹·è´åˆ°tempæ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶ä¸­çš„ejsé…ç½®é¡¹</span>
    <span class="token keyword">await</span> <span class="token function">modifyTemplate</span><span class="token punctuation">(</span>templateDir<span class="token punctuation">,</span> <span class="token string">'temp'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      projectName<span class="token operator">:</span> appName<span class="token punctuation">,</span>
      basicProject<span class="token operator">:</span> targetTemplate<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    fs<span class="token punctuation">.</span><span class="token function">copySync</span><span class="token punctuation">(</span>tempDir<span class="token punctuation">,</span> root<span class="token punctuation">)</span> <span class="token comment">// æº ç›®æ ‡</span>
    fs<span class="token punctuation">.</span><span class="token function">copySync</span><span class="token punctuation">(</span>publicDir<span class="token punctuation">,</span> root <span class="token operator">+</span> <span class="token string">'/public'</span><span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span>scriptsConfigDir<span class="token punctuation">,</span> root <span class="token operator">+</span> <span class="token string">'/webpack.config.js'</span><span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span>gitIgnoreDir<span class="token punctuation">,</span> root <span class="token operator">+</span> <span class="token string">'/.gitignore'</span><span class="token punctuation">)</span>
    <span class="token function">deleteFolder</span><span class="token punctuation">(</span>tempDir<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not locate supplied template: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span>templatePath<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>æ­¤å¤„ï¼Œæˆ‘å°†å¤åˆ¶çš„åŠŸèƒ½å°è£…åˆ°modifyTemplate.jsä¸­ã€‚åˆ©ç”¨MetalSmithæä¾›çš„æ–¹æ³•éå†æºè·¯å¾„ä¸‹æ–‡ä»¶ï¼Œåˆ©ç”¨consolidate.ejså°†æ–‡ä»¶ä¸­çš„ejsè¯­æ³•æ›¿æ¢åï¼Œå°†å†…å®¹å†™å…¥æ–°çš„ä¸´æ—¶æ–‡ä»¶å¤¹tempä¸­ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MetalSmith <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'metalsmith'</span><span class="token punctuation">)</span> <span class="token comment">// éå†æ–‡ä»¶å¤¹</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'consolidate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ejs
<span class="token keyword">const</span> <span class="token punctuation">{</span> promisify <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
render <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span> <span class="token comment">// åŒ…è£…æ¸²æŸ“æ–¹æ³•</span>

<span class="token comment">/**
 *
 * @param {*} fromPath æºè·¯å¾„
 * @param {*} toPath ç›®æ ‡è·¯å¾„
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleTemplate</span><span class="token punctuation">(</span><span class="token parameter">fromPath<span class="token punctuation">,</span> toPath<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resovle<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">MetalSmith</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>fromPath<span class="token punctuation">)</span> <span class="token comment">// éå†ä¸‹è½½çš„ç›®å½•</span>
      <span class="token punctuation">.</span><span class="token function">destination</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºæ¸²æŸ“åçš„ç»“æœ</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> metal<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// result æ›¿æ¢æ¨¡æ¿å†…æ•°æ®</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>
          license<span class="token operator">:</span> <span class="token string">'MIT'</span><span class="token punctuation">,</span>
          version<span class="token operator">:</span> <span class="token string">'0.0.1'</span><span class="token punctuation">,</span>
          <span class="token operator">...</span>config<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> metal<span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token comment">// å°†è¯¢é—®çš„ç»“æœæ”¾åˆ°metadataä¸­ä¿è¯åœ¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ä¸­å¯ä»¥è·å–åˆ°</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> metal<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> content <span class="token operator">=</span> files<span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è·å–æ–‡ä»¶ä¸­çš„å†…å®¹</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>
            file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.json'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.txt'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.md'</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¦‚æœæ˜¯mdæˆ–è€…txtæ‰æœ‰å¯èƒ½æ˜¯æ¨¡æ¿</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'&lt;%'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// æ–‡ä»¶ä¸­ç”¨&lt;% æˆ‘æ‰éœ€è¦ç¼–è¯‘</span>
              content <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">render</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> metal<span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨æ•°æ®æ¸²æŸ“æ¨¡æ¿</span>
              files<span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">.</span>contents <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment">// æ¸²æŸ“å¥½çš„ç»“æœæ›¿æ¢å³å¯</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰§è¡Œä¸­é—´ä»¶</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resovle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> handleTemplate
</code></pre></div><ol start="3"><li>åˆå¹¶template.jsonå’Œpackage.jsonï¼Œç”Ÿæˆæ–°çš„package.jsonå¹¶å†æ¬¡æ‰§è¡Œ<code>npm install</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åˆå¹¶template.jsonå’Œpackage.json</span>
  <span class="token keyword">let</span> tempPkg <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">'/template.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> pkg <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">'/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> tempPkgJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>tempPkg<span class="token punctuation">)</span>
  <span class="token keyword">const</span> pkgJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>pkg<span class="token punctuation">)</span>

  pkgJson<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>pkgJson<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span>
    <span class="token operator">...</span>tempPkgJson<span class="token punctuation">.</span>package<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  pkgJson<span class="token punctuation">.</span>devDependencies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>tempPkgJson<span class="token punctuation">.</span>package<span class="token punctuation">.</span>devDependencies<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç¼–å†™package.json</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token string">'package.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkgJson<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token string">'template.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// åˆ é™¤template.jsonæ–‡ä»¶</span>

  <span class="token comment">// å†æ¬¡æ ¹æ®dependenciesToInstallæ‰§è¡Œnpm install</span>
  <span class="token keyword">const</span> dependenciesToInstall <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>pkgJson<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span>
    <span class="token operator">...</span>pkgJson<span class="token punctuation">.</span>devDependencies<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> newDependencies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dependenciesToInstall<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newDependencies <span class="token operator">=</span> newDependencies<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
      dependenciesToInstall<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>dependency<span class="token punctuation">,</span> version<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dependency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">doAction</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> newDependencies<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span><span class="token string">'Installing succeed!'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li><p>å¸è½½wokoo-template</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> <span class="token function">doAction</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token string">'wokoo-template'</span><span class="token punctuation">,</span> <span class="token string">'uninstall'</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <p>æµç¨‹ä¸Šçš„å®ç°ä»‹ç»å®Œäº†ï¼Œä¸‹é¢ä¸¤ä¸ªæ–¹æ³•æ˜¯æˆ‘å°è£…çš„åŠŸèƒ½æ€§æ–¹æ³•</p> <p><strong>doActionï¼šä½¿ç”¨npmå®‰è£…æˆ–å¸è½½é¡¹ç›®ä¾èµ–</strong></p> <p>ä½¿ç”¨<a href="https://www.npmjs.com/package/cross-spawn" target="_blank" rel="noopener noreferrer">cross-spawn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å¼€å¯å­çº¿ç¨‹ï¼Œåœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œ<code>npm install</code> æˆ– <code>npm uninstall</code>çš„å‘½ä»¤</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doAction</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> allDependencies<span class="token punctuation">,</span> action <span class="token operator">=</span> <span class="token string">'install'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">typeof</span> allDependencies <span class="token operator">===</span> <span class="token string">'string'</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span>allDependencies <span class="token operator">=</span> <span class="token punctuation">[</span>allDependencies<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> command <span class="token operator">=</span> <span class="token string">'npm'</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span>
      action<span class="token punctuation">,</span>
      <span class="token string">'--save'</span><span class="token punctuation">,</span>
      <span class="token string">'--save-exact'</span><span class="token punctuation">,</span>
      <span class="token string">'--loglevel'</span><span class="token punctuation">,</span>
      <span class="token string">'error'</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>allDependencies<span class="token punctuation">,</span>
      <span class="token string">'--cwd'</span><span class="token punctuation">,</span>
      root<span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">spawn</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token punctuation">{</span> stdio<span class="token operator">:</span> <span class="token string">'inherit'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    child<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span> <span class="token comment">// å®‰è£…æˆåŠŸåè§¦å‘resolve</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>deleteFolder: é€’å½’åˆ é™¤æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼Œå…¥å‚æ˜¯pathæ–‡ä»¶è·¯å¾„</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deleteFolder</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// pathæ˜¯æ–‡ä»¶ï¼Œç›´æ¥åˆ é™¤</span>
      fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ é™¤æ–‡ä»¶å¤¹</span>
      files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
      files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> curPath <span class="token operator">=</span> path <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> file
        <span class="token function">deleteFolder</span><span class="token punctuation">(</span>curPath<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="wokoo-templateç¼–å†™">wokoo-templateç¼–å†™</h2> <ul><li>åˆ†ä¸ºvue-templateå’Œreact-template</li> <li>vue-templateå’Œreact-templateåˆ†åˆ«å¯¹åº”webpacké…ç½®çš„ä¸€ä¸ªvueæˆ–reactåŸºç¡€é¡¹ç›®</li> <li>ä½¿ç”¨ejsæ¨¡æ¿ï¼Œå®ç°wokoo-scriptsæ³¨å…¥å˜é‡</li></ul> <p>templateç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨webpack+vueæˆ–reactåˆ†åˆ«æ­å»ºäº†ä¸€ä¸ªè½»é‡çº§é¡¹ç›®ã€‚</p> <p>å…·ä½“ä»£ç å¯çœ‹ğŸ‘‰<a href="https://github.com/kinyaying/wokoo/tree/master/packages/wokoo-template" target="_blank" rel="noopener noreferrer">wokoo/wokoo-template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="å‘å¸ƒwokoo">å‘å¸ƒwokoo</h2> <p>åœ¨æ‰§è¡Œ<code>lerna publish</code>ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹è‡ªå·±çš„é¡¹ç›®ä¸‹ç”¨åˆ°çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦åœ¨package.json <code>files</code>å­—æ®µä¸­ã€‚åªæœ‰åœ¨filesä¸­çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ‰ä¼šçœŸæ­£çš„è¢«å‘å¸ƒä¸Šå»ã€‚</p> <ol><li>åœ¨wokoo-scriptsçš„package.jsonçš„<code>files</code>å­—æ®µä¸­å¢åŠ &quot;modifyTemplate.js&quot;</li> <li>åœ¨wokoo-templateçš„package.jsonçš„<code>files</code>å­—æ®µä¸­å¢åŠ &quot;react-template&quot;, &quot;vue-template&quot;,&quot;public&quot;,&quot;webpack.config.js&quot;,&quot;.gitignore&quot;</li></ol> <p>æˆ‘ä¹‹å‰å°±å¿˜è®°å¾€fileså­—æ®µæ·»åŠ ï¼Œå¯¼è‡´publishä¸Šå»åå‘ç°ä¸¢æ–‡ä»¶äº†ã€‚å…·æœ‰é—®é¢˜å¯é˜…è¯»ï¼šhttps://stackoverflow.com/questions/27049192/npm-publish-isnt-including-all-my-files</p> <p>æœ€åä¸€æ­¥å°±å¤§åŠŸå‘Šæˆäº†ï¼ğŸ‰</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lerna publish
</code></pre></div><h2 id="wokooä½¿ç”¨">wokooä½¿ç”¨</h2> <p>å…·ä½“ä½¿ç”¨è¿‡ç¨‹å¯ä»¥é˜…è¯»<a href="https://juejin.cn/post/6922815205575491597" target="_blank" rel="noopener noreferrer">æ²¹çŒ´è„šæ‰‹æ¶wokooä½¿ç”¨è¯´æ˜<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1-1-é¡¹ç›®å®‰è£…-åˆå§‹åŒ–é…ç½®">1.1 é¡¹ç›®å®‰è£… &amp; åˆå§‹åŒ–é…ç½®</h3> <div class="language-js extra-class"><pre class="language-js"><code>npm i wokoo <span class="token operator">-</span>g
wokoo zhihu<span class="token operator">-</span>help
</code></pre></div><p>é€‰æ‹©æ¨¡æ¿</p> <ul><li>[ ] vue</li> <li>[ ] react</li></ul> <p>è¿™é‡Œé€‰æ‹©reactï¼Œç­‰å¾…é¡¹ç›®å®‰è£…ã€‚é¡¹ç›®å®‰è£…å®Œæˆåï¼Œæ ¹æ®æç¤ºæ‰§è¡Œä¸‹å‘½ä»¤ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> zhihu-helper
<span class="token function">npm</span> start
</code></pre></div><ul><li>æ‰“å¼€æ²¹çŒ´è„šæœ¬ç¼–è¾‘å™¨ï¼ŒæŠŠtampermonkey.jsçš„å†…å®¹å¤åˆ¶è¿›å»ã€‚</li></ul> <img width="50%" src="/assets/img/tampermonkey/tampermonkey.png"> <img width="100%" src="/assets/img/tampermonkey/copy-tampermonkey.png"> <ul><li>æ‰“å¼€ç½‘é¡µ<a href="https://zhuanlan.zhihu.com/mandy" target="_blank" rel="noopener noreferrer">çŸ¥ä¹ä¸“æ <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œå³ä¸Šè§’å‡ºç°ä¸€åªçŒ´å­å›¾æ ‡ï¼Œè¯´æ˜é¡¹ç›®å·²è·‘é€šã€‚</li></ul> <p><strong>è¡¥å……è¯´æ˜</strong></p> <p>æ­¤å¤„æœ‰çš„æµè§ˆå™¨ä¸ä¼šå‡ºç°çŒ´å­å›¾æ ‡ã€‚æ‰“å¼€æ§åˆ¶å°å¯è§æŠ¥é”™ï¼š</p> <img width="100%" src="/assets/img/tampermonkey/zhihu-error.png"> <p>åŸå› æ˜¯çŸ¥ä¹ä½¿ç”¨äº†cspå†…å®¹å®‰å…¨ç­–ç•¥ï¼Œåªå…è®¸åŠ è½½æŒ‡å®šåŸŸåçš„jsã€‚å…·ä½“æƒ…å†µå¯é˜…è¯» ğŸ‘‰ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" target="_blank" rel="noopener noreferrer">å†…å®¹å®‰å…¨ç­–ç•¥( CSP )<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <img width="100%" src="/assets/img/tampermonkey/zhihu-1.png"> <p><strong>å¦‚ä½•ç»•è¿‡æ­¤å®‰å…¨ç­–ç•¥ï¼Œæ­¤å¤„ç»™ä¸¤ä¸ªæ–¹æ³•ï¼š</strong></p> <ol><li>å®‰è£…æ’ä»¶<a href="https://chrome.pictureknow.com/extension?id=5b80153e8db143afa59310bc0f282f1f" target="_blank" rel="noopener noreferrer">Disable Content-Security-Policy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, åœ¨è°ƒè¯•çŸ¥ä¹é¡µé¢æ—¶å¼€å¯æ’ä»¶ï¼Œè‡ªåŠ¨æŠŠcontent-security-policyç»™è®¾ç½®ä¸ºç©ºã€‚</li></ol> <img width="100%" src="/assets/img/tampermonkey/zhihu-2.png"> <ol start="2"><li>ä¼šé…ç½®charlesçš„åŒå­¦ï¼Œå¯ä»¥è®¾ç½®ä¸€æ¡è½¬å‘è§„åˆ™</li></ol> <img width="100%" src="/assets/img/tampermonkey/zhihu-3.png"> <img width="100%" src="/assets/img/tampermonkey/zhihu-4.png"> <img width="100%" src="/assets/img/tampermonkey/zhihu-5.png"> <p>è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ç»•è¿‡å®‰å…¨ç­–ç•¥ã€‚</p> <p>é‡åˆ°è¿™ä¸­cspå†…å®¹å®‰å…¨ç­–ç•¥çš„ç½‘é¡µï¼Œåœ¨ä¸Šçº¿åˆ°æ²¹çŒ´å•†åº—çš„æ—¶å€™ä¸èƒ½ç”¨æ‰˜ç®¡cdnçš„æ–¹å¼ï¼Œè¦å°†ä»£ç å¤åˆ¶åˆ°ç¼–è¾‘æ¡†ä¸­ã€‚</p> <h3 id="_1-2-å¼€å‘åŸºæœ¬åŠŸèƒ½">1.2 å¼€å‘åŸºæœ¬åŠŸèƒ½</h3> <p>æ•´ç†æ€è·¯</p> <ol><li>ç»˜åˆ¶å·¦ä¾§æŠ½å±‰å¼¹çª—</li> <li>å¼¹çª—å¼¹å‡ºæ—¶è¯·æ±‚çŸ¥ä¹åˆ—è¡¨æ¥å£ï¼Œæ‹¿åˆ°åˆ—è¡¨æ•°æ®</li> <li>ä¸‹æ‹‰æ—¶å®ç°åŠ è½½æ›´å¤šçš„åŠŸèƒ½</li></ol> <p>ä¸‹é¢æˆ‘ä»¬æ¥é€æ­¥å®ç°å§~</p> <p><strong>æ­¥éª¤1. ç»˜åˆ¶å·¦ä¾§æŠ½å±‰å¼¹çª—</strong></p> <p>ä¸»è¦é€šè¿‡this.state.showæ§åˆ¶å¼¹çª—çš„æ˜¾ç¤ºéšè—ã€‚æ­¤æ­¥éª¤æŒºç®€å•çš„ï¼Œå¯ä»¥ç›´æ¥çœ‹ä»£ç :<a href="https://github.com/kinyaying/wokoo/blob/master/example/zhihu-helper/src/step1.js" target="_blank" rel="noopener noreferrer">step1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œå¯ä»¥å°†index.jså…¥å£é‡Œçš„appæ›¿æ¢æˆstep1æŸ¥çœ‹æ•ˆæœã€‚</p> <p><strong>æ­¥éª¤2. è¯·æ±‚<a href="https://www.zhihu.com/api/v4/columns" target="_blank" rel="noopener noreferrer">çŸ¥ä¹åˆ—è¡¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥å£ï¼Œè·å–åˆ—è¡¨æ•°æ®</strong></p> <ul><li>å®‰è£…axiosï¼Œå¹¶å¼•å…¥</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> axios
</code></pre></div><ul><li>è®¡ç®—è¯·æ±‚å‚æ•°</li></ul> <p>åˆ†æè¯·æ±‚çš„urlå¯çŸ¥ï¼Œè¯·æ±‚æ¥å£ä¸ºï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.zhihu.com/api/v4/columns</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>queryName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/items?limit=20&amp;offset=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offset<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>å…¶ä¸­this.queryNameæ˜¯ä¸“æ åç§°ï¼Œå½“é¡µé¢ä¸º<a href="https://zhuanlan.zhihu.com/mandy" target="_blank" rel="noopener noreferrer">ä¸“æ åˆ—è¡¨é¡µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ—¶å°±æ˜¯pathname; å½“é¡µé¢ä¸º<a href="https://zhuanlan.zhihu.com/p/348005704" target="_blank" rel="noopener noreferrer">ä¸“æ è¯¦æƒ…é¡µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ—¶ï¼Œéœ€è¦é€šè¿‡ç±»åä¸º<code>ColumnPageHeader-TitleColumn</code>çš„aæ ‡ç­¾çš„hrefæ¥è·å–ã€‚</p> <img width="100%" src="/assets/img/tampermonkey/zhihu.png"> <img width="100%" src="/assets/img/tampermonkey/zhihu1.png"> <p>é€šè¿‡è¿™ä¸¤å¼ å›¾åº”è¯¥æ›´å¥½ç†è§£getQueryNameæ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">getQueryName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pathname <span class="token operator">=</span> location<span class="token punctuation">.</span>pathname
    <span class="token keyword">let</span> detailRegExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/p\/\d+</span><span class="token regex-delimiter">/</span></span>
    <span class="token keyword">let</span> queryName <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment">// ä¸“æ è¯¦æƒ…é¡µ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>detailRegExp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> aTage <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>
        <span class="token string">'ColumnPageHeader-TitleColumn'</span>
      <span class="token punctuation">)</span>
      <span class="token keyword">let</span> url <span class="token operator">=</span> aTage<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>href
      queryName <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¸“æ åˆ—è¡¨é¡µ</span>
      <span class="token comment">// http://zhuanlan.zhihuå’Œhttp://zhihu/columnä¸¤ç§æƒ…å†µéƒ½æ˜¯ä¸“æ </span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/column'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pathname <span class="token operator">=</span> pathname<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token string">'/column'</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      queryName <span class="token operator">=</span> pathname
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queryName <span class="token operator">=</span> queryName
  <span class="token punctuation">}</span>
</code></pre></div><p>è€Œåˆ—è¡¨é¡µåˆå­˜åœ¨ä¸¤ç§åŸŸåï¼šhttps://www.zhihu.com/column/mandy    å’Œ https://zhuanlan.zhihu.com/mandy  æ‰€ä»¥åœ¨<code>else</code>é€»è¾‘é‡Œé’ˆå¯¹<code>https://www.zhihu.com/column/mandy</code>åšäº†å¤„ç†ï¼Œåªä¿ç•™/mandy</p> <p>é€šè¿‡getQueryNameæ–¹æ³•ï¼Œæˆ‘ä»¬è·å–åˆ°äº†è¯·æ±‚å‚æ•°</p> <ul><li>å‘é€è¯·æ±‚ï¼Œæ‹‰å–ç›®å½•åˆ—è¡¨</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">getList</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasMore<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> offset <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">let</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.zhihu.com/api/v4/columns</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>queryName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/items?limit=20&amp;offset=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>offset<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token keyword">let</span> list <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> i<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      url<span class="token operator">:</span> i<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
      id<span class="token operator">:</span> i<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      commentCount<span class="token operator">:</span> i<span class="token punctuation">.</span>comment_count<span class="token punctuation">,</span>
      voteupCount<span class="token operator">:</span> i<span class="token punctuation">.</span>voteup_count<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>paging<span class="token punctuation">.</span>is_end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hasMore<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    offset <span class="token operator">+=</span> limit

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token operator">...</span>list<span class="token punctuation">]</span><span class="token punctuation">,</span>
      offset<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>ç¬¬äºŒæ­¥çš„è¿‡ç¨‹å®ç°å®Œäº†ï¼Œä»£ç åœ¨è¿™é‡ŒğŸ‘‰<a href="https://github.com/kinyaying/wokoo/blob/master/example/zhihu-helper/src/step2.js" target="_blank" rel="noopener noreferrer">step2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œå¯ä»¥å°†index.jså…¥å£é‡Œçš„appæ›¿æ¢æˆstep2æŸ¥çœ‹æ•ˆæœã€‚</p> <p>è¿™æ—¶æ’ä»¶çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼Œé™¤äº†æ²¡æœ‰ä¸‹æ‹‰åŠ è½½åŠŸèƒ½ï¼Œå…¶ä»–åŸºæœ¬å®Œå·¥äº†ã€‚</p> <img width="100%" src="/assets/img/tampermonkey/image-20210206004837608.png"> <p><strong>æ­¥éª¤3. ä¸‹æ‹‰æ—¶å®ç°åŠ è½½æ›´å¤šçš„åŠŸèƒ½</strong></p> <p>æ— é™æ»šåŠ¨çš„ç»„ä»¶å¼•äº†ç¬¬ä¸‰æ–¹åº“<a href="https://www.npmjs.com/package/react-infinite-scroll-component" target="_blank" rel="noopener noreferrer">react-infinite-scroll-component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-infinite-scroll-component
</code></pre></div><p>ä¸»è¦æ˜¯åœ¨renderå‡½æ•°é‡Œå¢åŠ InfiniteScrollç»„ä»¶ï¼Œæ³¨æ„InfiniteScrollçš„heightéœ€è¦é€šè¿‡è®¡ç®—ç»™ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œå¦åˆ™æ— æ³•è§¦å‘æ»šåŠ¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;list-ul&quot;</span> onMouseLeave<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleMouseLeave<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>InfiniteScroll
		dataLength<span class="token operator">=</span><span class="token punctuation">{</span>list<span class="token punctuation">.</span>length<span class="token punctuation">}</span>
		next<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInfiniteOnLoad<span class="token punctuation">}</span>
		hasMore<span class="token operator">=</span><span class="token punctuation">{</span>hasMore<span class="token punctuation">}</span>
		loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    height<span class="token operator">=</span><span class="token punctuation">{</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> <span class="token number">53</span><span class="token punctuation">}</span>
		endMessage<span class="token operator">=</span><span class="token punctuation">{</span>
  		<span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    		<span class="token operator">&lt;</span>b<span class="token operator">&gt;</span>åˆ°åº•äº†ï¼Œæ²¡å†…å®¹å•¦<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
		<span class="token punctuation">}</span>
  <span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>li className<span class="token operator">=</span><span class="token string">&quot;list-li&quot;</span> key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">...</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>InfiniteScroll<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>æ­¤æ—¶åŠŸèƒ½å·²ç»å¼€å‘å®Œæˆï¼Œå…·ä½“ä»£ç æŸ¥çœ‹ ğŸ‘‰<a href="https://github.com/kinyaying/wokoo/blob/master/example/zhihu-helper/src/app.js" target="_blank" rel="noopener noreferrer">app.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ä¸‰ã€éƒ¨ç½²æ’ä»¶åˆ°æ²¹çŒ´å•†åº—">ä¸‰ã€éƒ¨ç½²æ’ä»¶åˆ°æ²¹çŒ´å•†åº—</h2> <p><strong>3.1 æ„å»º</strong></p> <p>æ‰§è¡Œå‘½ä»¤</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run build
</code></pre></div><p><strong>3.2 ç¡®è®¤æ²¹çŒ´è„šæœ¬æ–‡ä»¶tampermonkey.js</strong></p> <p>æ­¤æ–‡ä»¶ä¸­è¢«æ³¨é‡Šæ‰çš„//@xxx éƒ½æœ‰å«ä¹‰ï¼Œå¯ä»¥å¯¹åº”ç€ <a href="https://www.tampermonkey.net/documentation.php?version=4.6&amp;ext=dhdg" target="_blank" rel="noopener noreferrer">tampermonkeyå¼€å‘æ–‡æ¡£ <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç†è§£ã€‚</p> <ul><li><p>@description æ’ä»¶æè¿°</p></li> <li><p>@match æŒ‡å®šæŸäº›åŸŸåä¸‹å¼€å¯æ­¤æ’ä»¶ï¼Œé»˜è®¤é…äº†ä¸¤æ¡ï¼Œ<code>// @match https://*/*</code>å’Œ<code>// @match https://*/*</code>è¡¨ç¤ºåœ¨æ‰€æœ‰åŸŸåä¸‹éƒ½å¼€å¯ã€‚ä½†æ˜¯æ­¤å¤„å¸Œæœ›åªåœ¨zhihuä¸“æ é‡Œä½¿ç”¨æ­¤æ’ä»¶ï¼Œæ‰€ä»¥è¦ä¿®æ”¹@mathå­—æ®µã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// @match        https://zhuanlan.zhihu.com/*</span>
<span class="token comment">// @match        https://www.zhihu.com/column/*</span>
</code></pre></div></li> <li><p>@require æ²¹çŒ´è„šæœ¬å†…éƒ¨å¸®å¿™å¼•å…¥ç¬¬ä¸‰æ–¹èµ„æºï¼Œæ¯”å¦‚jqueryï¼Œreactç­‰ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// @require https://unpkg.com/react@17/umd/react.production.min.js</span>
<span class="token comment">// @require https://unpkg.com/react-dom@17/umd/react-dom.production.min.js</span>
</code></pre></div></li></ul> <p><strong>3.3 å‘å¸ƒæ’ä»¶åˆ°æ²¹çŒ´å¸‚åœº</strong></p> <p>å‘å¸ƒæ²¹çŒ´å¸‚åœºçš„ä¼˜ç‚¹æ˜¯ä¸ç”¨å®¡æ ¸ï¼Œå³å‘å³ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p> <ol><li>å°†/dist/app.bundle.js æ–‡ä»¶éƒ¨ç½²åˆ° cdn ä¸Šï¼Œè·å–åˆ°å¯¹åº” urlã€‚</li></ol> <p><strong>æ³¨æ„ï¼š</strong></p> <ul><li><p>jsæ–‡ä»¶å¯æ”¾åˆ° github ä¸Šï¼Œå¦‚æœæ‰˜ç®¡åˆ° github ä¸Šæœ€å¥½åš cdn åŠ é€Ÿï¼ˆæˆ‘ä½¿ç”¨cdn.jsdelivr.netè¿›è¡ŒcdnåŠ é€Ÿï¼‰ã€‚</p></li> <li><p>å¦‚æœæ²¡æœ‰cdnæœåŠ¡å™¨å¯è·³è¿‡æ­¤æ­¥éª¤ï¼Œåœ¨æ­¥éª¤4ç›´æ¥å°†app.bundle.jså¤åˆ¶åˆ°æ²¹çŒ´è„šæœ¬ç¼–è¾‘å™¨ä¸­</p></li></ul> <ol start="2"><li><p>ç™»å½•<a href="https://greasyfork.org/" target="_blank" rel="noopener noreferrer">æ²¹çŒ´å¸‚åœº<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè°·æ­Œè´¦å·æˆ– github è´¦å·éƒ½å¯ä½¿ç”¨ã€‚</p></li> <li><p>ç‚¹å‡»è´¦å·åç§°ï¼Œå†ç‚¹å‡»ã€Œå‘å¸ƒä½ ç¼–å†™çš„è„šæœ¬ã€</p></li></ol> <img width="100%" src="/assets/img/tampermonkey/wokoo-tamp3.png"> <img width="100%" src="/assets/img/tampermonkey/wokoo-tamp4.png"> <ol start="4"><li><p>è¿›å…¥ç¼–è¾‘é¡µï¼Œå°† tampermonkey.js é‡Œçš„å†…å®¹å¤åˆ¶åˆ°ç¼–è¾‘æ¡†ä¸­</p> <p>æ³¨æ„ï¼š</p> <ul><li><p>æ­¥éª¤1ä¸­å¦‚æœæ‰˜ç®¡äº†cdnï¼Œéœ€è¦å°†ä»£ç ä¸­çš„<code>localhost:8080</code>ç½‘å€æ›¿æ¢æˆé™æ€èµ„æº url</p></li> <li><p>æ­¥éª¤1ä¸­æ²¡æœ‰æ‰˜ç®¡cdnï¼Œä¸èƒ½ç›´æ¥å°†/dist/app.bundle.jsæ–‡ä»¶é‡Œçš„å†…å®¹å¤åˆ¶ç¼–è¾‘æ¡†ã€‚å› ä¸ºç¼–è¾‘æ¡†å†…ä»£ç æœ‰æœ€å¤§é™åˆ¶ï¼Œæˆ‘ä»¬æ„å»ºçš„app.bundle.jsæŠŠreactç­‰ä¸‰æ–¹åº“æ„å»ºè¿›å»è¶…è¿‡æœ€å¤§é™åˆ¶äº†ã€‚</p> <p>éœ€è¦å¯¹æ„å»ºç»“æœè¿›è¡Œæ‹†åŒ…</p> <p>4.1 ä¿®æ”¹  tampermonkey.js ï¼Œé€šè¿‡@requireæ–¹å¼å¼•å…¥reactå’Œreact-dom</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ==UserScript==</span>
<span class="token comment">// @name         zhihu-helper</span>
<span class="token comment">// @namespace    http://tampermonkey.net/</span>
<span class="token comment">// @version      0.0.1</span>
<span class="token comment">// @description  çŸ¥ä¹ç›®å½•</span>
<span class="token comment">// @author       xx</span>
<span class="token comment">// @match        https://zhuanlan.zhihu.com/*</span>
<span class="token comment">// @match        https://www.zhihu.com/column/*</span>
<span class="token comment">// @require https://unpkg.com/react@17/umd/react.production.min.js</span>
<span class="token comment">// @require https://unpkg.com/react-dom@17/umd/react-dom.production.min.js</span>

<span class="token comment">// ==/UserScript==</span>

<span class="token comment">// app.bundle.jsæ„å»ºå¥½çš„ä»£ç </span>
</code></pre></div><p>4.2 ä¿®æ”¹webpack.config.base.jsçš„entryå­—æ®µ</p> <div class="language-js extra-class"><pre class="language-js"><code>entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token string">'/src/index.js'</span><span class="token punctuation">,</span>
    vendor<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// å°†reactå’Œreact-domè¿™äº›å•ç‹¬æ‰“åŒ…å‡ºæ¥ï¼Œå‡å°æ‰“åŒ…æ–‡ä»¶ä½“ç§¯</span>
      <span class="token string">'react'</span><span class="token punctuation">,</span>
      <span class="token string">'react-dom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>4.3 é‡æ–°æ‰§è¡Œ<code>npm run build</code> æ„å»ºå‡ºæ–°çš„app.bundle.jsï¼Œå¤åˆ¶åˆ°æ²¹çŒ´å¸‚åœºçš„ç¼–è¾‘æ¡†å†…ã€‚</p></li></ul></li></ol> <img width="100%" src="/assets/img/tampermonkey/zhihu-tampermonkey.png"> <ol start="5"><li>ç‚¹å‡» ã€Œå‘å¸ƒè„šæœ¬ã€å³å¯</li></ol></div></article> <section class="post-meta main-div" data-v-7f7ca342><section class="post-date clearfix" data-v-7f7ca342><span class="create-date" data-v-7f7ca342>
      å‘å¸ƒæ—¶é—´ : 2021-02-02
    </span> <span class="update-date" data-v-7f7ca342>
      æœ€åä¿®æ”¹ : 2021-11-15
    </span></section> <section class="post-links" data-v-7f7ca342><a href="/posts/2020/10/13/seek.html" class="post-link" data-v-7f7ca342>
      ä¸Šä¸€ç¯‡ : æŸ¥æ‰¾
    </a> <a href="/posts/2021/02/26/react-basics.html" class="post-link" data-v-7f7ca342>
      ä¸‹ä¸€ç¯‡ : reactåŸºç¡€çŸ¥è¯†
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-0874e876><div class="info-card main-div" data-v-2bd66a30 data-v-0874e876><div class="info-card-header" data-v-2bd66a30><img src="https://www.mamingjuan.cn/assets/img/avatar.jpeg" alt="Glitr" class="info-avatar" data-v-2bd66a30></div> <div class="info-card-body" data-v-2bd66a30><section class="info-nickname" data-v-2bd66a30>
      Glitr
    </section> <section class="info-desc" data-v-2bd66a30>Enjoy coding,<br/>Enjoy life:)</section> <section class="info-contact" data-v-2bd66a30><section data-v-2bd66a30><span title="Beijing City, China" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Beijing City, China</title><use xlink:href="#icon-location" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Beijing City, China
        </span></span></section> <section data-v-2bd66a30><span title="Secrecy" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Secrecy</title><use xlink:href="#icon-organization" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Secrecy
        </span></span></section> <section data-v-2bd66a30><a href="mailto:glitteringma@gmail.com" title="glitteringma@gmail.com" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>glitteringma@gmail.com</title><use xlink:href="#icon-email" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          glitteringma@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-2bd66a30><section class="info-sns clearfix" data-v-2bd66a30><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-2bd66a30><span title="GitHub: glitzma" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-2bd66a30><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-2bd66a30><span title="Instagram: glitz9558" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-0874e876><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>æ–‡ç« ç›®å½•</span> <div class="post-nav-toc"><ul><li><a href="/posts/2021/02/02/chrome-plugin.html#è¯´æ˜">è¯´æ˜</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#æ‰‹æŠŠæ‰‹æ•™æ­å»ºè¿‡ç¨‹">æ‰‹æŠŠæ‰‹æ•™æ­å»ºè¿‡ç¨‹</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#wokoo-scriptsç¼–å†™">wokoo-scriptsç¼–å†™</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#wokoo-templateç¼–å†™">wokoo-templateç¼–å†™</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#å‘å¸ƒwokoo">å‘å¸ƒwokoo</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#wokooä½¿ç”¨">wokooä½¿ç”¨</a><ul><li><a href="/posts/2021/02/02/chrome-plugin.html#_1-1-é¡¹ç›®å®‰è£…-åˆå§‹åŒ–é…ç½®">1.1 é¡¹ç›®å®‰è£… &amp; åˆå§‹åŒ–é…ç½®</a></li><li><a href="/posts/2021/02/02/chrome-plugin.html#_1-2-å¼€å‘åŸºæœ¬åŠŸèƒ½">1.2 å¼€å‘åŸºæœ¬åŠŸèƒ½</a></li></ul></li><li><a href="/posts/2021/02/02/chrome-plugin.html#ä¸‰ã€éƒ¨ç½²æ’ä»¶åˆ°æ²¹çŒ´å•†åº—">ä¸‰ã€éƒ¨ç½²æ’ä»¶åˆ°æ²¹çŒ´å•†åº—</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2021/02/02/chrome-plugin.html#post-comments">
      è¯„è®º
    </a></div></div></aside></div> <footer class="footer" data-v-d3d2ddb6><p class="sns-links" data-v-d3d2ddb6><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-d3d2ddb6><span title="GitHub: glitzma" class="sns-icon" data-v-d3d2ddb6 data-v-d3d2ddb6><svg class="icon" style="font-size:25px;" data-v-d3d2ddb6 data-v-d3d2ddb6><title data-v-d3d2ddb6 data-v-d3d2ddb6>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-d3d2ddb6 data-v-d3d2ddb6></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-d3d2ddb6><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-d3d2ddb6 data-v-d3d2ddb6><svg class="icon" style="font-size:25px;" data-v-d3d2ddb6 data-v-d3d2ddb6><title data-v-d3d2ddb6 data-v-d3d2ddb6>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-d3d2ddb6 data-v-d3d2ddb6></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-d3d2ddb6><span title="Instagram: glitz9558" class="sns-icon" data-v-d3d2ddb6 data-v-d3d2ddb6><svg class="icon" style="font-size:25px;" data-v-d3d2ddb6 data-v-d3d2ddb6><title data-v-d3d2ddb6 data-v-d3d2ddb6>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-d3d2ddb6 data-v-d3d2ddb6></use></svg></span></a></p> <div class="copyright" data-v-d3d2ddb6>
    Â© 2014 â€“ 
    <span itemprop="copyrightYear" data-v-d3d2ddb6>2021</span> <span class="post-meta-divider" data-v-d3d2ddb6>|</span> <span itemprop="copyrightHolder" class="author" data-v-d3d2ddb6>Glitr</span></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app~d0ae3f07.711d61d2.js" defer></script><script src="/assets/js/9.712f52cc.js" defer></script><script src="/assets/js/120.897f2181.js" defer></script><script src="/assets/js/app~db300d2f.2a2e3cfe.js" defer></script>
  </body>
</html>
