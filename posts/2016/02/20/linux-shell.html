<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell基础知识 | 马明娟</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This is my blog">
    
    <link rel="preload" href="/assets/css/0.styles.7b8c5199.css" as="style"><link rel="preload" href="/assets/js/app~d0ae3f07.7b8c5199.js" as="script"><link rel="preload" href="/assets/css/styles.ac6b7210.css" as="style"><link rel="preload" href="/assets/js/app~db300d2f.ac6b7210.js" as="script"><link rel="preload" href="/assets/css/9.styles.d80ec364.css" as="style"><link rel="preload" href="/assets/js/9.d80ec364.js" as="script"><link rel="preload" href="/assets/js/18.3dee3f3b.js" as="script"><link rel="prefetch" href="/assets/css/10.styles.06714614.css"><link rel="prefetch" href="/assets/css/2.styles.c30b94c6.css"><link rel="prefetch" href="/assets/css/3.styles.78e857d7.css"><link rel="prefetch" href="/assets/css/4.styles.c6dd9a10.css"><link rel="prefetch" href="/assets/css/5.styles.a4cf2d4b.css"><link rel="prefetch" href="/assets/css/6.styles.a463c4a0.css"><link rel="prefetch" href="/assets/css/7.styles.a4f00c88.css"><link rel="prefetch" href="/assets/css/8.styles.e03eae99.css"><link rel="prefetch" href="/assets/js/10.06714614.js"><link rel="prefetch" href="/assets/js/11.42360893.js"><link rel="prefetch" href="/assets/js/12.9f882609.js"><link rel="prefetch" href="/assets/js/13.2968004d.js"><link rel="prefetch" href="/assets/js/14.d0f769de.js"><link rel="prefetch" href="/assets/js/15.9ba93576.js"><link rel="prefetch" href="/assets/js/16.634ba446.js"><link rel="prefetch" href="/assets/js/17.0b407238.js"><link rel="prefetch" href="/assets/js/19.646447dc.js"><link rel="prefetch" href="/assets/js/2.c30b94c6.js"><link rel="prefetch" href="/assets/js/20.7c2536fb.js"><link rel="prefetch" href="/assets/js/21.cc3dd757.js"><link rel="prefetch" href="/assets/js/22.ed7f7a5e.js"><link rel="prefetch" href="/assets/js/23.d1566c0b.js"><link rel="prefetch" href="/assets/js/24.2d2e269b.js"><link rel="prefetch" href="/assets/js/25.09099284.js"><link rel="prefetch" href="/assets/js/26.6a1eae88.js"><link rel="prefetch" href="/assets/js/27.45efcfce.js"><link rel="prefetch" href="/assets/js/28.5c72fff4.js"><link rel="prefetch" href="/assets/js/29.72a1a9a9.js"><link rel="prefetch" href="/assets/js/3.78e857d7.js"><link rel="prefetch" href="/assets/js/30.bcf7ce72.js"><link rel="prefetch" href="/assets/js/31.576f4754.js"><link rel="prefetch" href="/assets/js/32.4f899a8f.js"><link rel="prefetch" href="/assets/js/33.45019498.js"><link rel="prefetch" href="/assets/js/34.866bbeca.js"><link rel="prefetch" href="/assets/js/35.b8fea60d.js"><link rel="prefetch" href="/assets/js/36.842d5ddf.js"><link rel="prefetch" href="/assets/js/37.501b22b2.js"><link rel="prefetch" href="/assets/js/38.742334a9.js"><link rel="prefetch" href="/assets/js/39.14deb4c9.js"><link rel="prefetch" href="/assets/js/4.c6dd9a10.js"><link rel="prefetch" href="/assets/js/40.1575fc7c.js"><link rel="prefetch" href="/assets/js/41.8d146200.js"><link rel="prefetch" href="/assets/js/42.dad40abb.js"><link rel="prefetch" href="/assets/js/43.91e6e102.js"><link rel="prefetch" href="/assets/js/44.9a30e645.js"><link rel="prefetch" href="/assets/js/45.653f96d6.js"><link rel="prefetch" href="/assets/js/46.d41b0674.js"><link rel="prefetch" href="/assets/js/47.f097faaa.js"><link rel="prefetch" href="/assets/js/48.193dab24.js"><link rel="prefetch" href="/assets/js/49.8db8079e.js"><link rel="prefetch" href="/assets/js/5.a4cf2d4b.js"><link rel="prefetch" href="/assets/js/6.a463c4a0.js"><link rel="prefetch" href="/assets/js/7.a4f00c88.js"><link rel="prefetch" href="/assets/js/8.e03eae99.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b8c5199.css"><link rel="stylesheet" href="/assets/css/styles.ac6b7210.css"><link rel="stylesheet" href="/assets/css/9.styles.d80ec364.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-glitzma"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/assets/img/header-image-05.jpg);" data-v-e4a0ebe0><div data-v-6654f004 data-v-e4a0ebe0><nav class="navbar" data-v-6654f004><div class="container" data-v-6654f004><a href="/" class="router-link-active" data-v-6654f004><span class="navbar-site-name" data-v-6654f004>
          马明娟
        </span></a> <div class="navbar-toggler" data-v-6654f004><svg class="icon" style="font-size:1.2em;" data-v-6654f004 data-v-6654f004><title data-v-6654f004 data-v-6654f004>menu</title><use xlink:href="#icon-menu" data-v-6654f004 data-v-6654f004></use></svg></div> <div class="navbar-links" data-v-6654f004><a href="/" class="navbar-link" data-v-6654f004>
            Home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-6654f004>
            Search
          </a><a href="/custom-pages/" class="navbar-link" data-v-6654f004>
            About
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-6654f004></div></div> <div class="banner" data-v-e2d7da12 data-v-e4a0ebe0 data-v-e4a0ebe0><div class="container" data-v-e2d7da12><div class="center" data-v-e2d7da12></div></div></div></header> <div class="container clearfix show-aside" data-v-0874e876 data-v-0874e876><main class="main" data-v-0874e876><div class="post" data-v-0874e876 data-v-0874e876><section class="post-meta main-div" data-v-12a4d4fc><section class="post-date clearfix" data-v-12a4d4fc><span class="create-date" data-v-12a4d4fc>
      发布于 : 2016-02-20
    </span> <span class="update-date" data-v-12a4d4fc>
      修改于 : 2021-10-25
    </span></section> <section class="post-links" data-v-12a4d4fc><a href="/posts/2016/04/29/fe-optimization-guid.html" class="post-link" data-v-12a4d4fc>
      下一篇 : 前端优化指南
    </a> <a href="/posts/2015/08/22/linux.html" class="post-link" data-v-12a4d4fc>
      上一篇 : linux常用命令
    </a></section></section> <article class="main-div"><div class="post-content content__default"><h2 id="shell相关知识">shell相关知识</h2> <h3 id="_1-shell基础">1. shell基础</h3> <ul><li>shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序</li> <li>用户可以用Shell来启动、挂起、停止或者编写一些程序</li> <li>Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。</li> <li>Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。</li></ul> <h4 id="_1-1-echo">1.1 echo</h4> <ul><li>输出命令</li> <li>-e：激活转义字符</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> hello
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;a<span class="token entity" title="\t">\t</span>b&quot;</span>
</code></pre></div><h4 id="_1-2-编写执行shell">1.2 编写执行shell</h4> <p>hello.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> hello
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>//通过Bash调用执行脚本
<span class="token function">sh</span> hello.sh
//赋予执行权限，直接运行
<span class="token function">chmod</span> <span class="token number">755</span> hello.sh
<span class="token function">chmod</span> u+x hello.sh
./hello.sh
</code></pre></div><h4 id="_1-3-别名">1.3 别名</h4> <ul><li>命令别名就是小名</li> <li>临时生效 alias cp=&quot;cp -i&quot;</li> <li>写入环境变量配置文件 vi ~/.bashrc</li> <li>source ~/.bashrc</li> <li>删除别名 unalias 别名</li></ul> <h4 id="_1-4-命令的生效顺序">1.4 命令的生效顺序</h4> <ul><li>绝对路径或者相对路径</li> <li>别名</li> <li>bash内部命令</li> <li>按照$PATH环境变量定义的目录查找顺序找到的第一个命令</li></ul> <h4 id="_1-5-命令快捷键">1.5 命令快捷键</h4> <table><thead><tr><th>命令</th> <th>含义</th></tr></thead> <tbody><tr><td>ctrl+c</td> <td>强制终止当前命令</td></tr> <tr><td>ctrl+l</td> <td>清屏</td></tr> <tr><td>ctrl+a</td> <td>光标移动到命令行首</td></tr> <tr><td>ctrl+e</td> <td>光标移动到命令行尾</td></tr> <tr><td>ctrl+u</td> <td>从光标所在的位置删除到行首</td></tr></tbody></table> <h4 id="_1-6-历史命令">1.6 历史命令</h4> <ul><li>history [选项] [历史命令保存文件]</li> <li>选项
<ul><li>-c 清空历史命令</li> <li>-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history</li></ul></li> <li>默认保存1000条 /etc/profile HISSIZE=10000</li></ul> <h4 id="_1-7-调用">1.7 调用</h4> <ul><li>使用上下箭头调用以前的历史命令</li> <li>使用 !n 重复执行第n条历史命令</li> <li>使用 !! 重复执行上一条命令</li> <li>使用 !字符 重复执行最后一条以该字符串开头的命令</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">history</span> -c
<span class="token number">1</span>  <span class="token builtin class-name">echo</span> <span class="token number">1</span>
<span class="token number">2</span>  <span class="token builtin class-name">echo</span> <span class="token number">2</span>
<span class="token number">3</span>  <span class="token builtin class-name">echo</span> <span class="token number">3</span>
<span class="token operator">!</span><span class="token number">2</span>
<span class="token operator">!</span><span class="token operator">!</span>
<span class="token operator">!</span>echo
</code></pre></div><h4 id="_1-8-输出重定向">1.8 输出重定向</h4> <p>1.8.1 标准输入输出</p> <table><thead><tr><th>设备</th> <th>设备文件名</th> <th>文件描述符</th> <th>类型</th></tr></thead> <tbody><tr><td>键盘</td> <td>/dev/stdin</td> <td>0</td> <td>标准输入</td></tr> <tr><td>显示器</td> <td>/dev/stdout</td> <td>1</td> <td>标准输出</td></tr> <tr><td>显示器</td> <td>/dev/stderr</td> <td>2</td> <td>标准错误输出</td></tr></tbody></table> <table><thead><tr><th>类型</th> <th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>标准输出重定向</td> <td>命令 &gt; 文件</td> <td>以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>标准输出重定向</td> <td>命令 &gt;&gt; 文件</td> <td>以追加的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;文件</td> <td>以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;&gt;文件</td> <td>以追加的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&amp;1</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&gt;&amp;1</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;文件</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;&gt;文件</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;&gt;文件1 2&gt;文件2</td> <td>以覆盖的方式，正确的输出追加到文件1中，把错误输出追加到文件2中</td></tr></tbody></table> <p>1.8.2 输入重定向</p> <ul><li>wc命令的功能为统计指定文件中的行数、字数、字节数, 并将统计结果显示输出</li> <li>命令 &lt; 文件把文件做为命令的输入</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wc</span> <span class="token operator">&lt;</span> a.txt
</code></pre></div><h4 id="_1-9-管道符号">1.9 管道符号</h4> <p>1.9.1 多命令顺序执行</p> <table><thead><tr><th>执行符</th> <th>格式</th> <th>作用</th> <th>案例</th></tr></thead> <tbody><tr><td>;</td> <td>命令1;命令2</td> <td>多个命令执行，命令之间没有任何逻辑联系</td> <td>echo 1;echo 2;</td></tr> <tr><td>&amp;&amp;</td> <td>命令1&amp;&amp;命令2</td> <td>逻辑与 当命令1正确执行，则命令2才会执行 当命令1执行不正确，则命令2不会执行</td> <td>echo 1&amp;&amp;echo 2;</td></tr> <tr><td>\</td> <td>命令1\ 命令2</td> <td>逻辑或 当命令1执行不正确，则命令2才会执行 当命令1正确执行，则命令2不会执行</td> <td>echo 1\echo 2;</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token operator">||</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>1.9.2 管道符号</p> <ul><li>命令1的正确输出会作为命令2的操作对象</li> <li>命令1|命令2</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ls</span> /etc/ <span class="token operator">|</span> <span class="token function">more</span>
<span class="token function">netstat</span> -an <span class="token operator">|</span> <span class="token function">grep</span> ESTABLISHED <span class="token operator">|</span> <span class="token function">wc</span> -l
</code></pre></div><p>1.9.3 通配符</p> <ul><li>匹配文件名和目录名</li></ul> <table><thead><tr><th>通配符</th> <th>作用</th></tr></thead> <tbody><tr><td>?</td> <td>匹配一个任意字符</td></tr> <tr><td>*</td> <td>匹配0个或任意字符，也就是可以匹配任意内容</td></tr> <tr><td>[]</td> <td>匹配中括号中任意一个字符</td></tr> <tr><td>[-]</td> <td>匹配中括号中任意一个字符,-代表范围</td></tr> <tr><td>[^]</td> <td>匹配不是中括号中的一个字符</td></tr></tbody></table> <p>1.9.4 其它符号</p> <table><thead><tr><th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>''</td> <td>单引号。在单引号中所有的特殊符号，如$和`都没有特殊含义</td></tr> <tr><td>&quot;&quot;</td> <td>双引号，在双引号里特殊符号都没有特殊含义，但是 $ ` \ 例外，拥有调用变量值，引用命令和转义的含义</td></tr> <tr><td>`</td> <td>反引号，扩起来的是系统命令</td></tr> <tr><td>$()</td> <td>和反引号一样</td></tr> <tr><td>#</td> <td>在shell脚本中，#开头的行代表注释</td></tr> <tr><td>$</td> <td>用于调用变量的值</td></tr> <tr><td>\</td> <td>转义符号</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">'$PATH'</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token environment constant">$PATH</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;a<span class="token entity" title="\t">\t</span>b&quot;</span>
</code></pre></div><h3 id="_2-变量">2. 变量</h3> <h4 id="_2-1-什么是变量">2.1 什么是变量</h4> <ul><li>可以变化的量</li> <li>变量必须以字母或下划线开头，名字中间只能由字母，数字和下划线组成</li> <li>变量名的长度不得超过255个字符</li> <li>变量名在有效范围内必须唯一</li> <li>变量默认类型都是字符串</li></ul> <h4 id="_2-2-变量的分类">2.2 变量的分类</h4> <ul><li>字符串</li> <li>整型</li> <li>浮点型</li> <li>日期型</li></ul> <h4 id="_2-3-用户自定义变量">2.3 用户自定义变量</h4> <ul><li>这些变量的值是自己定义的</li> <li>变量名不能为数字开头</li> <li>等号左右两边不能有空格
2.3.1 定义变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;hello world&quot;</span>
<span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">10</span>
</code></pre></div><p>2.3.2 输出变量值</p> <ul><li>echo $变量名
2.3.3 值默认都是字符串</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">1</span>
$ <span class="token assign-left variable">y</span><span class="token operator">=</span><span class="token number">2</span>
$ <span class="token assign-left variable">z</span><span class="token operator">=</span><span class="token number">3</span>
$ <span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token variable">$x</span>+<span class="token variable">$y</span>+<span class="token variable">$z</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$k</span>
<span class="token number">1</span>+2+3
</code></pre></div><p>2.3.4 在赋值的时候引用变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">m</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$x</span>&quot;</span><span class="token number">2</span>
<span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable">${x}</span><span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$m</span> <span class="token variable">$n</span>
</code></pre></div><p>2.3.5 set</p> <ul><li>查询系统中默认所有已经生效的变量，包括系统变量,也包括自定义变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">set</span> <span class="token operator">|</span> <span class="token function">grep</span> hello 
</code></pre></div><p>2.3.6 unset</p> <ul><li>删除变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">unset</span> a
</code></pre></div><h4 id="_2-4-环境变量">2.4 环境变量</h4> <ul><li>环境变量是全局变量，而自定义变量是局部变量</li> <li>自定义变量会在当前的shell中生效，而环境变量会在当前shell以及其子shell中生效</li> <li>这种变量主要保存的是和系统操作环境相关的数据</li> <li>变量可以自定义，但是对系统生效的环境变量名和变量作用是固定的
2.4.1 自定义环境变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>xport 变量名<span class="token operator">=</span>变量值
<span class="token builtin class-name">export</span> <span class="token assign-left variable">envName</span><span class="token operator">=</span>prod
</code></pre></div><p>2.4.2 env</p> <ul><li>仅仅用来查看环境变量，而不看到本地变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> envName
</code></pre></div><p>2.4.3 常用环境变量</p> <table><thead><tr><th>变量名</th> <th>含义</th> <th>示例</th></tr></thead> <tbody><tr><td>HOSTNAME</td> <td>主机名</td> <td>HOSTNAME=localhost</td></tr> <tr><td>SHELL</td> <td>当前的shell</td> <td>SHELL=/bin/bash</td></tr> <tr><td>HISTSIZE</td> <td>历史命令条数</td> <td>HISTSIZE=1000</td></tr> <tr><td>SSH_CLIENT</td> <td>当前操作环境如果是用SSH连接的话，这里会记录客户端IP</td> <td>SSH_CLIENT=192.168.1.100 57596 22</td></tr> <tr><td>USER</td> <td>当前登录的用户</td> <td>USER=root</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token environment constant">$HOSTNAME</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$HISTSIZE</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$SSH_CLIENT</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$USER</span>
</code></pre></div><p>2.4.4 path</p> <ul><li>系统搜索路径</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># echo $PATH</span>
/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
</code></pre></div><p>如果想把一个自定义的脚本直接可以执行，或者把这个文件拷贝到目标目录下，或者把脚本所在目录添加到环境变量中的PATH路径中</p> <p>/root/shells/hello.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> hello
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$PATH</span>&quot;</span>:/root/shells
hello.sh
</code></pre></div><p>2.4.5 语系环境变量</p> <ul><li>查询当前系统语系</li> <li>在Linux中通过locale来设置程序运行的不同语言环境，locale由ANSI C提供支持。locale的命名规则为&lt;语言&gt;_&lt;地区&gt;.&lt;字符集编码&gt;，如zh_CN.UTF-8，zh代表中文，CN代表大陆地区，UTF-8表示字符集。</li> <li>LANG: 定义系统主语系的变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>locale
<span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>zh_CN.UTF-8

<span class="token builtin class-name">echo</span> <span class="token environment constant">$LANG</span>
</code></pre></div><p>2.4.6 中文支持</p> <ul><li>图形界面可以支持中文</li> <li>第三方工具比如xshell语系设置正确可以支持中文</li> <li>虚拟机中的纯字符界面不支持中文</li></ul> <h4 id="_2-5-位置参数变量">2.5 位置参数变量</h4> <ul><li>这种变量主要是用来向脚本当中传递参数或数据的,变量名不能自定义,变量作用是固定的</li></ul> <table><thead><tr><th>位置参数变量</th> <th>作用</th></tr></thead> <tbody><tr><td>$n</td> <td>n为数字，$0代表命令本身，$1-$9代表第1到第9个参数，10以上的参数需要用大括号包含,如${10}</td></tr> <tr><td>$*</td> <td>这个变量代表命令中所有的参数，$*把所有的变看数看成一个整体</td></tr> <tr><td>$@</td> <td>这个变量也代表命令行中所有的参数，不过$@把每个参数进行区分</td></tr> <tr><td>$#</td> <td>这个变量代表命令行中所有参数的个数</td></tr></tbody></table> <p>sum.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token variable">$2</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>num1<span class="token operator">+</span>num2<span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> sum.sh <span class="token number">3</span> <span class="token number">4</span>
</code></pre></div><p>vi for.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
 <span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;i=<span class="token variable">$i</span>&quot;</span>
 <span class="token keyword">done</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> for.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">3</span>
</code></pre></div><p>vi for2.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span>
 <span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;i=<span class="token variable">$i</span>&quot;</span>
 <span class="token keyword">done</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> for2.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</code></pre></div><p>vi for3.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> for3.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token number">3</span>
</code></pre></div><h4 id="_2-6-预定义变量">2.6 预定义变量</h4> <ul><li>是脚本中已经定义好的变量，变量名不能自定义，变量作用也是固定的</li></ul> <table><thead><tr><th>位置参数变量</th> <th>作用</th></tr></thead> <tbody><tr><td>$?</td> <td>最后一次执行的命令的返回状态。0表示正确执行，非0表示不正确执行</td></tr> <tr><td>$$</td> <td>当前进程的进程号(PID)</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$$</span>
</code></pre></div><h4 id="_2-7-read">2.7 read</h4> <ul><li>read [选项] [变量名]</li></ul> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-p</td> <td>提示信息，在等待read输入时，输出提示信息</td></tr> <tr><td>-t</td> <td>秒数: read命令会一直等待用户输入，使用此选项可以指定等待时间</td></tr> <tr><td>-n</td> <td>字符数，read命令只接受指定的字符数，就会执行</td></tr> <tr><td>-s</td> <td>隐藏输入的数据，适用于机密信息的输入</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input your name:'</span> -t <span class="token number">5</span> name
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input you gender[m/f]:'</span> -n <span class="token number">1</span> gender
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input your password:'</span> -s password
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$name</span>,<span class="token variable">$gender</span>,<span class="token variable">$password</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> read.sh
</code></pre></div><h3 id="_3-运算符">3. 运算符</h3> <ul><li>弱类型并且默认是字符串类型</li></ul> <h4 id="_3-1-declare命令">3.1 declare命令</h4> <p>3.1.1 declare命令</p> <ul><li>用来声明变量类型</li> <li>declare [+/-] [选项] 变量名</li></ul> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-</td> <td>给变量设定类型属性</td></tr> <tr><td>+</td> <td>取消变量的类型属性</td></tr> <tr><td>-a</td> <td>将变量声明为数组类型</td></tr> <tr><td>-i</td> <td>将变量声明为整数型</td></tr> <tr><td>-x</td> <td>将变量声明为环境变量</td></tr> <tr><td>-r</td> <td>将变量声明为只读变量</td></tr> <tr><td>-p</td> <td>显示指定变量的被声明的类型</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span>+<span class="token variable">$b</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$c</span>
<span class="token number">1</span>+2
<span class="token builtin class-name">declare</span> -i <span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span>+<span class="token variable">$b</span> //声明成整型
<span class="token builtin class-name">echo</span> <span class="token variable">$c</span>
<span class="token number">3</span>
<span class="token builtin class-name">declare</span> +i c //取消变量的类型属性
<span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span>+<span class="token variable">$b</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$c</span>
<span class="token number">1</span>+2
<span class="token builtin class-name">declare</span> -i <span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token string">&quot;3&quot;</span> //给变量设定类型属性
<span class="token builtin class-name">declare</span> -p c //显示指定变量的被声明的类型
//declare -i <span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token string">&quot;3&quot;</span>

//声明环境变量
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable">kk</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">set</span> <span class="token operator">|</span> <span class="token function">grep</span> kk      //查看所有变量
<span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> kk      //只查看系统变量

<span class="token builtin class-name">declare</span> -r x //只读
<span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">2</span>  //bash: x: <span class="token builtin class-name">readonly</span> variable
</code></pre></div><p>3.1.2 数组</p> <div class="language-shell extra-class"><pre class="language-shell"><code>//声明为数组类型
<span class="token builtin class-name">declare</span> -a names<span class="token punctuation">;</span>

names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>zhangsan
names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>lisi

//默认只打印第一个元素
<span class="token builtin class-name">echo</span> <span class="token variable">${names}</span>
zhangsan
//打印第2个元素
<span class="token builtin class-name">echo</span> <span class="token variable">${names<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span>
lisi
//打印全部
<span class="token builtin class-name">echo</span> <span class="token variable">${names<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
zhangsan lisi
</code></pre></div><p>3.1.3 声明环境变量</p> <ul><li>export最终执行的是declare -x命令</li> <li>declare -p 可以查看所有的类型</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">NAME</span><span class="token operator">=</span>hello 
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable">NAME</span><span class="token operator">=</span>hello 
</code></pre></div><p>3.1.4 只读属性</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">declare</span> -r <span class="token assign-left variable">gender</span><span class="token operator">=</span>m
<span class="token assign-left variable">gender</span><span class="token operator">=</span>f
-bash: gender: <span class="token builtin class-name">readonly</span> variable
</code></pre></div><p>3.1.5 查询变量属性</p> <ul><li>declare -p 查询所有变量的属性</li> <li>declare -p 变量名 查询指定变量的属性</li></ul> <h4 id="_3-2-数值运算的方法">3.2 数值运算的方法</h4> <ul><li>只要用declare声明变量的时候指定类型就可以进行数值运算</li></ul> <p>3.2.1 expr或let</p> <ul><li>号左右两侧必须有空格,否则还是整块输出</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">expr</span> $num1 + $num2<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
<span class="token number">5</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token assign-left variable">sum2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$num1<span class="token operator">+</span>$num2<span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum2</span>
<span class="token number">5</span>
<span class="token assign-left variable">sum3</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$num1</span>+<span class="token variable">$num2</span><span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum3</span>
<span class="token number">5</span>

<span class="token assign-left variable">d</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$d</span>
</code></pre></div><p>3.2.2 优先级
<img width="100%" src="/assets/img/priority.png" alt=""></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">/</span><span class="token number">2</span><span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$result</span>
<span class="token number">6</span>
</code></pre></div><h3 id="_4-环境变量配置文件">4. 环境变量配置文件</h3> <h4 id="_4-1-source-命令">4.1 source 命令</h4> <ul><li>修改完配置文件后，必须注销重新登录才能生效，使用source命令可以不用重新登录</li> <li>source 配置文件</li> <li>. 配置文件</li></ul> <h4 id="_4-2-环境变量配置文件简介">4.2 环境变量配置文件简介</h4> <ul><li>PATH、HISTSIZE、PS1、HOSTNAME等环境变量写入对应的环境变量配置文件</li> <li>环境变量配置文件中主要是定义地系统操作环境生效的系统默认环境变量，如PATH等此文件登录时起作用的环境变量</li></ul> <table><thead><tr><th>路径</th> <th>说明</th></tr></thead> <tbody><tr><td>/etc/profile</td> <td></td></tr> <tr><td>/etc/bashrc</td> <td></td></tr> <tr><td>~/.bash_profile</td> <td>只会对当前用户生效</td></tr> <tr><td>~/.bashrc</td> <td>只会对当前用户生效</td></tr></tbody></table> <p>f49353175c1062b807c03b03bd9b5817</p> <h4 id="_4-3-环境变量配置文件的功能">4.3 环境变量配置文件的功能</h4> <p>4.3.1 /etc/profile</p> <ul><li>在这里修改系统变量</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span>  /etc/profile <span class="token operator">|</span> <span class="token function">grep</span> <span class="token environment constant">USER</span>
</code></pre></div><table><thead><tr><th>变量名</th> <th>含义</th></tr></thead> <tbody><tr><td>USER</td> <td>用户名</td></tr> <tr><td>LOGNAME</td> <td>登录名</td></tr> <tr><td>MAIL</td> <td>邮箱地址</td></tr> <tr><td>PATH</td> <td>查找路径</td></tr> <tr><td>HOSTNAME</td> <td>主机名</td></tr> <tr><td>umask</td> <td>权限掩码</td></tr> <tr><td>/etc/profile.d/*.sh</td> <td></td></tr></tbody></table> <p>4.3.2 ~/.bash_profile</p> <ul><li>在这里修改PATH路径</li> <li>调用 ~/.bashrc</li></ul> <p>4.3.3 ~/.bashrc</p> <ul><li>在这里改别名,配置alias</li> <li>调用 /etc/bashrc</li></ul> <p>4.3.4 /etc/bashrc</p> <ul><li>PS1 登录提示符在这里修改</li> <li>umask</li> <li>PATH变量</li> <li>调用 /etc/profile.d/星.sh文件</li></ul> <p>4.3.5 其它配置文件</p> <p>4.3.5.1 注销时生效的环境变量配置文件</p> <ul><li>~/.bash_logout</li></ul> <p>4.3.5.2 脚本历史</p> <ul><li>当正确退出计算机的时候会历史记录会写入文件</li> <li>~/.bash_history</li></ul> <p>4.3.5.3 Shell登录信息</p> <ul><li>本地终端欢迎信息 /etc/issue</li> <li>远程终端欢迎信息 /etc/issue.net</li> <li>不管远程还是本地都可以生效 /etc/motd</li></ul> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>\d</td> <td>当前系统日期</td></tr> <tr><td>\s</td> <td>显示操作系统名称</td></tr> <tr><td>\l</td> <td>显示登录的终端号</td></tr> <tr><td>\m</td> <td>显示硬件体系结构，如i386等</td></tr> <tr><td>\n</td> <td>显示主机名</td></tr> <tr><td>\o</td> <td>显示域名</td></tr> <tr><td>\r</td> <td>显示内核版本</td></tr> <tr><td>\t</td> <td>显示当前系统时间</td></tr> <tr><td>\u</td> <td>显示当前登录用户的序列号</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /etc/ssh/sshd_config
Banner /etc/issue.net
<span class="token function">service</span> sshd restart
</code></pre></div><h3 id="_4-正则表达式">4.正则表达式</h3> <p><a href="https://regexper.com/" target="_blank" rel="noopener noreferrer">regexper<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_4-1-概念">4.1 概念</h4> <ul><li>正则表达式是用于描述字符排列和匹配模式的一种语法规则</li> <li>它主要用于字符串的模式分割、匹配查找及替换操作</li></ul> <h4 id="_4-2-通配符">4.2 通配符</h4> <ul><li>通配符用来匹配符合条件的文件名，通配符是完全匹配。</li> <li>ls find 这些命令不支持正则，只能使用通配符</li></ul> <table><thead><tr><th>符号</th> <th>含义</th></tr></thead> <tbody><tr><td>?</td> <td>匹配任意一个字符</td></tr> <tr><td>*</td> <td>匹配任意多个字符</td></tr> <tr><td>[]</td> <td>匹配中括号中范围内的一个字符</td></tr></tbody></table> <h4 id="_4-3-正则表达式">4.3 正则表达式</h4> <p>正则表达式是用来在文件中匹配符合条件的字符串，是包含匹配。
grep awk sed 等都可以支持正则表达式</p> <h4 id="_4-4-元字符">4.4 元字符</h4> <p><code>alias grep='grep --color=auto'</code></p> <table><thead><tr><th>元字符</th> <th>作用</th> <th>示例</th></tr></thead> <tbody><tr><td>*</td> <td>前一个字符匹配 0 次或任意多次</td> <td><code>grep 1* reg.txt</code></td></tr> <tr><td>.</td> <td>匹配除换行符外的任意一个字符</td> <td><code>grep . reg.txt</code></td></tr> <tr><td>^</td> <td>匹配行首。例如，<code>^hello</code> 会匹配以 hello 开头的行</td> <td><code>grep ^a reg.txt</code></td></tr> <tr><td>$</td> <td>匹配行尾。例如，hello&amp; 会匹配以 hello 结尾的行</td> <td><code>grep a$ reg.txt</code></td></tr> <tr><td>[]</td> <td>匹配屮柄号屮指定的任意一个字符，而且只匹配一个字符。例如.[aoeiu]匹配任意一个元音字母， [0-9] 匹配任意一位数字，[a-z][0-9] 匹配由小写字母和一位数字构成的两位字符</td> <td>grep ab[bc]c reg.txt</td></tr> <tr><td>[^]</td> <td>匹配除中括号中的字符以外的任意一个字符。例如，[^0-9] 匹配任意一位非数字字符，</td> <td></td></tr> <tr><td>[^a-z]</td> <td>匹配任意一位非小写字母</td> <td>grep a[^fg]c reg.txt</td></tr> <tr><td>\</td> <td>转义符，用于取消特殊符号的含义</td> <td>grep .$ reg.txt</td></tr> <tr><td>{n}</td> <td>表示其前面的字符恰好出现 n 次。例如，[0-9]{4} 匹配4位数字，[1][3-8][0-9]{9} 匹配手机号码</td> <td>grep &quot;a{1}&quot; reg.txt</td></tr> <tr><td>(n,}</td> <td>表示其前面的字符出现不少于 n 次。例如，[0-9]{2,} 匹配两位及以上的数字</td> <td>grep &quot;a{1,}&quot; reg.txt</td></tr> <tr><td>{n,m}</td> <td>表示其前面的字符至少出现 n 次，最多出现 m 次。例如，[a-z]{6,8} 匹配 6〜8 位的小写字母</td> <td>grep &quot;a{2,3}&quot; reg.txt</td></tr></tbody></table> <h4 id="_4-5-cut">4.5 cut</h4> <ul><li>cut用来提取文本中的某一部分文本</li> <li>cut [选项] 文件名
<ul><li>-f 列号，用来指定要提取的列</li> <li>-d 分隔符，按照指定分隔符分割列,默认分隔符是TAB制表符
提取用户名和它使用的shell</li></ul></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">1,7</span> -d <span class="token builtin class-name">:</span>
</code></pre></div><h4 id="_4-6-printf">4.6 printf</h4> <ul><li>按规定格式输出</li> <li>printf 输出类型 输出内容
| 参数	| 含义|
| %ns	| 输出字符串,n是数字指代输出几个字符|
| %ni	| 输出整数,n是指输出几个数字|
| %m.nf	| 输出浮点数,m和n是数字，指代输出的整数位数和小数位数，如%6.2f代表输出6位位，2位小数，4位整数|</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">printf</span> <span class="token string">&quot;%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>\%s<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /dev/vda1<span class="token variable">)</span></span> <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">1,5</span>
</code></pre></div><h4 id="_4-7-awk">4.7 awk</h4> <ul><li>awk '条件1{动作1} 条件2{动作2}...' 文件名</li> <li>条件(Pattern)
<ul><li>一般使用关系表达式作为条件</li> <li>x &gt; 10 判断变量x是否大于10</li> <li>x &gt;=10 大于等于</li> <li>x &lt;=10 小于等于</li></ul></li> <li>动作(Action)
<ul><li>格式化输出</li></ul></li> <li>$0 整行 $1 第一列...</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /dev/vda1 <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print $5}'</span><span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">'%'</span> -f <span class="token number">1</span>
</code></pre></div><p>4.7.1 begin end</p> <ul><li>awk可以正确截取制表符和空格</li> <li>begin 在所有的输出之前打印</li> <li>end 在所有的输出之后打印</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&gt;</span> numbers.txt
<span class="token function">awk</span> <span class="token string">'BEGIN{print &quot;开始&quot;}END{print &quot;结束&quot;}'</span> numbers.txt 
</code></pre></div><p>4.7.2 FS</p> <ul><li>Field Separator，字段分隔符</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print $1&quot;\t&quot;$2}'</span> /etc/passwd
</code></pre></div><p>4.7.3 声明变量</p> <p>numbers.txt</p> <div class="language- extra-class"><pre class="language-text"><code>1
2
3
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'BEGIN{sum=0}{sum=sum+$1}END{print sum}'</span> numbers.txt 
<span class="token number">6</span>
</code></pre></div><p>4.7.4 多条件</p> <p>score.txt</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zhangsan <span class="token number">91</span>
li <span class="token number">81</span>
wangwu <span class="token number">71</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'$2&gt;90{print $1&quot;\t优秀&quot;}$2&gt;80{print $2&quot;\t良好&quot;}'</span> score.txt
</code></pre></div><p>4.7.5 NR</p> <ul><li>NR,表示awk开始执行程序后所读取的数据行数</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'{print NR,$0}'</span> score.txt
</code></pre></div><p>4.7.6 OFS</p> <ul><li>OFS Out of Field Separator，输出字段分隔符</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;i love you&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{ FS=&quot; &quot;;OFS=&quot;-&quot; }{print $1,$2,$3}'</span>
</code></pre></div><h4 id="_4-8-sed命令">4.8 sed命令</h4> <ul><li>sed是一个轻量级编辑器，主要用来对数据进行选取、替换、替换和新增操作</li> <li>sed [选项] '[动作]' 文件名</li> <li>所有的动作都必须用单号号括起来</li> <li>类型类似于批量vi操作</li></ul> <p>4.8.1 动作</p> <table><thead><tr><th>参数</th> <th>含义	示例</th></tr></thead> <tbody><tr><td>a</td> <td>追加，在每一行或者指定行下面添加一行或多行</td></tr> <tr><td>c</td> <td>行替换，用c后面的字符串替换掉原始整个数据行</td></tr> <tr><td>s</td> <td>字符串替换,用一个字符串替换另外一个字符串，格式为 &quot;行范围s/旧字符串/新字符串/g&quot;</td></tr> <tr><td>i</td> <td>插入，在当前行插入一行或多行</td></tr> <tr><td>d</td> <td>删除指定的行</td></tr> <tr><td>p</td> <td>打印,输出指定的行</td></tr></tbody></table> <p>4.8.2 选项</p> <table><thead><tr><th>参数</th> <th>含义</th> <th>示例</th></tr></thead> <tbody><tr><td>-n</td> <td>一般sed命令会把所有的数据都输出到屏幕上，如果加入此选项则只会把处理过的行输出到屏幕上</td> <td>sed -n '2p' score.txt</td></tr> <tr><td>-e</td> <td>允许对输入数据应用多条sed编辑命令</td> <td>sed -e 's/91/92/g;s/81/82/g' score.txt</td></tr> <tr><td>-i</td> <td>用sed的修改直接修改编辑的文件，而不是在屏幕上输出</td> <td>sed -i '1i newline' score.txt</td></tr></tbody></table> <h4 id="_4-9-排序命令sort">4.9 排序命令sort</h4> <ul><li>sort [选项] 文件名</li> <li>选项</li></ul> <table><thead><tr><th>选项</th> <th>含义</th> <th></th></tr></thead> <tbody><tr><td>-f</td> <td>忽略大小写</td> <td>sort -f -t &quot;:&quot; -n -k 5,5 /etc/passwd</td></tr> <tr><td>-n</td> <td>以数值型进行排序，默认使用字符串顺序</td> <td>sort -t &quot;:&quot; -n -k 3,3 /etc/passwd</td></tr> <tr><td>-r</td> <td>反向排序，默认从小到大</td> <td>sort -r /etc/passwd</td></tr> <tr><td>-t</td> <td>指定分割符，默认分割符是制表符</td> <td>sort -t &quot;:&quot; -k 3,3 /etc/passwd</td></tr> <tr><td>-k n[,m]</td> <td>按照指定的字段范围排序。从第n个字段开始，到第m个字段结束，默认是到行尾</td> <td>sort -t &quot;:&quot; -k 3,3 /etc/passwd</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sort</span> /etc/passwd
<span class="token function">sort</span> -r /etc/passwd
<span class="token function">sort</span> -t <span class="token string">&quot;:&quot;</span> -k <span class="token number">3,3</span> /etc/passwd
</code></pre></div><h4 id="_4-10-wc">4.10 wc</h4> <ul><li>wc [选项] 文件名</li></ul> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-l</td> <td>只统计行数</td></tr> <tr><td>-w</td> <td>只允许单词数</td></tr> <tr><td>-m</td> <td>只统计字符数</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wc</span> wc.txt 
</code></pre></div><h3 id="_5-流程控制">5. 流程控制</h3> <h4 id="_5-1-条件判断">5.1 条件判断</h4> <p>5.1.1 按照文件类型进行判断</p> <p>| 选项	| 含义|
| -d	| 文件是否存在并且是目录|
| -e	| 文件是否存在|
| -f	| 文件是否存在并且是普通文件|
| -b	| 文件是否存在并且是块设备文件
| -c	| 文件是否存在并且是字符设备文件|
| -L	| 文件是否存在并且是链接文件|
| -p	| 文件是否存在并且是管道文件|
| -s	| 文件是否存在并且是否为非空|
| -S	| 文件是否存在并且是套接字文件|</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">touch</span> <span class="token number">1</span>.txt
<span class="token builtin class-name">test</span> -e <span class="token number">1</span>.txt
<span class="token punctuation">[</span>-e <span class="token number">1</span>.txt<span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre></div><p>exist.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> -e <span class="token number">1</span>.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token function">yes</span>
<span class="token punctuation">[</span> -e <span class="token number">11</span>.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
no
</code></pre></div><p>5.1.2 按照文件权限进行判断</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-r</td> <td>文件是否存在，并且是否拥有读权限</td></tr> <tr><td>-w</td> <td>文件是否存在，并且是否拥有写权限</td></tr> <tr><td>-x</td> <td>文件是否存在，并且是否拥有执行权限</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token builtin class-name">read</span>  <span class="token operator">&gt;</span> read.txt
<span class="token builtin class-name">echo</span> <span class="token function">write</span>  <span class="token operator">&gt;</span> write.txt
<span class="token builtin class-name">echo</span> execute  <span class="token operator">&gt;</span> execute.txt

<span class="token function">chmod</span> u+w write.txt 
<span class="token function">chmod</span> u+x execute.txt

<span class="token punctuation">[</span> -r read.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;read yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> -w write.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;write yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> -x execute.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;execute yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
</code></pre></div><p>5.1.3 两个文件间的比较</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>文件1 <code>-nt</code> 文件2</td> <td>判断文件1的修改时间是否比文件2的新</td></tr> <tr><td>文件1 <code>-ot</code> 文件2</td> <td>判断文件1的修改时间是否比文件2的旧</td></tr> <tr><td>文件1 <code>-ef</code> 文件2</td> <td>判断文件1和文件2的inode号是否一致,可用于判断硬链接</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> write.txt -nt read.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;write is older than read&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> read.txt -ot write.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;read is older than write&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token function">ln</span> execute.txt execute2.txt
<span class="token punctuation">[</span> execute.txt -ef execute2.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;execute and execute2.txt are the same&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
</code></pre></div><p>5.1.4 两个整数间的比较</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>整数1 -eq 整数2</td> <td>判断整数1是否和整数2相等</td></tr> <tr><td>整数1 -ne 整数2</td> <td>判断整数1是否和整数2不相等</td></tr> <tr><td>整数1 -gt 整数2</td> <td>判断整数1是否大于整数2</td></tr> <tr><td>整数1 -lt 整数2</td> <td>判断整数1是否小于整数2</td></tr> <tr><td>整数1 -ge 整数2</td> <td>判断整数1是否大于等于整数2</td></tr> <tr><td>整数1 -le 整数2</td> <td>判断整数1是否小于等于整数2</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> <span class="token number">2</span> -eq <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2==2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">3</span> -ne <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2!=2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">3</span> -gt <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2&gt;2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">1</span> -lt <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2&lt;2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">2</span> -ge <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2&gt;=2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">2</span> -le <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;2&lt;=2&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
</code></pre></div><p>5.1.5 字符串的判断</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-z 字符串</td> <td>判断字否串是否为空</td></tr> <tr><td>-n 字符中</td> <td>判断字符串是否为非空</td></tr> <tr><td>字符串1 == 字符串2</td> <td>判断字符串1是否和字符串2相等</td></tr> <tr><td>字符串1 != 字符串2</td> <td>判断字符串1是否和字符串2不相等</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">name</span><span class="token operator">=</span>hello 
<span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;空&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;非空&quot;</span>
<span class="token punctuation">[</span> -n <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;非空&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;空&quot;</span>
<span class="token assign-left variable">name2</span><span class="token operator">=</span>hello 
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;<span class="token variable">$name2</span>&quot;</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;相等&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;不相等&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;<span class="token variable">$name2</span>&quot;</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;不相等&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;相等&quot;</span>
</code></pre></div><p>5.1.6 多重条件判断</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>判断1 -a 判断2</td> <td>逻辑与</td></tr> <tr><td>判断1 -o 判断2</td> <td>逻辑或</td></tr> <tr><td>!判断</td> <td>逻辑非</td></tr></tbody></table> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> -a <span class="token number">3</span> -gt <span class="token number">2</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> -a <span class="token number">3</span> -gt <span class="token number">4</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> -o <span class="token number">3</span> -gt <span class="token number">4</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token number">3</span> -gt <span class="token number">4</span> <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
</code></pre></div><h4 id="_5-2-单分支if语句">5.2 单分支if语句</h4> <ul><li>if语句使用fi结尾</li> <li>[条件判断式]就是使用test命令进行判断，所以中括号和条件判断式之间必须有空格</li> <li>then后面跟符合条件之后执行的程序，可以放在[]之后，用;分隔，也可以换行，不用;</li></ul> <p>5.2.1 语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
 代码体
<span class="token keyword">fi</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断<span class="token punctuation">]</span>
<span class="token keyword">then</span>
 代码体
<span class="token keyword">fi</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token builtin class-name">echo</span> bigger<span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
 <span class="token builtin class-name">echo</span> bigger
<span class="token keyword">fi</span>
</code></pre></div><p>5.2.2 判断当前用户是否是root用户</p> <p>isRoot.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">whoami</span><span class="token variable">)</span></span>
<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$user</span>&quot;</span> <span class="token operator">==</span> root <span class="token punctuation">]</span>
<span class="token keyword">then</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;我是root用户&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h4 id="_5-3-双分支if语句">5.3 双分支if语句</h4> <p>5.3.1 语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断<span class="token punctuation">]</span>
<span class="token keyword">then</span>
 代码体1
<span class="token keyword">else</span>
 代码体2 
<span class="token keyword">fi</span>
</code></pre></div><p>5.3.2 判断是否目录</p> <p>isDir.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -t <span class="token number">10</span> -p <span class="token string">&quot;请输入一个路径&quot;</span> <span class="token function">dir</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -d <span class="token string">&quot;<span class="token variable">$dir</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$dir</span>是目录&quot;</span>
<span class="token keyword">else</span> 
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$dir</span>不是目录&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h4 id="_5-4-多分支if语句">5.4 多分支if语句</h4> <p>5.4.1 语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断1<span class="token punctuation">]</span>
<span class="token keyword">then</span>
 代码体1
<span class="token keyword">elif</span> <span class="token punctuation">[</span>条件判断2<span class="token punctuation">]</span> 
 代码体2
<span class="token keyword">else</span>
 代码体3
<span class="token keyword">fi</span>
</code></pre></div><p>grade.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入一个分数&quot;</span> grade
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$grade</span>&quot;</span> -gt <span class="token number">90</span> <span class="token punctuation">]</span>
 <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> 优秀
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$grade</span>&quot;</span> -gt <span class="token number">80</span> <span class="token punctuation">]</span>
  <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> 良
<span class="token keyword">else</span>
   <span class="token builtin class-name">echo</span> 差
<span class="token keyword">fi</span>
</code></pre></div><h4 id="_5-5-case-语句">5.5 case 语句</h4> <ul><li>case 和if 都是多分支判断语句,if能判断多个条件,case只能判断一个条件
5.5.1 语法</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">case</span> 变量名 <span class="token keyword">in</span> 
值1<span class="token punctuation">)</span>
  代码块1
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
值2<span class="token punctuation">)</span>
  代码块2
 <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
  代码块3
 <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><p>case.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;yes or no?&quot;</span> -t <span class="token number">30</span> choose
<span class="token keyword">case</span> <span class="token variable">$choose</span> <span class="token keyword">in</span> 
  <span class="token string">&quot;yes&quot;</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'是'</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token string">&quot;no&quot;</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;否&quot;</span>
   <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> 其它
   <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><h4 id="_5-6-for循环">5.6 for循环</h4> <p>5.6.1 语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> 变量 <span class="token keyword">in</span> 值1 值2 值3
<span class="token keyword">do</span>
代码块
<span class="token keyword">done</span>
</code></pre></div><p>for.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token keyword">do</span>
 <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>
</code></pre></div><p>5.6.2 语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash  </span>
<span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span>  
<span class="token keyword">do</span>   
 <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>$i<span class="token variable">))</span></span><span class="token punctuation">;</span>
<span class="token keyword">done</span> 
</code></pre></div><h4 id="_5-7-while循环">5.7 while循环</h4> <ul><li>while循环是不定循环，也称为条件循环，只要条件判断成立，就会一直继续</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span>条件判断式<span class="token punctuation">]</span>
<span class="token keyword">do</span>
 代码块
<span class="token keyword">done</span>
</code></pre></div><p>while.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -le <span class="token number">100</span> <span class="token punctuation">]</span>
 <span class="token keyword">do</span>
   <span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$result<span class="token operator">+</span>i<span class="token variable">))</span></span>
   <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
 <span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$result</span>
</code></pre></div><h4 id="_5-8-until循环">5.8 until循环</h4> <ul><li>直到条件不成立停止</li></ul> <p>until.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -gt <span class="token number">100</span> <span class="token punctuation">]</span>
 <span class="token keyword">do</span>
   <span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$result<span class="token operator">+</span>i<span class="token variable">))</span></span>
   <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
 <span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$result</span>
</code></pre></div><h3 id="_6-函数">6. 函数</h3> <ul><li>linux shell 可以用户定义函数，然后在shell脚本中可以随便调用</li> <li>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数</li> <li>调用函数不需要加()</li></ul> <h4 id="_6-1-简单函数">6.1 简单函数</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> <span class="token keyword">function</span> <span class="token punctuation">]</span> funcName <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span>
    action<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token operator">&gt;</span>  <span class="token builtin class-name">echo</span> start
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
 start
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token builtin class-name">echo</span> start
<span class="token punctuation">}</span>
start
</code></pre></div><h4 id="_6-2-返回值">6.2 返回值</h4> <ul><li>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function-name function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token operator">&gt;</span>  <span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$<span class="token number">1</span><span class="token operator">+</span>$<span class="token number">2</span><span class="token variable">))</span></span>
<span class="token operator">&gt;</span>  <span class="token builtin class-name">return</span> <span class="token variable">$result</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
sum4 <span class="token number">2</span> <span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">5</span>
</code></pre></div><h4 id="_6-3-参数说明">6.3 参数说明</h4> <table><thead><tr><th>参数处理</th> <th>说明</th></tr></thead> <tbody><tr><td>$#</td> <td>传递到脚本的参数个数</td></tr> <tr><td>$*</td> <td>以一个单字符串显示所有向脚本传递的参数</td></tr> <tr><td>$@</td> <td>与$*相同，但是使用时加引号，并在引号中返回每个参数</td></tr> <tr><td>$$</td> <td>脚本运行的当前进程ID号</td></tr> <tr><td>$?</td> <td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误</td></tr></tbody></table> <h3 id="_7-shell实战">7.shell实战</h3> <h4 id="_7-1-注意事项">7.1 注意事项</h4> <ul><li>开头加解释器: #/bin/bash和注释说明</li> <li>命名建议规则: 变量名大写、局部变量小写，函数名小写，名字体现出实际作用</li> <li>默认变量是全局的，在函数中变量local指定为局部变量，避免污染其它作用域</li> <li>set -e 遇到执行非0时退出脚本, set -x 打印执行过程</li> <li>写脚本一定要先测试再上生产环境</li></ul> <h4 id="_7-2-检查主机存活状态">7.2 检查主机存活状态</h4> <p>ip.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">IP</span> <span class="token keyword">in</span> <span class="token variable">$@</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">if</span> <span class="token function">ping</span> -c <span class="token number">1</span> <span class="token variable">$IP</span> <span class="token operator">&amp;&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
     <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$IP</span> is ok.&quot;</span>
  <span class="token keyword">else</span>
     <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$IP</span> is wrong!&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>  
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> ip.sh <span class="token number">127.0</span>.0.1
</code></pre></div></div></article> <section class="post-meta main-div" data-v-12a4d4fc><section class="post-date clearfix" data-v-12a4d4fc><span class="create-date" data-v-12a4d4fc>
      发布于 : 2016-02-20
    </span> <span class="update-date" data-v-12a4d4fc>
      修改于 : 2021-10-25
    </span></section> <section class="post-links" data-v-12a4d4fc><a href="/posts/2016/04/29/fe-optimization-guid.html" class="post-link" data-v-12a4d4fc>
      下一篇 : 前端优化指南
    </a> <a href="/posts/2015/08/22/linux.html" class="post-link" data-v-12a4d4fc>
      上一篇 : linux常用命令
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-0874e876><div class="info-card main-div" data-v-2bd66a30 data-v-0874e876><div class="info-card-header" data-v-2bd66a30><img src="https://www.mamingjuan.cn/assets/img/avatar.jpeg" alt="Glitr" class="info-avatar" data-v-2bd66a30></div> <div class="info-card-body" data-v-2bd66a30><section class="info-nickname" data-v-2bd66a30>
      Glitr
    </section> <section class="info-desc" data-v-2bd66a30>Enjoy coding,<br/>Enjoy life:)</section> <section class="info-contact" data-v-2bd66a30><section data-v-2bd66a30><span title="Beijing City, China" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Beijing City, China</title><use xlink:href="#icon-location" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Beijing City, China
        </span></span></section> <section data-v-2bd66a30><span title="Secrecy" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Secrecy</title><use xlink:href="#icon-organization" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Secrecy
        </span></span></section> <section data-v-2bd66a30><a href="mailto:glitteringma@gmail.com" title="glitteringma@gmail.com" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>glitteringma@gmail.com</title><use xlink:href="#icon-email" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          glitteringma@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-2bd66a30><section class="info-sns clearfix" data-v-2bd66a30><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-2bd66a30><span title="GitHub: glitzma" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-0874e876><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2016/02/20/linux-shell.html#shell相关知识">shell相关知识</a><ul><li><a href="/posts/2016/02/20/linux-shell.html#_1-shell基础">1. shell基础</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_2-变量">2. 变量</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_3-运算符">3. 运算符</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_4-环境变量配置文件">4. 环境变量配置文件</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_4-正则表达式">4.正则表达式</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_5-流程控制">5. 流程控制</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_6-函数">6. 函数</a></li><li><a href="/posts/2016/02/20/linux-shell.html#_7-shell实战">7.shell实战</a></li></ul></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2016/02/20/linux-shell.html#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-e3c69672><p class="sns-links" data-v-e3c69672><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-e3c69672><span title="GitHub: glitzma" class="sns-icon" data-v-e3c69672 data-v-e3c69672><svg class="icon" style="font-size:25px;" data-v-e3c69672 data-v-e3c69672><title data-v-e3c69672 data-v-e3c69672>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-e3c69672 data-v-e3c69672></use></svg></span></a></p> <div class="copyright" data-v-e3c69672>
    © 2014 –
    <span itemprop="copyrightYear" data-v-e3c69672>2021</span> <span class="post-meta-divider" data-v-e3c69672>|</span> <span itemprop="copyrightHolder" class="author" data-v-e3c69672>Glitr</span></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app~d0ae3f07.7b8c5199.js" defer></script><script src="/assets/js/9.d80ec364.js" defer></script><script src="/assets/js/18.3dee3f3b.js" defer></script><script src="/assets/js/app~db300d2f.ac6b7210.js" defer></script>
  </body>
</html>
