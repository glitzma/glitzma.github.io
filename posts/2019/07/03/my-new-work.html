<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Glitz&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This is my blog">
    
    <link rel="preload" href="/assets/css/0.styles.09a6d74c.css" as="style"><link rel="preload" href="/assets/js/app~d0ae3f07.09a6d74c.js" as="script"><link rel="preload" href="/assets/js/app~d939e436.8c4770b5.js" as="script"><link rel="preload" href="/assets/css/styles.1637cfe8.css" as="style"><link rel="preload" href="/assets/js/app~db300d2f.1637cfe8.js" as="script"><link rel="preload" href="/assets/css/10.styles.5446bb17.css" as="style"><link rel="preload" href="/assets/js/10.5446bb17.js" as="script"><link rel="preload" href="/assets/js/108.b370de23.js" as="script"><link rel="prefetch" href="/assets/css/11.styles.66e9ed27.css"><link rel="prefetch" href="/assets/css/3.styles.9b33e2df.css"><link rel="prefetch" href="/assets/css/4.styles.a937ccba.css"><link rel="prefetch" href="/assets/css/5.styles.fd484b24.css"><link rel="prefetch" href="/assets/css/6.styles.9c5ea3ff.css"><link rel="prefetch" href="/assets/css/7.styles.15f42b79.css"><link rel="prefetch" href="/assets/css/8.styles.2bd4dbe3.css"><link rel="prefetch" href="/assets/css/9.styles.b3b30d4a.css"><link rel="prefetch" href="/assets/js/100.44bc2772.js"><link rel="prefetch" href="/assets/js/101.af7e0421.js"><link rel="prefetch" href="/assets/js/102.97a5e2d3.js"><link rel="prefetch" href="/assets/js/103.5abb3b40.js"><link rel="prefetch" href="/assets/js/104.5014d2b5.js"><link rel="prefetch" href="/assets/js/105.5edc6baf.js"><link rel="prefetch" href="/assets/js/106.56c83ee8.js"><link rel="prefetch" href="/assets/js/107.bd8eb185.js"><link rel="prefetch" href="/assets/js/109.9931a16e.js"><link rel="prefetch" href="/assets/js/11.66e9ed27.js"><link rel="prefetch" href="/assets/js/110.41994b9f.js"><link rel="prefetch" href="/assets/js/111.81260691.js"><link rel="prefetch" href="/assets/js/112.4d00f8c1.js"><link rel="prefetch" href="/assets/js/113.4a4e30db.js"><link rel="prefetch" href="/assets/js/114.459a95f3.js"><link rel="prefetch" href="/assets/js/115.033aec11.js"><link rel="prefetch" href="/assets/js/116.4ebe2ae6.js"><link rel="prefetch" href="/assets/js/117.4d438551.js"><link rel="prefetch" href="/assets/js/118.712c30b6.js"><link rel="prefetch" href="/assets/js/119.00e1aed5.js"><link rel="prefetch" href="/assets/js/12.378da689.js"><link rel="prefetch" href="/assets/js/120.99314966.js"><link rel="prefetch" href="/assets/js/121.d762d71e.js"><link rel="prefetch" href="/assets/js/122.5b61fbf6.js"><link rel="prefetch" href="/assets/js/123.add6052a.js"><link rel="prefetch" href="/assets/js/124.618f6483.js"><link rel="prefetch" href="/assets/js/125.81f72832.js"><link rel="prefetch" href="/assets/js/126.797bca35.js"><link rel="prefetch" href="/assets/js/127.812cbb30.js"><link rel="prefetch" href="/assets/js/128.b78dd843.js"><link rel="prefetch" href="/assets/js/129.6a3682dd.js"><link rel="prefetch" href="/assets/js/13.7ef33237.js"><link rel="prefetch" href="/assets/js/130.6ad3e410.js"><link rel="prefetch" href="/assets/js/131.0f492c50.js"><link rel="prefetch" href="/assets/js/132.d18dcd36.js"><link rel="prefetch" href="/assets/js/133.914ab90a.js"><link rel="prefetch" href="/assets/js/134.40fe9ae8.js"><link rel="prefetch" href="/assets/js/135.7b54d782.js"><link rel="prefetch" href="/assets/js/136.18a774f0.js"><link rel="prefetch" href="/assets/js/137.db92cfcd.js"><link rel="prefetch" href="/assets/js/14.cca56f7f.js"><link rel="prefetch" href="/assets/js/15.efc915d0.js"><link rel="prefetch" href="/assets/js/16.a44e2a89.js"><link rel="prefetch" href="/assets/js/17.32f30a1c.js"><link rel="prefetch" href="/assets/js/18.ea283799.js"><link rel="prefetch" href="/assets/js/19.0b5fd50f.js"><link rel="prefetch" href="/assets/js/20.83d1ee8d.js"><link rel="prefetch" href="/assets/js/21.324683b3.js"><link rel="prefetch" href="/assets/js/22.e6ef130f.js"><link rel="prefetch" href="/assets/js/23.67ce971a.js"><link rel="prefetch" href="/assets/js/24.1ab1948f.js"><link rel="prefetch" href="/assets/js/25.1149f8df.js"><link rel="prefetch" href="/assets/js/26.965f3654.js"><link rel="prefetch" href="/assets/js/27.7c8fe92a.js"><link rel="prefetch" href="/assets/js/28.fa81275b.js"><link rel="prefetch" href="/assets/js/29.8b495f5c.js"><link rel="prefetch" href="/assets/js/3.9b33e2df.js"><link rel="prefetch" href="/assets/js/30.e76c5bb0.js"><link rel="prefetch" href="/assets/js/31.636ac573.js"><link rel="prefetch" href="/assets/js/32.37c6565d.js"><link rel="prefetch" href="/assets/js/33.ae056341.js"><link rel="prefetch" href="/assets/js/34.f71daf70.js"><link rel="prefetch" href="/assets/js/35.5f69ac95.js"><link rel="prefetch" href="/assets/js/36.dde1c806.js"><link rel="prefetch" href="/assets/js/37.cf269c7a.js"><link rel="prefetch" href="/assets/js/38.a755ec74.js"><link rel="prefetch" href="/assets/js/39.104b0a1b.js"><link rel="prefetch" href="/assets/js/4.a937ccba.js"><link rel="prefetch" href="/assets/js/40.2d334bb0.js"><link rel="prefetch" href="/assets/js/41.5f377c3f.js"><link rel="prefetch" href="/assets/js/42.0d714f30.js"><link rel="prefetch" href="/assets/js/43.1e801b20.js"><link rel="prefetch" href="/assets/js/44.ed7da3f2.js"><link rel="prefetch" href="/assets/js/45.c56904ed.js"><link rel="prefetch" href="/assets/js/46.4b0a521f.js"><link rel="prefetch" href="/assets/js/47.a4805399.js"><link rel="prefetch" href="/assets/js/48.f7d073a6.js"><link rel="prefetch" href="/assets/js/49.c81295f2.js"><link rel="prefetch" href="/assets/js/5.fd484b24.js"><link rel="prefetch" href="/assets/js/50.91a0673d.js"><link rel="prefetch" href="/assets/js/51.d4ea5b3d.js"><link rel="prefetch" href="/assets/js/52.f3fd5c12.js"><link rel="prefetch" href="/assets/js/53.4afa963c.js"><link rel="prefetch" href="/assets/js/54.118e2e92.js"><link rel="prefetch" href="/assets/js/55.2ce3f6d4.js"><link rel="prefetch" href="/assets/js/56.281f6721.js"><link rel="prefetch" href="/assets/js/57.eb700853.js"><link rel="prefetch" href="/assets/js/58.ded4a776.js"><link rel="prefetch" href="/assets/js/59.41bbf63b.js"><link rel="prefetch" href="/assets/js/6.9c5ea3ff.js"><link rel="prefetch" href="/assets/js/60.acedf498.js"><link rel="prefetch" href="/assets/js/61.f8509630.js"><link rel="prefetch" href="/assets/js/62.0f994cc3.js"><link rel="prefetch" href="/assets/js/63.b8c922e8.js"><link rel="prefetch" href="/assets/js/64.088ecad8.js"><link rel="prefetch" href="/assets/js/65.ad34bfe9.js"><link rel="prefetch" href="/assets/js/66.33a1b68b.js"><link rel="prefetch" href="/assets/js/67.d8cee5c8.js"><link rel="prefetch" href="/assets/js/68.329d4672.js"><link rel="prefetch" href="/assets/js/69.3ce04698.js"><link rel="prefetch" href="/assets/js/7.15f42b79.js"><link rel="prefetch" href="/assets/js/70.41ad8e8a.js"><link rel="prefetch" href="/assets/js/71.3df0fb50.js"><link rel="prefetch" href="/assets/js/72.fe8f5e7b.js"><link rel="prefetch" href="/assets/js/73.dc7ef3e6.js"><link rel="prefetch" href="/assets/js/74.95c8399c.js"><link rel="prefetch" href="/assets/js/75.f4417e59.js"><link rel="prefetch" href="/assets/js/76.1d4f48fa.js"><link rel="prefetch" href="/assets/js/77.9ec8d41d.js"><link rel="prefetch" href="/assets/js/78.5fe79ba7.js"><link rel="prefetch" href="/assets/js/79.e8224863.js"><link rel="prefetch" href="/assets/js/8.2bd4dbe3.js"><link rel="prefetch" href="/assets/js/80.35127c29.js"><link rel="prefetch" href="/assets/js/81.5a78dae2.js"><link rel="prefetch" href="/assets/js/82.6988d072.js"><link rel="prefetch" href="/assets/js/83.bc65f149.js"><link rel="prefetch" href="/assets/js/84.10c2ae28.js"><link rel="prefetch" href="/assets/js/85.25862a1a.js"><link rel="prefetch" href="/assets/js/86.722d3047.js"><link rel="prefetch" href="/assets/js/87.8ec1e67a.js"><link rel="prefetch" href="/assets/js/88.4e31fb80.js"><link rel="prefetch" href="/assets/js/89.65e06964.js"><link rel="prefetch" href="/assets/js/9.b3b30d4a.js"><link rel="prefetch" href="/assets/js/90.459d3608.js"><link rel="prefetch" href="/assets/js/91.e45251a5.js"><link rel="prefetch" href="/assets/js/92.6e766714.js"><link rel="prefetch" href="/assets/js/93.566140e1.js"><link rel="prefetch" href="/assets/js/94.e0807067.js"><link rel="prefetch" href="/assets/js/95.5a299f78.js"><link rel="prefetch" href="/assets/js/96.48592469.js"><link rel="prefetch" href="/assets/js/97.3e5563d7.js"><link rel="prefetch" href="/assets/js/98.48c76d3a.js"><link rel="prefetch" href="/assets/js/99.f4ee8cc2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.09a6d74c.css"><link rel="stylesheet" href="/assets/css/styles.1637cfe8.css"><link rel="stylesheet" href="/assets/css/10.styles.5446bb17.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-glitzma"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/assets/img/header-image-05.jpg);" data-v-e4a0ebe0><div data-v-6654f004 data-v-e4a0ebe0><nav class="navbar" data-v-6654f004><div class="container" data-v-6654f004><a href="/" class="router-link-active" data-v-6654f004><span class="navbar-site-name" data-v-6654f004>
          Glitz's Blog
        </span></a> <div class="navbar-toggler" data-v-6654f004><svg class="icon" style="font-size:1.2em;" data-v-6654f004 data-v-6654f004><title data-v-6654f004 data-v-6654f004>menu</title><use xlink:href="#icon-menu" data-v-6654f004 data-v-6654f004></use></svg></div> <div class="navbar-links" data-v-6654f004><a href="/" class="navbar-link" data-v-6654f004>
            欢迎页
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-6654f004>
            帖子
          </a><a href="/custom-pages/" class="navbar-link" data-v-6654f004>
            关于我
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-6654f004></div></div> <div class="banner" data-v-e2d7da12 data-v-e4a0ebe0 data-v-e4a0ebe0><div class="container" data-v-e2d7da12><div class="center" data-v-e2d7da12></div></div></div></header> <div class="container clearfix show-aside" data-v-0874e876 data-v-0874e876><main class="main" data-v-0874e876><div class="post" data-v-0874e876 data-v-0874e876><section class="post-meta main-div" data-v-7f7ca342><section class="post-date clearfix" data-v-7f7ca342><!----> <span class="update-date" data-v-7f7ca342>
      最后修改 : 2021-03-14
    </span></section> <section class="post-links" data-v-7f7ca342><!----> <a href="/posts/2019/06/22/read-1.html" class="post-link" data-v-7f7ca342>
      下一篇 : 经典语录
    </a></section></section> <article class="main-div"><div class="post-content content__default"><div><ul><li><a href="/posts/2019/07/03/my-new-work.html#_1-index-html中文件路径如何替换掉">1. index.html中文件路径如何替换掉</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_2-为什么连网错误的时候-编译后是错的">2. 为什么连网错误的时候，编译后是错的</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_3-怎么用到了service-worker">3.怎么用到了service-worker</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_4-路由那块是怎么嵌套的">4. 路由那块是怎么嵌套的？</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_5-环境的区分-写的很深">5. 环境的区分，写的很深</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_6-目录结构特点">6. 目录结构特点</a></li><li><a href="/posts/2019/07/03/my-new-work.html#immutable-learn">immutable learn</a></li><li><a href="/posts/2019/07/03/my-new-work.html#电脑无法上网">电脑无法上网</a></li><li><a href="/posts/2019/07/03/my-new-work.html#antd-样式问题">antd 样式问题</a></li><li><a href="/posts/2019/07/03/my-new-work.html#返回的数据大部分都没有唯一性">返回的数据大部分都没有唯一性</a></li></ul></div> <p>layout: post
title: &quot;第一天存在的问题&quot;
date: 2019-07-03
excerpt: &quot;入职第一天存在的问题&quot;
vssue-title: &quot;入职第一天存在的问题&quot;
category:  心情随笔</p> <h2 id="_1-index-html中文件路径如何替换掉"><a href="#_1-index-html中文件路径如何替换掉" class="header-anchor">#</a> 1. index.html中文件路径如何替换掉</h2> <h2 id="_2-为什么连网错误的时候-编译后是错的"><a href="#_2-为什么连网错误的时候-编译后是错的" class="header-anchor">#</a> 2. 为什么连网错误的时候，编译后是错的</h2> <p>应该与第一个问题有很大关联</p> <h2 id="_3-怎么用到了service-worker"><a href="#_3-怎么用到了service-worker" class="header-anchor">#</a> 3.怎么用到了service-worker</h2> <p>但是我没有发现有什么效果。好像只用到的图片还有首页，毕竟这只是一个但页面应用
（断网后我发现生效了）
后来我发现，项目引用了<a href="https://www.npmjs.com/package/register-service-worker" target="_blank" rel="noopener noreferrer">register-service-worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">registerValidSW</span> <span class="token punctuation">(</span><span class="token parameter">swUrl<span class="token punctuation">,</span> emit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>serviceWorker
    <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>swUrl<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'registered'</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>registration<span class="token punctuation">.</span>waiting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      registration<span class="token punctuation">.</span><span class="token function-variable function">onupdatefound</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updatefound'</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span>
        <span class="token keyword">var</span> installingWorker <span class="token operator">=</span> registration<span class="token punctuation">.</span>installing
        installingWorker<span class="token punctuation">.</span><span class="token function-variable function">onstatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>installingWorker<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'installed'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span>controller<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// At this point, the old content will have been purged and</span>
              <span class="token comment">// the fresh content will have been added to the cache.</span>
              <span class="token comment">// It's the perfect time to display a &quot;New content is</span>
              <span class="token comment">// available; please refresh.&quot; message in your web app.</span>
              <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// At this point, everything has been precached.</span>
              <span class="token comment">// It's the perfect time to display a</span>
              <span class="token comment">// &quot;Content is cached for offline use.&quot; message.</span>
              <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'cached'</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_4-路由那块是怎么嵌套的"><a href="#_4-路由那块是怎么嵌套的" class="header-anchor">#</a> 4. 路由那块是怎么嵌套的？</h2> <p>粗略的看了下，每个文件夹里面全有一个route。然后有个总的route各种拼接，并没有仔细看
http://localhost:8080/audit/auditManageWeb/
http://10.1.90.43/audit/auditManageWeb/modellab</p> <h2 id="_5-环境的区分-写的很深"><a href="#_5-环境的区分-写的很深" class="header-anchor">#</a> 5. 环境的区分，写的很深</h2> <p>为什么环境区分要写这么深？</p> <h2 id="_6-目录结构特点"><a href="#_6-目录结构特点" class="header-anchor">#</a> 6. 目录结构特点</h2> <div class="language- extra-class"><pre class="language-text"><code>auditManageWeb
├── public # 存放的东西一般情况下不会变更
├── src # 所有资源
│   ├── api # 存放的都是调取接口的函数
│   │   ├── xxx
│   │   │   ├── xxx.js
│   │   ...
│   ├── assets # 静态资源
│   │   ├── xxx
│   │   │   ├── xxx.js
│   │   ...
│   ├── components # Vuepress 目录
│   │   ├── xxx
│   │   │   ├── xxx.js
│   │   ...
│   ├── mock # mock数据
│   ├── plugins # 公共组件
│   │   ├── xxx
│   │   │   ├── xxx.js
│   │   ...
│   ├── store # vuex store
│   ├── utils # jsCookie
│   ├── views # 真正的模版全在这里
│   ├── app.vue # 主入口文件，有一个，头部通过变量判断
│   ├── axios.js # axios封装，统一处理
│   ├── main.js # Vuepress 目录
│   ├── permission.js # 权限控制
│   ├── registerServiceWorker.js # service worker
│   ├── router.js # 路由汇总
│   │   └── config.js # Vuepress 配置文件
│   └── _posts # 博客文件夹
│
└── package.json
</code></pre></div><h2 id="immutable-learn"><a href="#immutable-learn" class="header-anchor">#</a> immutable learn</h2> <p>2019-07-11 diary</p> <p><a href="https://immutable-js.github.io/immutable-js/" target="_blank" rel="noopener noreferrer">immutable文档地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>保持数据的唯一性，这种数据流模型与react体系结构很吻合，特别是与使用flux思想设计的应用程序非常吻合。</p> <p>我今天遇到的问题是，axios返回的数据全被 formJS转换成了map类型。导致我无法操作数据。</p> <p>如果state.merge时候不加List，immutable会把数组转换成map</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">'./constants'</span><span class="token punctuation">;</span> <span class="token comment">// 获取常量（方便用的时候修改，避免冲突）</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 对象操作Immutable Data 就是一旦创建，就不能再被更改的数据。对 Immutable 对象的任何修改或添加删除操作都会返回一个新的 Immutable 对象。Immutable 实现的原理是 Persistent Data Structure（持久化数据结构），也就是使用旧数据创建新数据时，要保证旧数据同时可用且不变。同时为了避免 deepCopy 把所有节点都复制一遍带来的性能损耗，Immutable 使用了Structural Sharing（结构共享），即如果对象树中一个节点发生变化，只修改这个节点和受它影响的父节点，其它节点则进行共享。</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 设置默认值为了避免空的时候出现问题</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> constants<span class="token punctuation">.</span><span class="token constant">TREE_DATA</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        content<span class="token operator">:</span> <span class="token function">List</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>content<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">注意事项</p> <p>javascript 在用对象的时候还需要转换Converts back to raw JavaScript objects.</p></div> <p>All Immutable.js Collections can be converted to plain JavaScript Arrays and Objects shallowly with toArray() and toObject() or deeply with toJS(). All Immutable Collections also implement toJSON() allowing them to be passed to JSON.stringify directly. They also respect the custom toJSON() methods of nested objects.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Map<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'immutable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> deep <span class="token operator">=</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deep<span class="token punctuation">.</span><span class="token function">toObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2, c: List [ 3, 4, 5 ] }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deep<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, List [ 3, 4, 5 ] ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deep<span class="token punctuation">.</span><span class="token function">toJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2, c: [ 3, 4, 5 ] }</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>deep<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '{&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:[3,4,5]}'</span>
</code></pre></div><h2 id="电脑无法上网"><a href="#电脑无法上网" class="header-anchor">#</a> 电脑无法上网</h2> <p>指定ip走固定网关</p> <p>sudo route add  10.1.90.0/46 10.1.90.1</p> <h2 id="antd-样式问题"><a href="#antd-样式问题" class="header-anchor">#</a> antd 样式问题</h2> <p>2019-07-16</p> <p>引入antd后，没有样式，解决方案</p> <ol><li>引入babel-plugin-import(推荐)</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
<span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span> 
        <span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span><span class="token punctuation">,</span>  
        <span class="token string">&quot;react-hot-loader/babel&quot;</span><span class="token punctuation">,</span> 
      <span class="token punctuation">[</span><span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="返回的数据大部分都没有唯一性"><a href="#返回的数据大部分都没有唯一性" class="header-anchor">#</a> 返回的数据大部分都没有唯一性</h2> <p>在antd中解决方案。</p> <p>在table表中需要加入</p> <div class="language-$xslt extra-class"><pre class="language-text"><code>// 比如你的数据主键是 uid
return &lt;Table rowKey=&quot;uid&quot; /&gt;;
// 或
return &lt;Table rowKey={record =&gt; record.uid} /&gt;;

rowKey={(record, index) =&gt; `complete${record.id}${index}` }
</code></pre></div><p>1、&lt;div key={+new Date() + Math.random()}&gt;</p> <p>2、使用数组的索引</p> <p>3、使用uuid：https://www.npmjs.com/package/uuid</p> <p>4、使用uniqid：https://www.npmjs.com/package/uniqid</p> <p>5、Date.now()</p> <p>在tree中node也是有key的，我通过记录父级id来做为key，解决的key不唯一问题</p></div></article> <section class="post-meta main-div" data-v-7f7ca342><section class="post-date clearfix" data-v-7f7ca342><!----> <span class="update-date" data-v-7f7ca342>
      最后修改 : 2021-03-14
    </span></section> <section class="post-links" data-v-7f7ca342><!----> <a href="/posts/2019/06/22/read-1.html" class="post-link" data-v-7f7ca342>
      下一篇 : 经典语录
    </a></section></section> <!----></div></main> <aside class="aside" data-v-0874e876><div class="info-card main-div" data-v-2bd66a30 data-v-0874e876><div class="info-card-header" data-v-2bd66a30><img src="https://blog.mamingjuan.cn/assets/images/avator.jpeg" alt="Glitz" class="info-avatar" data-v-2bd66a30></div> <div class="info-card-body" data-v-2bd66a30><section class="info-nickname" data-v-2bd66a30>
      Glitz
    </section> <section class="info-desc" data-v-2bd66a30>生命如此短暂<br>去扩展生命的宽度<br>去经历、去体验</section> <section class="info-contact" data-v-2bd66a30><section data-v-2bd66a30><span title="Beijing City, China" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Beijing City, China</title><use xlink:href="#icon-location" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Beijing City, China
        </span></span></section> <section data-v-2bd66a30><span title="Secrecy" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Secrecy</title><use xlink:href="#icon-organization" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Secrecy
        </span></span></section> <section data-v-2bd66a30><a href="mailto:glitteringma@gmail.com" title="glitteringma@gmail.com" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>glitteringma@gmail.com</title><use xlink:href="#icon-email" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          glitteringma@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-2bd66a30><section class="info-sns clearfix" data-v-2bd66a30><a href="https://github.com/glitzma" target="_blank" class="sns-link" data-v-2bd66a30><span title="GitHub: glitzma" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-2bd66a30><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-2bd66a30><span title="Instagram: glitz9558" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-0874e876><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2019/07/03/my-new-work.html#_1-index-html中文件路径如何替换掉">1. index.html中文件路径如何替换掉</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_2-为什么连网错误的时候-编译后是错的">2. 为什么连网错误的时候，编译后是错的</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_3-怎么用到了service-worker">3.怎么用到了service-worker</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_4-路由那块是怎么嵌套的">4. 路由那块是怎么嵌套的？</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_5-环境的区分-写的很深">5. 环境的区分，写的很深</a></li><li><a href="/posts/2019/07/03/my-new-work.html#_6-目录结构特点">6. 目录结构特点</a></li><li><a href="/posts/2019/07/03/my-new-work.html#immutable-learn">immutable learn</a></li><li><a href="/posts/2019/07/03/my-new-work.html#电脑无法上网">电脑无法上网</a></li><li><a href="/posts/2019/07/03/my-new-work.html#antd-样式问题">antd 样式问题</a></li><li><a href="/posts/2019/07/03/my-new-work.html#返回的数据大部分都没有唯一性">返回的数据大部分都没有唯一性</a></li></ul></div></div> <!----></div></aside></div> <footer class="footer" data-v-e361d3ee><p class="sns-links" data-v-e361d3ee><a href="https://github.com/glitzma" target="_blank" class="sns-link" data-v-e361d3ee><span title="GitHub: glitzma" class="sns-icon" data-v-e361d3ee data-v-e361d3ee><svg class="icon" style="font-size:25px;" data-v-e361d3ee data-v-e361d3ee><title data-v-e361d3ee data-v-e361d3ee>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-e361d3ee data-v-e361d3ee></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-e361d3ee><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-e361d3ee data-v-e361d3ee><svg class="icon" style="font-size:25px;" data-v-e361d3ee data-v-e361d3ee><title data-v-e361d3ee data-v-e361d3ee>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-e361d3ee data-v-e361d3ee></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-e361d3ee><span title="Instagram: glitz9558" class="sns-icon" data-v-e361d3ee data-v-e361d3ee><svg class="icon" style="font-size:25px;" data-v-e361d3ee data-v-e361d3ee><title data-v-e361d3ee data-v-e361d3ee>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-e361d3ee data-v-e361d3ee></use></svg></span></a></p> <p data-v-e361d3ee><span data-v-e361d3ee>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-e361d3ee>
      Vuepress
    </a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app~d0ae3f07.09a6d74c.js" defer></script><script src="/assets/js/10.5446bb17.js" defer></script><script src="/assets/js/108.b370de23.js" defer></script><script src="/assets/js/app~d939e436.8c4770b5.js" defer></script><script src="/assets/js/app~db300d2f.1637cfe8.js" defer></script>
  </body>
</html>
