<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nodejs学习日记1 | Glitz&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="This is my blog">
    <link rel="preload" href="/assets/css/3.styles.d6647b00.css" as="style"><link rel="preload" href="/assets/js/app~d0ae3f07.d6647b00.js" as="script"><link rel="preload" href="/assets/js/app~f5fb4fe9.69b09b32.js" as="script"><link rel="preload" href="/assets/css/4.styles.5411f99e.css" as="style"><link rel="preload" href="/assets/js/app~e6f35b87.5411f99e.js" as="script"><link rel="preload" href="/assets/css/0.styles.8ce061c8.css" as="style"><link rel="preload" href="/assets/js/app~020089fc.8ce061c8.js" as="script"><link rel="preload" href="/assets/js/app~5b934d93.cdb59387.js" as="script"><link rel="preload" href="/assets/js/app~1fa79e77.aacbe6a4.js" as="script"><link rel="preload" href="/assets/css/13.styles.60b61243.css" as="style"><link rel="preload" href="/assets/js/13.60b61243.js" as="script"><link rel="preload" href="/assets/js/20.4b59fa74.js" as="script"><link rel="prefetch" href="/assets/css/10.styles.6ef9b481.css"><link rel="prefetch" href="/assets/css/11.styles.cd151aa5.css"><link rel="prefetch" href="/assets/css/12.styles.219902b7.css"><link rel="prefetch" href="/assets/css/14.styles.205a555b.css"><link rel="prefetch" href="/assets/css/6.styles.1401b3bf.css"><link rel="prefetch" href="/assets/css/7.styles.95dd0d3b.css"><link rel="prefetch" href="/assets/css/8.styles.14379f56.css"><link rel="prefetch" href="/assets/css/9.styles.52a9c2bc.css"><link rel="prefetch" href="/assets/js/10.6ef9b481.js"><link rel="prefetch" href="/assets/js/100.ebf9aa71.js"><link rel="prefetch" href="/assets/js/101.7611b4c7.js"><link rel="prefetch" href="/assets/js/102.093d54ae.js"><link rel="prefetch" href="/assets/js/103.f9693130.js"><link rel="prefetch" href="/assets/js/104.82aa4a81.js"><link rel="prefetch" href="/assets/js/105.5d18e983.js"><link rel="prefetch" href="/assets/js/106.350e4559.js"><link rel="prefetch" href="/assets/js/107.9f1a3d84.js"><link rel="prefetch" href="/assets/js/108.b9bbb8ae.js"><link rel="prefetch" href="/assets/js/109.c6389968.js"><link rel="prefetch" href="/assets/js/11.cd151aa5.js"><link rel="prefetch" href="/assets/js/110.cb0d0a07.js"><link rel="prefetch" href="/assets/js/111.93d39c6b.js"><link rel="prefetch" href="/assets/js/112.5d895ae5.js"><link rel="prefetch" href="/assets/js/113.a7ed2e95.js"><link rel="prefetch" href="/assets/js/114.8bc83ae2.js"><link rel="prefetch" href="/assets/js/115.e61c2a3a.js"><link rel="prefetch" href="/assets/js/116.152672b1.js"><link rel="prefetch" href="/assets/js/117.5eed3c24.js"><link rel="prefetch" href="/assets/js/118.fca0dfaa.js"><link rel="prefetch" href="/assets/js/119.bdb11f4f.js"><link rel="prefetch" href="/assets/js/12.219902b7.js"><link rel="prefetch" href="/assets/js/120.191697c4.js"><link rel="prefetch" href="/assets/js/14.205a555b.js"><link rel="prefetch" href="/assets/js/15.1f67dc7a.js"><link rel="prefetch" href="/assets/js/16.0dedac70.js"><link rel="prefetch" href="/assets/js/17.44edd460.js"><link rel="prefetch" href="/assets/js/18.07e5f719.js"><link rel="prefetch" href="/assets/js/19.c31b7058.js"><link rel="prefetch" href="/assets/js/21.c90bed9d.js"><link rel="prefetch" href="/assets/js/22.a45126e2.js"><link rel="prefetch" href="/assets/js/23.53679038.js"><link rel="prefetch" href="/assets/js/24.5bf639fc.js"><link rel="prefetch" href="/assets/js/25.83a00a4d.js"><link rel="prefetch" href="/assets/js/26.e8c77f43.js"><link rel="prefetch" href="/assets/js/27.79738e83.js"><link rel="prefetch" href="/assets/js/28.afe3ea3c.js"><link rel="prefetch" href="/assets/js/29.d01a4362.js"><link rel="prefetch" href="/assets/js/30.387d3dac.js"><link rel="prefetch" href="/assets/js/31.5858576d.js"><link rel="prefetch" href="/assets/js/32.b8bfd3b4.js"><link rel="prefetch" href="/assets/js/33.bf61dc62.js"><link rel="prefetch" href="/assets/js/34.3243a259.js"><link rel="prefetch" href="/assets/js/35.1c8ffb1b.js"><link rel="prefetch" href="/assets/js/36.cecf2cb5.js"><link rel="prefetch" href="/assets/js/37.b6ed9971.js"><link rel="prefetch" href="/assets/js/38.b98fb13b.js"><link rel="prefetch" href="/assets/js/39.001f8656.js"><link rel="prefetch" href="/assets/js/40.89e5bcb8.js"><link rel="prefetch" href="/assets/js/41.4f04b6ed.js"><link rel="prefetch" href="/assets/js/42.122f02b0.js"><link rel="prefetch" href="/assets/js/43.3a8d78dd.js"><link rel="prefetch" href="/assets/js/44.381b1661.js"><link rel="prefetch" href="/assets/js/45.db47fa79.js"><link rel="prefetch" href="/assets/js/46.b2eb6baf.js"><link rel="prefetch" href="/assets/js/47.5a5bdfe6.js"><link rel="prefetch" href="/assets/js/48.8b1e7cd4.js"><link rel="prefetch" href="/assets/js/49.981a34c4.js"><link rel="prefetch" href="/assets/js/50.384f71b4.js"><link rel="prefetch" href="/assets/js/51.2739866e.js"><link rel="prefetch" href="/assets/js/52.283f3051.js"><link rel="prefetch" href="/assets/js/53.5e455d76.js"><link rel="prefetch" href="/assets/js/54.fbc941c1.js"><link rel="prefetch" href="/assets/js/55.dcb80710.js"><link rel="prefetch" href="/assets/js/56.dfd6d9e7.js"><link rel="prefetch" href="/assets/js/57.fc31b4a4.js"><link rel="prefetch" href="/assets/js/58.0706e55b.js"><link rel="prefetch" href="/assets/js/59.f0d12657.js"><link rel="prefetch" href="/assets/js/6.1401b3bf.js"><link rel="prefetch" href="/assets/js/60.e3681c00.js"><link rel="prefetch" href="/assets/js/61.43dc6db3.js"><link rel="prefetch" href="/assets/js/62.2b28e8dc.js"><link rel="prefetch" href="/assets/js/63.2ae27278.js"><link rel="prefetch" href="/assets/js/64.45619f2f.js"><link rel="prefetch" href="/assets/js/65.81932fa2.js"><link rel="prefetch" href="/assets/js/66.6a9c234e.js"><link rel="prefetch" href="/assets/js/67.89370f8c.js"><link rel="prefetch" href="/assets/js/68.a5c1de65.js"><link rel="prefetch" href="/assets/js/69.119c53c0.js"><link rel="prefetch" href="/assets/js/7.95dd0d3b.js"><link rel="prefetch" href="/assets/js/70.4b67b3e8.js"><link rel="prefetch" href="/assets/js/71.fd635cb1.js"><link rel="prefetch" href="/assets/js/72.29dc7c4c.js"><link rel="prefetch" href="/assets/js/73.389ba0b2.js"><link rel="prefetch" href="/assets/js/74.9f8adbfd.js"><link rel="prefetch" href="/assets/js/75.7859b789.js"><link rel="prefetch" href="/assets/js/76.71a49c99.js"><link rel="prefetch" href="/assets/js/77.976aed44.js"><link rel="prefetch" href="/assets/js/78.a7f5f581.js"><link rel="prefetch" href="/assets/js/79.222d7d32.js"><link rel="prefetch" href="/assets/js/8.14379f56.js"><link rel="prefetch" href="/assets/js/80.0e90cd6d.js"><link rel="prefetch" href="/assets/js/81.9b0268b9.js"><link rel="prefetch" href="/assets/js/82.8ce8b377.js"><link rel="prefetch" href="/assets/js/83.c91c6a93.js"><link rel="prefetch" href="/assets/js/84.6576e150.js"><link rel="prefetch" href="/assets/js/85.22b40e27.js"><link rel="prefetch" href="/assets/js/86.8e97056f.js"><link rel="prefetch" href="/assets/js/87.d7c9527b.js"><link rel="prefetch" href="/assets/js/88.7300f624.js"><link rel="prefetch" href="/assets/js/89.625cf258.js"><link rel="prefetch" href="/assets/js/9.52a9c2bc.js"><link rel="prefetch" href="/assets/js/90.ac89bf0c.js"><link rel="prefetch" href="/assets/js/91.a95c8ad9.js"><link rel="prefetch" href="/assets/js/92.dc078596.js"><link rel="prefetch" href="/assets/js/93.b92abfca.js"><link rel="prefetch" href="/assets/js/94.60bb51b9.js"><link rel="prefetch" href="/assets/js/95.38597730.js"><link rel="prefetch" href="/assets/js/96.3268464d.js"><link rel="prefetch" href="/assets/js/97.03eea958.js"><link rel="prefetch" href="/assets/js/98.e43f18b3.js"><link rel="prefetch" href="/assets/js/99.c843e939.js">
    <link rel="stylesheet" href="/assets/css/3.styles.d6647b00.css"><link rel="stylesheet" href="/assets/css/4.styles.5411f99e.css"><link rel="stylesheet" href="/assets/css/0.styles.8ce061c8.css"><link rel="stylesheet" href="/assets/css/13.styles.60b61243.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-glitzma"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/assets/img/header-image-04.jpg);" data-v-3f3db384><div data-v-b4dad2a8 data-v-3f3db384><nav class="navbar" data-v-b4dad2a8><div class="container" data-v-b4dad2a8><a href="/" class="router-link-active" data-v-b4dad2a8><span class="navbar-site-name" data-v-b4dad2a8>
          Glitz's Blog
        </span></a> <div class="navbar-toggler" data-v-b4dad2a8><svg class="icon" style="font-size:1.2em;" data-v-b4dad2a8 data-v-b4dad2a8><title data-v-b4dad2a8 data-v-b4dad2a8>menu</title><use xlink:href="#icon-menu" data-v-b4dad2a8 data-v-b4dad2a8></use></svg></div> <div class="navbar-links" data-v-b4dad2a8><a href="/" class="navbar-link" data-v-b4dad2a8>
            欢迎页
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-b4dad2a8>
            帖子
          </a><a href="/custom-pages/" class="navbar-link" data-v-b4dad2a8>
            关于我
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-b4dad2a8></div></div> <div class="banner" data-v-326ec989 data-v-3f3db384 data-v-3f3db384><div class="container" data-v-326ec989><div class="center" data-v-326ec989></div></div></div></header> <div class="container clearfix show-aside" data-v-95212552 data-v-95212552><main class="main" data-v-95212552><div class="post" data-v-95212552 data-v-95212552><section class="post-meta main-div" data-v-46cf7320><section class="post-date clearfix" data-v-46cf7320><span class="create-date" data-v-46cf7320>
      发布时间 : 2015-04-23
    </span> <span class="update-date" data-v-46cf7320>
      最后修改 : 2020-08-14
    </span></section> <section class="post-links" data-v-46cf7320><a href="/posts/2015/03/19/url-uri.html" class="post-link" data-v-46cf7320>
      上一篇 : URI 和 URL
    </a> <a href="/posts/2015/04/26/learn-node2.html" class="post-link" data-v-46cf7320>
      下一篇 : nodejs学习日记2
    </a></section></section> <article class="main-div"><div class="post-content content__default"><h2 id="repl-交互式解释器"><a href="#repl-交互式解释器" class="header-anchor">#</a> REPL(交互式解释器)</h2> <p>Node.js REPL(Read Eval Print Loop:交互式解释器) 表示一个电脑的环境，类似 Window 系统的终端或 Unix/Linux shell，我们可以在终端中输入命令，并接收系统的响应。
Node 自带了交互式解释器，可以执行以下任务：</p> <ul><li>读取 - 读取用户输入，解析输入了Javascript 数据结构并存储在内存中。</li> <li>执行 - 执行输入的数据结构</li> <li>打印 - 输出结果</li> <li>循环 - 循环操作以上步骤直到用户两次按下 ctrl-c 按钮退出。</li></ul> <p>Node 的交互式解释器可以很好的调试 Javascript 代码。
开始学习 REPL
我们可以输入以下命令来启动 Node 的终端：</p> <div class="language- extra-class"><pre class="language-text"><code>$ node
&gt;
</code></pre></div><p>这时我们就可以在 &gt; 后输入简单的表达式，并按下回车键来计算结果。</p> <h5 id="简单的表达式运算"><a href="#简单的表达式运算" class="header-anchor">#</a> 简单的表达式运算</h5> <p>接下来让我们在 Node.js REPL 的命令行窗口中执行简单的数学运算：</p> <div class="language- extra-class"><pre class="language-text"><code>$ node
&gt; 1 +4
5
&gt; 5 / 2
2.5
&gt; 3 * 6
18
&gt; 4 - 1
3
&gt; 1 + ( 2 * 3 ) - 4
3
&gt;
</code></pre></div><h5 id="使用变量"><a href="#使用变量" class="header-anchor">#</a> 使用变量</h5> <p>你可以将数据存储在变量中，并在你需要的时候使用它。
变量声明需要使用 var 关键字，如果没有使用 var 关键字变量会直接打印出来。
使用 var 关键字的变量可以使用 console.log() 来输出变量。</p> <div class="language- extra-class"><pre class="language-text"><code>$ node
&gt; x = 10
10
&gt; var y = 10
undefined
&gt; x + y
20
&gt; console.log(&quot;Hello World&quot;)
Hello World
undefined
&gt; console.log(&quot;www.runoob.com&quot;)
www.runoob.com
undefined
</code></pre></div><h5 id="多行表达式"><a href="#多行表达式" class="header-anchor">#</a> 多行表达式</h5> <p>Node REPL 支持输入多行表达式，这就有点类似 JavaScript。接下来让我们来执行一个 do-while 循环：</p> <div class="language- extra-class"><pre class="language-text"><code>$ node
&gt; var x = 0
undefined
&gt; do {
... x++;
... console.log(&quot;x: &quot; + x);
... } while ( x &lt; 5 );
x: 1
x: 2
x: 3
x: 4
x: 5
undefined
&gt;
</code></pre></div><p>... 三个点的符号是系统自动生成的，你回车换行后即可。Node 会自动检测是否为连续的表达式。</p> <h5 id="下划线-变量"><a href="#下划线-变量" class="header-anchor">#</a> 下划线(_)变量</h5> <p>你可以使用下划线(_)获取上一个表达式的运算结果：</p> <div class="language- extra-class"><pre class="language-text"><code>$ node
&gt; var x = 10
undefined
&gt; var y = 20
undefined
&gt; x + y
30
&gt; var sum = _
undefined
&gt; console.log(sum)
30
undefined
&gt;
</code></pre></div><h5 id="repl-命令"><a href="#repl-命令" class="header-anchor">#</a> REPL 命令</h5> <p>ctrl + c - 退出当前终端。
ctrl + c 按下两次 - 退出 Node REPL。
ctrl + d - 退出 Node REPL.
向上/向下 键 - 查看输入的历史命令
tab 键 - 列出当前命令
.help - 列出使用命令
.break - 退出多行表达式
.clear - 退出多行表达式
.save filename - 保存当前的 Node REPL 会话到指定文件
.load filename - 载入当前 Node REPL 会话的文件内容。</p> <h2 id="控制台"><a href="#控制台" class="header-anchor">#</a> 控制台</h2> <p>保存日志的方法</p> <div class="language- extra-class"><pre class="language-text"><code>node x.console.log.js &gt; 1.log
</code></pre></div><p>node app 1&gt;app.log 2&gt;&amp;1 或者 1&gt;app.log 2&gt;app.err</p> <p>日志重定向</p> <h5 id="new-console-stdout-stderr"><a href="#new-console-stdout-stderr" class="header-anchor">#</a> new Console(stdout[, stderr])#</h5> <ul><li>stdout &lt;stream.Writable&gt;</li> <li>stderr &lt;stream.Writable&gt;
Creates a new Console with one or two writable stream instances. stdout is a writable stream to print log or info output. stderr is used for warning or error output. If stderr is not provided, stdout is used for stderr.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>const output = fs.createWriteStream('./stdout.log');
const errorOutput = fs.createWriteStream('./stderr.log');
// custom simple logger
const logger = new Console(output, errorOutput);
// use it like console
const count = 5;
logger.log('count: %d', count);
// in stdout.log: count 5
</code></pre></div><p>The global console is a special Console whose output is sent to process.stdout and process.stderr. It is equivalent to calling:</p> <div class="language- extra-class"><pre class="language-text"><code>new Console(process.stdout, process.stderr);
</code></pre></div><h5 id="console-count-label"><a href="#console-count-label" class="header-anchor">#</a> console.count([label])#</h5> <p>Added in: v8.3.0</p> <ul><li>label <code>&lt;string&gt;</code> The display label for the counter. Defaults to 'default'.
Maintains an internal counter specific to label and outputs to stdout the number of times console.count() has been called with the given label.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&gt; console.count()
default: 1
undefined
&gt; console.count('default')
default: 2
undefined
&gt; console.count('abc')
abc: 1
undefined
&gt; console.count('xyz')
xyz: 1
undefined
&gt; console.count('abc')
abc: 2
undefined
&gt; console.count()
default: 3
undefined
&gt;
</code></pre></div><h5 id="console-dir-obj-options"><a href="#console-dir-obj-options" class="header-anchor">#</a> console.dir(obj[, options])#</h5> <p>Added in: v0.1.101</p> <ul><li>obj <code>&lt;any&gt;</code></li> <li>options <code>&lt;Object&gt;</code> <ul><li>showHidden <code>&lt;boolean&gt;</code></li> <li>depth <code>&lt;number&gt;</code></li> <li>colors <code>&lt;boolean&gt;</code>
Uses util.inspect() on obj and prints the resulting string to stdout. This function bypasses any custom inspect() function defined on obj. An optional options object may be passed to alter certain aspects of the formatted string:</li></ul></li></ul> <p>showHidden - if true then the object's non-enumerable and symbol properties will be shown too. Defaults to false.</p> <p>depth - tells util.inspect() how many times to recurse while formatting the object. This is useful for inspecting large complicated objects. Defaults to 2. To make it recurse indefinitely, pass null.</p> <p>colors - if true, then the output will be styled with ANSI color codes. Defaults to false. Colors are customizable; see customizing util.inspect() colors.</p> <p><a href="https://nodejs.org/api/console.html#console_console_clear" target="_blank" rel="noopener noreferrer">参考网站<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre class="language-text"><code>// 一:页面代码
console.log(&quot;log信息&quot;);
//在页面中执行(node app.js)这个文件会在控制台中看到log信息:&quot;log信息&quot;
//换个方式执行:node app.js 1&gt;info.txt(1代表重定向标准输出流);
//这个时候会在app.js的同级目录下看到一个info.txt文件,里面还有&quot;log信息&quot;.
//二:依次序输出所有字符串
console.log(&quot;%s&quot;,&quot;first&quot;,&quot;second&quot;);
//输出结果:first second
//三.将对象转换为普通字符串后执行
console.log(&quot;%s&quot;,&quot;guoyansi&quot;,{name:&quot;思思博士&quot;});
//输出结果:guoyansi { name: '思思博士' }
//四:
//将字符串作为数值进行转换
console.log(&quot;%d&quot;,&quot;25.6&quot;);
//输出结果:25.6
console.log(&quot;%d&quot;,&quot;guoyansi&quot;);
//输出结果:guoyansi
//五  输出%
console.log(&quot;%%&quot;);
//输出结果:%
console.log(&quot;%%&quot;,&quot;gys&quot;);
//输出结果:% gys
//六 将console.error信息输出到文件中去
//页面代码:
console.error(&quot;guoyansi is error&quot;);
//利用node app.js 2&gt;err.txt启动这个页面
//会在同级目录下多一个err.txt文件.文件里面还有&quot;guoyansi is error&quot;
//七 直接在命令行启动一个并不存在的文件javascript.js,这样:
// node javascript.js 2&gt;info.txt
//输出结果:会在命令行所在的目录下多出一个文件info.txt;
//info.txt文件中的内容如下
/*
 module.js:340
 throw err;
 ^
 Error: Cannot find module 'E:\node\gys\javascript.js'
 at Function.Module._resolveFilename (module.js:338:15)
 at Function.Module._load (module.js:280:25)
 at Function.Module.runMain (module.js:497:10)
 at startup (node.js:119:16)
 at node.js:906:3
 */
//八:console.warn的用法和console.error()用法一样
//九:console.time()和console.timeEnd()输出中间代码的执行时间(注意:time和timeEnd的参数必须完全一致)
console.time(&quot;for循环的时间:&quot;)
var a=0;
for(var i=0;i&lt;10000000000000;i++){
    a++;
}
console.timeEnd(&quot;for循环的时间:&quot;)
/*
 * 10.console.trace()方法将当前位置处的栈信息作为标准错误信息进行输出.
 *  */
var obj={
    name:&quot;guoyansi&quot;,
    age:23,
    eat:function(){}
}
console.trace(obj);
//输出结果:
</code></pre></div><h2 id="缓存区buffer"><a href="#缓存区buffer" class="header-anchor">#</a> 缓存区Buffer</h2> <p>JavaScript 语言自身只有字符串数据类型，没有二进制数据类型。
但在处理像TCP流或文件流时，必须使用到二进制数据。因此在 Node.js中，定义了一个 Buffer 类，该类用来创建一个专门存放二进制数据的缓存区。
在 Node.js 中，Buffer 类是随 Node 内核一起发布的核心库。Buffer 库为 Node.js 带来了一种存储原始数据的方法，可以让 Node.js 处理二进制数据，每当需要在 Node.js 中处理I/O操作中移动的数据时，就有可能使用 Buffer 库。原始数据存储在 Buffer 类的实例中。一个 Buffer 类似于一个整数数组，但它对应于 V8 堆内存之外的一块原始内存。</p> <div class="language- extra-class"><pre class="language-text"><code>var bf1 = new Buffer(&quot;a&quot;)
var bf2 = new Buffer(&quot;b&quot;)
var bf3 = new Buffer(&quot;c&quot;)
var r = Buffer.concat([bf1,bf2,bf3])
console.log(r)
r.toString()

</code></pre></div><h4 id="创建-buffer-类"><a href="#创建-buffer-类" class="header-anchor">#</a> 创建 Buffer 类</h4> <ul><li>Buffer 提供了以下 API 来创建 Buffer 类：</li> <li>Buffer.alloc(size[, fill[, encoding]])： 返回一个指定大小的 Buffer 实例，如果没有设置 fill，则默认填满 0</li> <li>Buffer.allocUnsafe(size)： 返回一个指定大小的 Buffer 实例，但是它不会被初始化，所以它可能包含敏感的数据</li> <li>Buffer.allocUnsafeSlow(size)</li> <li>Buffer.from(array)： 返回一个被 array 的值初始化的新的 Buffer 实例（传入的 array 的元素只能是数字，不然就会自动被 0 覆盖）</li> <li>Buffer.from(arrayBuffer[, byteOffset[, length]])： 返回一个新建的与给定的 ArrayBuffer 共享同一内存的 Buffer。</li> <li>Buffer.from(buffer)： 复制传入的 Buffer 实例的数据，并返回一个新的 Buffer 实例</li> <li>Buffer.from(string[, encoding])： 返回一个被 string 的值初始化的新的 Buffer 实例</li></ul> <p>Node.js 目前支持的字符编码包括：</p> <ul><li>ascii - 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的。</li> <li>utf8 - 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8 。</li> <li>utf16le - 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）。</li> <li>ucs2 - utf16le 的别名。</li> <li>base64 - Base64 编码。</li> <li>latin1 - 一种把 Buffer 编码成一字节编码的字符串的方式。</li> <li>binary - latin1 的别名。</li> <li>hex - 将每个字节编码为两个十六进制字符。</li></ul> <h5 id="写入缓冲区"><a href="#写入缓冲区" class="header-anchor">#</a> 写入缓冲区</h5> <h6 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h6> <p>写入 Node 缓冲区的语法如下所示：
buf.write(string[, offset[, length]][, encoding])</p> <h6 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h6> <p>参数描述如下：</p> <ul><li>string - 写入缓冲区的字符串。</li> <li>offset - 缓冲区开始写入的索引值，默认为 0 。</li> <li>length - 写入的字节数，默认为 buffer.length</li> <li>encoding - 使用的编码。默认为 'utf8' 。</li></ul> <p>根据 encoding 的字符编码写入 string 到 buf 中的 offset 位置。 length 参数是写入的字节数。 如果 buf 没有足够的空间保存整个字符串，则只会写入 string 的一部分。 只部分解码的字符不会被写入。</p> <h6 id="返回值"><a href="#返回值" class="header-anchor">#</a> 返回值</h6> <p>返回实际写入的大小。如果 buffer 空间不足， 则只会写入部分字符串。</p> <div class="language- extra-class"><pre class="language-text"><code>buf = Buffer.alloc(256);
len = buf.write(&quot;www.runoob.com&quot;);

console.log(&quot;写入字节数 : &quot;+  len);
</code></pre></div><h5 id="缓冲区读取数据"><a href="#缓冲区读取数据" class="header-anchor">#</a> 缓冲区读取数据</h5> <h6 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h6> <p>读取 Node 缓冲区数据的语法如下所示：
buf.toString([encoding[, start[, end]]])</p> <h6 id="参数-2"><a href="#参数-2" class="header-anchor">#</a> 参数</h6> <p>参数描述如下：</p> <ul><li>encoding - 使用的编码。默认为 'utf8' 。</li> <li>start - 指定开始读取的索引位置，默认为 0。</li> <li>end - 结束位置，默认为缓冲区的末尾。</li></ul> <h6 id="返回值-2"><a href="#返回值-2" class="header-anchor">#</a> 返回值</h6> <p>解码缓冲区数据并使用指定的编码返回字符串。</p> <p><a href="http://www.runoob.com/nodejs/nodejs-buffer.html" target="_blank" rel="noopener noreferrer">参考文档Node.js Buffer(缓冲区)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="模块和包"><a href="#模块和包" class="header-anchor">#</a> 模块和包</h2> <p>代码运行时会变成</p> <div class="language- extra-class"><pre class="language-text"><code>function(exports,require,module,__filename,__dirname){
var sum = function(a,b){
return a + b;
}
exports.sum = sum;
return module.exports;
}
</code></pre></div><p>//exports 默认导出对象
//require 是加载其它模块的方法
//module代表当前的模块对象module.exports
//__filename 是当前模块的绝对路径
//_dirname 是当前模块的绝对目录</p> <p>代码块的引用</p> <div class="language- extra-class"><pre class="language-text"><code>var sum = require(&quot;sum&quot;);

// 查找模块  会在当前目录的node_modules目录中查找sum文件夹 里面的index.js
// 也可以在package.json 中设置main 来指定文件地址
// 放置到node_modules中比指定路径会更加灵活

console.log(sum(1,2));
console.log(__filename);
console.log(__dirname);
</code></pre></div><h2 id="内置模块"><a href="#内置模块" class="header-anchor">#</a> 内置模块</h2> <p>内置模块很多，<a href="https://nodejs.org/dist/latest-v8.x/docs/api/" target="_blank" rel="noopener noreferrer">具体参考v8文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="内置模块fs"><a href="#内置模块fs" class="header-anchor">#</a> 内置模块fs</h4> <h6 id="文件模块方法参考手册"><a href="#文件模块方法参考手册" class="header-anchor">#</a> 文件模块方法参考手册</h6> <div class="language- extra-class"><pre class="language-text"><code>序号	方法 &amp; 描述
1	fs.rename(oldPath, newPath, callback)
异步 rename().回调函数没有参数，但可能抛出异常。
2	fs.ftruncate(fd, len, callback)
异步 ftruncate().回调函数没有参数，但可能抛出异常。
3	fs.ftruncateSync(fd, len)
同步 ftruncate()
4	fs.truncate(path, len, callback)
异步 truncate().回调函数没有参数，但可能抛出异常。
5	fs.truncateSync(path, len)
同步 truncate()
6	fs.chown(path, uid, gid, callback)
异步 chown().回调函数没有参数，但可能抛出异常。
7	fs.chownSync(path, uid, gid)
同步 chown()
8	fs.fchown(fd, uid, gid, callback)
异步 fchown().回调函数没有参数，但可能抛出异常。
9	fs.fchownSync(fd, uid, gid)
同步 fchown()
10	fs.lchown(path, uid, gid, callback)
异步 lchown().回调函数没有参数，但可能抛出异常。
11	fs.lchownSync(path, uid, gid)
同步 lchown()
12	fs.chmod(path, mode, callback)
异步 chmod().回调函数没有参数，但可能抛出异常。
13	fs.chmodSync(path, mode)
同步 chmod().
14	fs.fchmod(fd, mode, callback)
异步 fchmod().回调函数没有参数，但可能抛出异常。
15	fs.fchmodSync(fd, mode)
同步 fchmod().
16	fs.lchmod(path, mode, callback)
异步 lchmod().回调函数没有参数，但可能抛出异常。Only available on Mac OS X.
17	fs.lchmodSync(path, mode)
同步 lchmod().
18	fs.stat(path, callback)
异步 stat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。
19	fs.lstat(path, callback)
异步 lstat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。
20	fs.fstat(fd, callback)
异步 fstat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。
21	fs.statSync(path)
同步 stat(). 返回 fs.Stats 的实例。
22	fs.lstatSync(path)
同步 lstat(). 返回 fs.Stats 的实例。
23	fs.fstatSync(fd)
同步 fstat(). 返回 fs.Stats 的实例。
24	fs.link(srcpath, dstpath, callback)
异步 link().回调函数没有参数，但可能抛出异常。
25	fs.linkSync(srcpath, dstpath)
同步 link().
26	fs.symlink(srcpath, dstpath[, type], callback)
异步 symlink().回调函数没有参数，但可能抛出异常。 type 参数可以设置为 'dir', 'file', 或 'junction' (默认为 'file') 。
27	fs.symlinkSync(srcpath, dstpath[, type])
同步 symlink().
28	fs.readlink(path, callback)
异步 readlink(). 回调函数有两个参数 err, linkString。
29	fs.realpath(path[, cache], callback)
异步 realpath(). 回调函数有两个参数 err, resolvedPath。
30	fs.realpathSync(path[, cache])
同步 realpath()。返回绝对路径。
31	fs.unlink(path, callback)
异步 unlink().回调函数没有参数，但可能抛出异常。
32	fs.unlinkSync(path)
同步 unlink().
33	fs.rmdir(path, callback)
异步 rmdir().回调函数没有参数，但可能抛出异常。
34	fs.rmdirSync(path)
同步 rmdir().
35	fs.mkdir(path[, mode], callback)
S异步 mkdir(2).回调函数没有参数，但可能抛出异常。 mode defaults to 0777.
36	fs.mkdirSync(path[, mode])
同步 mkdir().
37	fs.readdir(path, callback)
异步 readdir(3). 读取目录的内容。
38	fs.readdirSync(path)
同步 readdir().返回文件数组列表。
39	fs.close(fd, callback)
异步 close().回调函数没有参数，但可能抛出异常。
40	fs.closeSync(fd)
同步 close().
41	fs.open(path, flags[, mode], callback)
异步打开文件。
42	fs.openSync(path, flags[, mode])
同步 version of fs.open().
43	fs.utimes(path, atime, mtime, callback)

44	fs.utimesSync(path, atime, mtime)
修改文件时间戳，文件通过指定的文件路径。
45	fs.futimes(fd, atime, mtime, callback)

46	fs.futimesSync(fd, atime, mtime)
修改文件时间戳，通过文件描述符指定。
47	fs.fsync(fd, callback)
异步 fsync.回调函数没有参数，但可能抛出异常。
48	fs.fsyncSync(fd)
同步 fsync.
49	fs.write(fd, buffer, offset, length[, position], callback)
将缓冲区内容写入到通过文件描述符指定的文件。
50	fs.write(fd, data[, position[, encoding]], callback)
通过文件描述符 fd 写入文件内容。
51	fs.writeSync(fd, buffer, offset, length[, position])
同步版的 fs.write()。
52	fs.writeSync(fd, data[, position[, encoding]])
同步版的 fs.write().
53	fs.read(fd, buffer, offset, length, position, callback)
通过文件描述符 fd 读取文件内容。
54	fs.readSync(fd, buffer, offset, length, position)
同步版的 fs.read.
55	fs.readFile(filename[, options], callback)
异步读取文件内容。
56	fs.readFileSync(filename[, options])
57	fs.writeFile(filename, data[, options], callback)
异步写入文件内容。
58	fs.writeFileSync(filename, data[, options])
同步版的 fs.writeFile。
59	fs.appendFile(filename, data[, options], callback)
异步追加文件内容。
60	fs.appendFileSync(filename, data[, options])
The 同步 version of fs.appendFile.
61	fs.watchFile(filename[, options], listener)
查看文件的修改。
62	fs.unwatchFile(filename[, listener])
停止查看 filename 的修改。
63	fs.watch(filename[, options][, listener])
查看 filename 的修改，filename 可以是文件或目录。返回 fs.FSWatcher 对象。
64	fs.exists(path, callback)
检测给定的路径是否存在。
65	fs.existsSync(path)
同步版的 fs.exists.
66	fs.access(path[, mode], callback)
测试指定路径用户权限。
67	fs.accessSync(path[, mode])
同步版的 fs.access。
68	fs.createReadStream(path[, options])
返回ReadStream 对象。
69	fs.createWriteStream(path[, options])
返回 WriteStream 对象。
70	fs.symlink(srcpath, dstpath[, type], callback)
异步 symlink().回调函数没有参数，但可能抛出异常。
</code></pre></div><p><a href="http://www.runoob.com/nodejs/nodejs-fs.html" target="_blank" rel="noopener noreferrer">参考文档 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="内置模块path"><a href="#内置模块path" class="header-anchor">#</a> 内置模块path</h4> <p><a href="https://nodejs.org/dist/latest-v8.x/docs/api/path.html" target="_blank" rel="noopener noreferrer">参考文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h2> <p>例：</p> <div class="language- extra-class"><pre class="language-text"><code>var EventEmitter = require('events');
var em = new EventEmitter();
function teacher(){
   console.log('老师进教室');
}
function student(){
    console.log('学生进教室');
}
em.addListener('bell',teacher);
em.on('bell',);
em.emit('bell');

//on 与 addListener功能是一样的。on 是addListener的别名。
//once 是只执行一次 触发后会被移除

em.setMax

</code></pre></div><p><a href="https://nodejs.org/dist/latest-v8.x/docs/api/events.html" target="_blank" rel="noopener noreferrer">参考文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></article> <section class="post-meta main-div" data-v-46cf7320><section class="post-date clearfix" data-v-46cf7320><span class="create-date" data-v-46cf7320>
      发布时间 : 2015-04-23
    </span> <span class="update-date" data-v-46cf7320>
      最后修改 : 2020-08-14
    </span></section> <section class="post-links" data-v-46cf7320><a href="/posts/2015/03/19/url-uri.html" class="post-link" data-v-46cf7320>
      上一篇 : URI 和 URL
    </a> <a href="/posts/2015/04/26/learn-node2.html" class="post-link" data-v-46cf7320>
      下一篇 : nodejs学习日记2
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-95212552><div class="info-card main-div" data-v-267dc25e data-v-95212552><div class="info-card-header" data-v-267dc25e><img src="https://blog.mamingjuan.cn/assets/images/favicon-16.ico" alt="glitzma" class="info-avatar" data-v-267dc25e></div> <div class="info-card-body" data-v-267dc25e><section class="info-nickname" data-v-267dc25e>
      glitzma
    </section> <section class="info-desc" data-v-267dc25e>Happy Coding<br/>Happy Life</section> <section class="info-contact" data-v-267dc25e><section data-v-267dc25e><span title="Beijing City, China" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>Beijing City, China</title><use xlink:href="#icon-location" data-v-267dc25e data-v-267dc25e></use></svg><span class="info-text" data-v-267dc25e data-v-267dc25e>
          Beijing City, China
        </span></span></section> <section data-v-267dc25e><span title="Secrecy" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>Secrecy</title><use xlink:href="#icon-organization" data-v-267dc25e data-v-267dc25e></use></svg><span class="info-text" data-v-267dc25e data-v-267dc25e>
          Secrecy
        </span></span></section> <section data-v-267dc25e><a href="mailto:glitteringma@gmail.com" title="glitteringma@gmail.com" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>glitteringma@gmail.com</title><use xlink:href="#icon-email" data-v-267dc25e data-v-267dc25e></use></svg><span class="info-text" data-v-267dc25e data-v-267dc25e>
          glitteringma@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-267dc25e><section class="info-sns clearfix" data-v-267dc25e><a href="https://github.com/glitzma" target="_blank" class="sns-link" data-v-267dc25e><span title="GitHub: glitzma" class="sns-icon" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1.5em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-267dc25e data-v-267dc25e></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-267dc25e><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1.5em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-267dc25e data-v-267dc25e></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-267dc25e><span title="Instagram: glitz9558" class="sns-icon" data-v-267dc25e data-v-267dc25e><svg class="icon" style="font-size:1.5em;" data-v-267dc25e data-v-267dc25e><title data-v-267dc25e data-v-267dc25e>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-267dc25e data-v-267dc25e></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-95212552><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2015/04/23/learn-node.html#repl-交互式解释器">REPL(交互式解释器)</a></li><li><a href="/posts/2015/04/23/learn-node.html#控制台">控制台</a></li><li><a href="/posts/2015/04/23/learn-node.html#缓存区buffer">缓存区Buffer</a></li><li><a href="/posts/2015/04/23/learn-node.html#模块和包">模块和包</a></li><li><a href="/posts/2015/04/23/learn-node.html#内置模块">内置模块</a></li><li><a href="/posts/2015/04/23/learn-node.html#事件">事件</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2015/04/23/learn-node.html#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-657edd1b><p class="sns-links" data-v-657edd1b><a href="https://github.com/glitzma" target="_blank" class="sns-link" data-v-657edd1b><span title="GitHub: glitzma" class="sns-icon" data-v-657edd1b data-v-657edd1b><svg class="icon" style="font-size:25px;" data-v-657edd1b data-v-657edd1b><title data-v-657edd1b data-v-657edd1b>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-657edd1b data-v-657edd1b></use></svg></span></a><a href="https://twitter.com/x0BKGuGTNoqZ0F7" target="_blank" class="sns-link" data-v-657edd1b><span title="Twitter: x0BKGuGTNoqZ0F7" class="sns-icon" data-v-657edd1b data-v-657edd1b><svg class="icon" style="font-size:25px;" data-v-657edd1b data-v-657edd1b><title data-v-657edd1b data-v-657edd1b>Twitter: x0BKGuGTNoqZ0F7</title><use xlink:href="#icon-twitter" data-v-657edd1b data-v-657edd1b></use></svg></span></a><a href="https://www.instagram.com/glitz9558/?hl=en" target="_blank" class="sns-link" data-v-657edd1b><span title="Instagram: glitz9558" class="sns-icon" data-v-657edd1b data-v-657edd1b><svg class="icon" style="font-size:25px;" data-v-657edd1b data-v-657edd1b><title data-v-657edd1b data-v-657edd1b>Instagram: glitz9558</title><use xlink:href="#icon-instagram" data-v-657edd1b data-v-657edd1b></use></svg></span></a></p> <p data-v-657edd1b><span data-v-657edd1b>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-657edd1b>
      Vuepress
    </a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app~d0ae3f07.d6647b00.js" defer></script><script src="/assets/js/13.60b61243.js" defer></script><script src="/assets/js/20.4b59fa74.js" defer></script><script src="/assets/js/app~f5fb4fe9.69b09b32.js" defer></script><script src="/assets/js/app~e6f35b87.5411f99e.js" defer></script><script src="/assets/js/app~020089fc.8ce061c8.js" defer></script><script src="/assets/js/app~5b934d93.cdb59387.js" defer></script><script src="/assets/js/app~1fa79e77.aacbe6a4.js" defer></script>
  </body>
</html>
