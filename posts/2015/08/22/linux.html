<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>linux常用命令 | 马明娟</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="This is my blog">
    
    <link rel="preload" href="/assets/css/2.styles.4f687fc7.css" as="style"><link rel="preload" href="/assets/js/app~748942c6.4f687fc7.js" as="script"><link rel="preload" href="/assets/css/1.styles.de89d32b.css" as="style"><link rel="preload" href="/assets/js/app~2a42e354.de89d32b.js" as="script"><link rel="preload" href="/assets/css/styles.d6fa771c.css" as="style"><link rel="preload" href="/assets/js/app~1f20a385.d6fa771c.js" as="script"><link rel="preload" href="/assets/css/10.styles.685e93e4.css" as="style"><link rel="preload" href="/assets/js/10.685e93e4.js" as="script"><link rel="preload" href="/assets/js/17.af41a430.js" as="script"><link rel="prefetch" href="/assets/css/11.styles.db3fb87b.css"><link rel="prefetch" href="/assets/css/3.styles.2479901d.css"><link rel="prefetch" href="/assets/css/4.styles.14853dcd.css"><link rel="prefetch" href="/assets/css/5.styles.510e7b60.css"><link rel="prefetch" href="/assets/css/6.styles.3df49180.css"><link rel="prefetch" href="/assets/css/7.styles.4b781894.css"><link rel="prefetch" href="/assets/css/8.styles.40feba35.css"><link rel="prefetch" href="/assets/css/9.styles.2f72d411.css"><link rel="prefetch" href="/assets/js/11.db3fb87b.js"><link rel="prefetch" href="/assets/js/12.e1359aa3.js"><link rel="prefetch" href="/assets/js/13.f1d238b7.js"><link rel="prefetch" href="/assets/js/14.da55c5a9.js"><link rel="prefetch" href="/assets/js/15.7ca5d99c.js"><link rel="prefetch" href="/assets/js/16.d3d55c31.js"><link rel="prefetch" href="/assets/js/18.59e89df1.js"><link rel="prefetch" href="/assets/js/19.5c466036.js"><link rel="prefetch" href="/assets/js/20.103a21d0.js"><link rel="prefetch" href="/assets/js/21.a1f3d9ef.js"><link rel="prefetch" href="/assets/js/22.c2dc2fae.js"><link rel="prefetch" href="/assets/js/23.022bbf8d.js"><link rel="prefetch" href="/assets/js/24.093bcba7.js"><link rel="prefetch" href="/assets/js/25.2462f25e.js"><link rel="prefetch" href="/assets/js/26.a09c0d41.js"><link rel="prefetch" href="/assets/js/27.a555fe9c.js"><link rel="prefetch" href="/assets/js/28.84ebcd51.js"><link rel="prefetch" href="/assets/js/29.58c20ca7.js"><link rel="prefetch" href="/assets/js/3.2479901d.js"><link rel="prefetch" href="/assets/js/30.5cd1972d.js"><link rel="prefetch" href="/assets/js/31.17ca6a57.js"><link rel="prefetch" href="/assets/js/32.fa5e4013.js"><link rel="prefetch" href="/assets/js/33.afac0f5b.js"><link rel="prefetch" href="/assets/js/34.761eee2c.js"><link rel="prefetch" href="/assets/js/35.f185b2bd.js"><link rel="prefetch" href="/assets/js/36.ac572cd7.js"><link rel="prefetch" href="/assets/js/37.7183c761.js"><link rel="prefetch" href="/assets/js/38.9ac94c8b.js"><link rel="prefetch" href="/assets/js/39.84208d30.js"><link rel="prefetch" href="/assets/js/4.14853dcd.js"><link rel="prefetch" href="/assets/js/40.4bc5db5f.js"><link rel="prefetch" href="/assets/js/41.91cfa597.js"><link rel="prefetch" href="/assets/js/42.9bb7ebd8.js"><link rel="prefetch" href="/assets/js/43.bf636f06.js"><link rel="prefetch" href="/assets/js/44.73aa6872.js"><link rel="prefetch" href="/assets/js/45.51742f48.js"><link rel="prefetch" href="/assets/js/46.bc43e973.js"><link rel="prefetch" href="/assets/js/47.c93a7b2c.js"><link rel="prefetch" href="/assets/js/48.403485c3.js"><link rel="prefetch" href="/assets/js/49.f5a70972.js"><link rel="prefetch" href="/assets/js/5.510e7b60.js"><link rel="prefetch" href="/assets/js/50.0aa99d00.js"><link rel="prefetch" href="/assets/js/51.d78456ea.js"><link rel="prefetch" href="/assets/js/52.a67d5dd8.js"><link rel="prefetch" href="/assets/js/6.3df49180.js"><link rel="prefetch" href="/assets/js/7.4b781894.js"><link rel="prefetch" href="/assets/js/8.40feba35.js"><link rel="prefetch" href="/assets/js/9.2f72d411.js">
    <link rel="stylesheet" href="/assets/css/2.styles.4f687fc7.css"><link rel="stylesheet" href="/assets/css/1.styles.de89d32b.css"><link rel="stylesheet" href="/assets/css/styles.d6fa771c.css"><link rel="stylesheet" href="/assets/css/10.styles.685e93e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-glitzma"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/assets/img/header-image-03.jpg);" data-v-e4a0ebe0><div data-v-6654f004 data-v-e4a0ebe0><nav class="navbar" data-v-6654f004><div class="container" data-v-6654f004><a href="/" class="router-link-active" data-v-6654f004><span class="navbar-site-name" data-v-6654f004>
          马明娟
        </span></a> <div class="navbar-toggler" data-v-6654f004><svg class="icon" style="font-size:1.2em;" data-v-6654f004 data-v-6654f004><title data-v-6654f004 data-v-6654f004>menu</title><use xlink:href="#icon-menu" data-v-6654f004 data-v-6654f004></use></svg></div> <div class="navbar-links" data-v-6654f004><a href="/" class="navbar-link" data-v-6654f004>
            Home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-6654f004>
            Search
          </a><a href="/custom-pages/" class="navbar-link" data-v-6654f004>
            About
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-6654f004></div></div> <div class="banner" data-v-e2d7da12 data-v-e4a0ebe0 data-v-e4a0ebe0><div class="container" data-v-e2d7da12><div class="center" data-v-e2d7da12></div></div></div></header> <div class="container clearfix show-aside" data-v-0874e876 data-v-0874e876><main class="main" data-v-0874e876><div class="post" data-v-0874e876 data-v-0874e876><section class="post-meta main-div" data-v-12a4d4fc><section class="post-date clearfix" data-v-12a4d4fc><span class="create-date" data-v-12a4d4fc>
      发布于 : 2015-08-22
    </span> <span class="update-date" data-v-12a4d4fc>
      修改于 : 2022-03-12
    </span></section> <section class="post-links" data-v-12a4d4fc><a href="/posts/2016/02/20/linux-shell.html" class="post-link" data-v-12a4d4fc>
      下一篇 : shell基础知识
    </a> <a href="/posts/2015/04/29/http.html" class="post-link" data-v-12a4d4fc>
      上一篇 : HTTP协议详解
    </a></section></section> <article class="main-div"><div class="post-content content__default"><h2 id="linux基础及文件">Linux基础及文件</h2> <ul><li>Linux是一套免费使用和自由传播的类Unix操作系统</li> <li>在服务器端领域和嵌入式领域有非常广泛的应用</li></ul> <h4 id="_2-版本">2.版本</h4> <p>分为内核版本和发型版本</p> <ul><li>kernel</li> <li>各个厂商会制作自己的发行版本
<ul><li>redhat</li> <li>CentOS</li> <li>ubuntu</li> <li>fedora</li></ul></li></ul> <h4 id="_3-linux与windows的不同">3. Linux与Windows的不同</h4> <ul><li>Linux严格区分大小写</li> <li>Linux中所有的内容以文件形式保存，包括硬件、用户和文件。</li> <li>Linux不靠扩展名区分文件类型，是靠权限来区分，但是有一些约定的扩展名，是给管理员看的
<ul><li>压缩包 .gz .bz2 .tar.bz2 .tgz</li> <li>二进制文件 .rpm</li> <li>网页文件 .html .php</li> <li>脚本文件 .sh</li> <li>配置文件 .conf</li></ul></li> <li>Windows下的程序不能直接在Linux中安装和运行</li> <li>Linux更多使用字符界面
<ul><li>占用的系统资源更少</li> <li>减少了出错和被攻击的可能性，会让系统更稳定</li></ul></li></ul> <p>如何购买服务器</p> <ul><li>阿里云 ECS</li> <li>亚马逊 AWS</li> <li>百度云</li></ul> <h6 id="_4-连接服务器">4. 连接服务器</h6> <ul><li>git bash</li> <li>mac shell</li> <li>xshell4</li> <li>xftp4</li></ul> <h5 id="_5-分区">5. 分区</h5> <p>磁盘分区是使用分区编辑器在磁盘上划分几个逻辑部分<br>
磁盘一旦划分成多个分区，不同类的目录与文件可以存储进不同的分区内</p> <h5 id="_6-挂载点">6. 挂载点</h5> <ul><li>为了让Linux系统中可以访问这些分区，需要把这些分区挂载到对应的目录上</li> <li>在Linux中是把目录称为挂载点</li> <li>把目录和分区链接在一起的过程成为挂载</li> <li>/为根目录，必须挂载到一个分区上，默认所有子目录都会写入这个分区</li> <li>同一级目录下面的所有子目录可以有自己的独立存储空间</li> <li>必须有的分区
<ul><li>/ 根分区</li> <li>swap分区(交换分区，虚拟内存，一般为内存的2倍，不要超过2G)</li></ul></li> <li>推荐分区
<ul><li>/boot (启动分区,200M) 单独分区，避免分区写满造成系统无法启动</li></ul></li></ul> <h2 id="linux常用命令">linux常用命令</h2> <h3 id="_1-目录">1. 目录</h3> <table><thead><tr><th>目录</th> <th>用途</th></tr></thead> <tbody><tr><td>/</td> <td>根目录</td></tr> <tr><td>/boot</td> <td>启动目录，启动相关文件</td></tr> <tr><td>/dev</td> <td>设备文件</td></tr> <tr><td>/etc</td> <td>配置文件</td></tr> <tr><td>/home</td> <td>普通用户的家目录,可以操作</td></tr> <tr><td>/lib</td> <td>系统库保存目录</td></tr> <tr><td>/mnt</td> <td>移动设备挂载目录</td></tr> <tr><td>/media</td> <td>光盘挂载目录</td></tr> <tr><td>/misc</td> <td>磁带机挂载目录</td></tr> <tr><td>/root</td> <td>超级用户的家目录,可以操作</td></tr> <tr><td>/tmp</td> <td>临时目录,可以操作</td></tr> <tr><td>/proc</td> <td>正在运行的内核信息映射, 主要输出进程信息、内存资源信息和磁盘分区信息等等</td></tr> <tr><td>/sys</td> <td>硬件设备的驱动程序信息</td></tr> <tr><td>/var</td> <td>变量</td></tr> <tr><td>/bin</td> <td>普通的基本命令，如ls,chmod等,一般的用户也都可以使用</td></tr> <tr><td>/sbin</td> <td>基本的系统命令，如shutdown，reboot，用于启动系统，修复系统,只有管理员才可以运行</td></tr> <tr><td>/usr/bin</td> <td>是你在后期安装的一些软件的运行脚本</td></tr> <tr><td>/usr/sbin</td> <td>放置一些用户安装的系统管理的必备程序</td></tr></tbody></table> <h4 id="_1-2-命令基本格式">1.2 命令基本格式</h4> <h5 id="_1-2-1-命令提示符">1.2.1 命令提示符</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre></div><ul><li>root 当前登录用户</li> <li>localhost 主机名</li> <li>~ 当前工作目录,默认是当前用户的家目录，root就是/root,普通用户是 /home/用户名</li> <li>提示符 超级用户是 #,普通用户是$</li></ul> <h5 id="_1-2-2-命令格式">1.2.2 命令格式</h5> <ul><li>命令 [选项] [参数]</li> <li>当有多个选项时，可以写在一起</li> <li>一般参数有简化和完整写法两种 -a 与 --all等效</li></ul> <h5 id="_1-2-3-ls">1.2.3 ls</h5> <ul><li>查询目录中的内容</li> <li>ls [选项] [文件或者目录]</li> <li>选项
<ul><li>-a 显示所有文件，包括隐藏文件</li> <li>-l 显示详细信息</li> <li>-d 查看目录本身的属性而非子文件 ls /etc/</li> <li>-h 人性化的方式显示文件大小</li> <li>-i 显示inode,也就是i节点，每个节点都有ID号</li></ul></li> <li>默认当前目录下的文件列表</li></ul> <h6 id="_1-2-3-1-l">1.2.3.1 -l</h6> <p>显示详细信息</p> <div class="language-shell extra-class"><pre class="language-shell"><code>drwxr-xr-x <span class="token builtin class-name">.</span>  <span class="token number">1</span> root  root   <span class="token number">800</span> Sep <span class="token number">16</span> 00:19 logs
</code></pre></div><table><thead><tr><th>drwxr-xr-x</th> <th>.</th> <th>1</th> <th>root</th> <th>root</th> <th>800</th> <th>Sep 16 00:19</th> <th>logs</th></tr></thead> <tbody><tr><td>文件类型和权限</td> <td>ACL权限</td> <td>硬链接引用计数</td> <td>所有者</td> <td>所属组</td> <td>文件大小</td> <td>最后修改时间</td> <td>文件名</td></tr></tbody></table> <h6 id="_1-2-3-2-文件类型和权限">1.2.3.2 文件类型和权限</h6> <div class="language- extra-class"><pre class="language-text"><code>-rw-r--r--
</code></pre></div><ul><li>文件类型 - 文件、d 目录、l 软链接文件</li> <li>u(所有者)、g(所属组)、o(其他人)</li> <li>r(read) 读取、w(write) 写入、x(execute) 执行</li></ul> <h4 id="_1-3-文件处理命令">1.3 文件处理命令</h4> <h5 id="_1-3-1-mkdir">1.3.1 mkdir</h5> <ul><li>建立目录 make directory</li> <li>mkdir -p [目录名]
<ul><li>-p 递归创建</li></ul></li></ul> <h5 id="_1-3-2-cd">1.3.2 cd</h5> <ul><li>切换所在目录 change directory</li> <li>cd [目录]
<ul><li>~ 家目录</li> <li>家目录</li> <li>上次目录</li> <li>. 当前目录</li> <li>.. 上级目录</li></ul></li> <li>相对路径是参照当前所在目录</li> <li>绝对路径是从根目录开始</li> <li>按TAB键可以补全命令和目录</li></ul> <h5 id="_1-3-3-pwd">1.3.3 pwd</h5> <ul><li>显示当前目录 pwd</li></ul> <h5 id="_1-3-4-rmdir">1.3.4 rmdir</h5> <ul><li>删除目录 remove empty directory</li> <li>rmdir [目录名]</li></ul> <h4 id="_1-3-5-rm">1.3.5 rm</h4> <ul><li>删除文件或者目录 remove</li> <li>rm [文件或者目录]
<ul><li>-r 删除目录</li> <li>-f 强制删除</li></ul></li> <li>rm -rf 文件或者目录] 递归强制删除所有目录</li></ul> <h5 id="_1-3-6-cp">1.3.6 cp</h5> <ul><li>copy 复制命令</li> <li>copy [源文件或者目录] [目标文件]
<ul><li>-r 复制目录,默认是复制文件</li> <li>-p 连带文件属性复制</li> <li>-d 若源文件是链接文件，则复制连接属性</li> <li>-a 相当于 -rpd</li></ul></li></ul> <h5 id="_1-3-7-mv">1.3.7 mv</h5> <ul><li>移动文件或者改名 move</li> <li>mv [源文件或者目录] [目标文件]</li></ul> <p>当第二个参数类型是文件时，mv命令完成文件重命名，它将所给的源文件或目录重命名为给定的目标文件名。<br>
当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。在跨文件系统移动文件时，mv先拷贝，再将原有文件删除，而链至该文件的链接也将丢失。</p> <div class="language- extra-class"><pre class="language-text"><code># 将webdata 移动到/bin/usr/中
mv  webdata  /bin/usr/

# 将 /usr/lib/下所有的东西移到/zone/中。
mv    /usr/lib/*    /zone


# 是将lib下以txt结尾的所有文件移到/zone中。
mv    /usr/lib/*.txt    /zone

# 将文件temp.txt 修改名字为tempTest.txt
mv   temp.txt  tempTest.txt

</code></pre></div><p><code>[options]</code>主要参数(几个重要的参数)<br> <code>-i</code>：交互方式操作。如果mv操作将导致对已存在的目标文件的覆盖，此时系统询问是否重写，要求用户回答”y”或”n”，这样可以避免误覆盖文件。<br> <code>-f</code>：禁止交互操作。mv操作要覆盖某个已有的目标文件时不给任何指示，指定此参数后i参数将不再起作用。 <code>- r</code> 指示mv将参数中列出的全部目录和子目录均递归地移动。</p> <h5 id="_1-3-8-ln">1.3.8 ln</h5> <ul><li>链接命令,生成链接文件 link</li></ul> <h6 id="_1-3-8-1-硬链接特征">1.3.8.1 硬链接特征</h6> <ul><li>拥有相同的i节点和存储block块，可以看作是同一个文件</li> <li>可以通过i节点访问</li> <li>不能跨分区</li> <li>不能针对目录使用</li> <li>一般不使用</li></ul> <h6 id="_1-3-8-2-软链接特征">1.3.8.2 软链接特征</h6> <ul><li>ln -s [源文件] [目标文件]
<ul><li>-s 创建软链接</li></ul></li> <li>类似Windows快捷方式</li> <li>软链接拥有自己的i节点和Block块，但是数据块中只保存源文件的文件名和i节点号，并没有实际的文件数据</li> <li>lrwxrwxrwx l 软链接 软链接的文件权限都是 777</li> <li>修改任意一个文件，另一个都会改变</li> <li>删除源文件，软链接不能使用</li> <li>软链接源文件必须写绝对路径</li></ul> <h4 id="_1-4-文件搜索命令">1.4 文件搜索命令</h4> <h5 id="_1-4-1-locate">1.4.1 locate</h5> <ul><li>在后台数据库中按文件名搜索，速度比较快</li> <li>数据保存在/var/lib/mlocate后台数据库，每天更新一次</li> <li>可以updatedb命令立刻更新数据库</li> <li>只能搜索文件名</li> <li>/etc/updatedb.conf 建立索引的配置文件
<ul><li>PRUNE_BIND_MOUNTS = &quot;yes&quot; 全部生效，开启搜索限制</li> <li>PRUNEFS 不搜索的文件系统</li> <li>PRUNENAMES 忽略的文件类型</li> <li>PRUNEPATHS 忽略的路径 /tmp</li></ul></li></ul> <h5 id="_1-4-2-whereis">1.4.2 whereis</h5> <ul><li>搜索命令所在路径以及帮助文档所在位置</li> <li>whereis 命令名 whereis ls
<ul><li>-b 只查找可执行文件</li> <li>-m 只查找帮助文件</li></ul></li></ul> <h5 id="_1-4-3-which">1.4.3 which</h5> <p>可以看到别名 which ls
能看到的都是外部安装的命令
无法查看Shell自带的命令，如 which cd</p> <h5 id="_1-4-4-环境变量">1.4.4 环境变量</h5> <p><code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p> <ul><li>定义的是系统搜索命令的路径</li> <li>echo $PATH</li></ul> <h5 id="_1-4-5-find">1.4.5 find</h5> <ul><li>文件搜索命令</li> <li>find [搜索范围] [搜索条件]</li></ul> <h6 id="_1-4-5-1-按名称搜索">1.4.5.1 按名称搜索</h6> <ul><li>避免大范围的搜索，会非常消耗系统资源</li></ul> <div class="language- extra-class"><pre class="language-text"><code>find / -name aaa.log
</code></pre></div><h6 id="_1-4-5-2-通配符">1.4.5.2 通配符</h6> <ul><li>find是在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配</li> <li>通配符
<ul><li><code>*</code> 匹配任意内容</li> <li><code>?</code> 匹配任意一个字符</li> <li><code>[]</code> 匹配任意一个中括号内的字符</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>find . -name &quot;ab[cdef]&quot;
</code></pre></div><h6 id="_1-4-5-3-i">1.4.5.3 -i</h6> <p>不区分大小写</p> <div class="language- extra-class"><pre class="language-text"><code>find / -iname A.log
</code></pre></div><h6 id="_1-4-5-4-user">1.4.5.4 -user</h6> <p>按所有者进行搜索</p> <div class="language- extra-class"><pre class="language-text"><code>find /root -user root
find /root -nouser
</code></pre></div><h6 id="_1-4-5-5-按时间搜索">1.4.5.5 按时间搜索</h6> <div class="language- extra-class"><pre class="language-text"><code>find /nginx/access.log -mtime +5
</code></pre></div><table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>atime</td> <td>文件访问时间</td></tr> <tr><td>ctime</td> <td>改变文件属性</td></tr> <tr><td>mtime</td> <td>修改文件内容</td></tr></tbody></table> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>-5</td> <td>5天内修改的文件</td></tr> <tr><td>5</td> <td>5天前当前修改的文件</td></tr> <tr><td>+5</td> <td>5天前修改的文件</td></tr></tbody></table> <h6 id="_1-4-5-6-按大小搜索">1.4.5.6 按大小搜索</h6> <ul><li>k小写,M大写</li></ul> <div class="language- extra-class"><pre class="language-text"><code>find . -size 100k
</code></pre></div><table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>-8k</td> <td>小于8K</td></tr> <tr><td>8k</td> <td>等于8K</td></tr> <tr><td>+8k</td> <td>大于8K</td></tr> <tr><td>+8M</td> <td>小于8M</td></tr></tbody></table> <h6 id="_1-4-5-7-按i节点搜索">1.4.5.7 按i节点搜索</h6> <div class="language- extra-class"><pre class="language-text"><code>find . -inum 123456
</code></pre></div><h6 id="_1-4-5-8-综合应用">1.4.5.8 综合应用</h6> <div class="language- extra-class"><pre class="language-text"><code>find /tmp -size +10k -a -size -20k
</code></pre></div><ul><li>查找/etc目录下，大于10KB并且小于20KB的文件</li> <li>-a and 逻辑与，两个条件都满足</li> <li>-o or 逻辑或，两个条件满足一个就可以</li></ul> <div class="language- extra-class"><pre class="language-text"><code>find /tmp -size +10k -a -size -20k -exec ls -lh {} \;

</code></pre></div><ul><li>exec 对上个命令的结果进行操作</li></ul> <h6 id="_1-4-5-9-grep">1.4.5.9 grep</h6> <ul><li>在文件当中匹配符合条件的字符串</li> <li>grep &quot;10&quot; access.log
<ul><li>-i 忽略大小写</li> <li>-v 排除指定字符串</li></ul></li> <li>find命令，在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配</li> <li>grep命令 在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式时包含匹配</li></ul> <h4 id="_1-5-帮助命令">1.5 帮助命令</h4> <h5 id="_1-5-1-基本用法">1.5.1 基本用法</h5> <ul><li>man 命令 获取指定命令的帮助</li> <li>man ls 查看ls的帮助</li></ul> <h5 id="_1-5-2-man的级别">1.5.2 man的级别</h5> <ul><li>1 查看命令的帮助</li> <li>2 查看可被内核调用的函数的帮助</li> <li>3 查看函数和函数库的帮助</li> <li>4 查看特殊文件的帮助</li> <li>5 查看配置文件的帮助</li> <li>6 查看游戏的帮助</li> <li>7 查看其它的帮助</li> <li>8 查看系统管理员可用命令的帮助</li> <li>9 查看和内核相关文件的帮助</li></ul> <h5 id="_1-5-3-查看命令级别">1.5.3 查看命令级别</h5> <ul><li>查看命令级别</li> <li>1p: POSIX utilities</li> <li>POSIX表示可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ），POSIX标准定义了操作系统应该为应用程序提供的接口标准.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>man -f ls
whatis ls
man 1 ls
man 1p ls
</code></pre></div><h5 id="_1-5-4-关键字搜索">1.5.4 关键字搜索</h5> <div class="language- extra-class"><pre class="language-text"><code>- man -k passwd
</code></pre></div><h5 id="_1-5-5-shell-内部帮助">1.5.5 shell 内部帮助</h5> <ul><li>whereis找到就是外部，找不到就是内部</li></ul> <div class="language- extra-class"><pre class="language-text"><code>help cd
</code></pre></div><h4 id="_1-6-压缩与解压缩命令">1.6 压缩与解压缩命令</h4> <p>后缀 <code>.zip</code> <code>.gz</code> <code>.bz2</code> <code>.tar.gz</code> <code>.tar.bz2</code></p> <h5 id="_1-6-1-zip格式">1.6.1 zip格式</h5> <ul><li>压缩文件 zip 压缩文件名 源文件</li> <li>压缩目录 zip -r 压缩文件名 源目录</li> <li>解压 unzip 压缩文件名</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mkdir book
touch book/1.txt
touch book/2.txt
zip -r book.zip book
unzip book.zip
</code></pre></div><h5 id="_1-6-2-gzip">1.6.2 gzip</h5> <table><thead><tr><th>命令</th> <th>示例</th> <th>含义</th></tr></thead> <tbody><tr><td>gzip 源文件</td> <td>gzip a.txt</td> <td>压缩为.gz格式的压缩文件，源文件会消失</td></tr> <tr><td>gzip c 源文件 &gt; 压缩文件</td> <td>gzip -c yum.txt &gt; yum.txt.gz</td> <td>压缩为.gz格式的压缩文件，源文件不会消失</td></tr> <tr><td>gzip -r 目录</td> <td>gzip -r xx</td> <td>压缩目录下的所有子文件，但是不压缩目录</td></tr> <tr><td>gzip -d 压缩文件名</td> <td>gzip -d yum.txt.gz</td> <td>解压缩文件,不保留压缩包</td></tr> <tr><td>gunzip 压缩文件</td> <td>gunzip yum.txt.gz</td> <td>解压缩文件,不保留压缩包</td></tr></tbody></table> <ul><li>压缩是压缩目录下的文件</li></ul> <h5 id="_1-6-3-bz2格式压缩">1.6.3 .bz2格式压缩</h5> <table><thead><tr><th>命令</th> <th>示例</th> <th>含义</th></tr></thead> <tbody><tr><td>bzip2 源文件</td> <td>bzip2 1.txt</td> <td>压缩为.bz2格式的文件，不保留源文件</td></tr> <tr><td>bzip2 -k 源文件</td> <td>zip2 -k 1.txt</td> <td>压缩为.bz2格式的文件，保留源文件</td></tr> <tr><td>bzip2 -d 压缩文件名</td> <td>bzip2 -d 1.txt.bz2</td> <td>解压压缩包</td></tr> <tr><td>bunzip2 压缩文件名</td> <td>bunzip2 1.txt.bz2</td> <td>解压压缩包</td></tr></tbody></table> <ul><li>bzip2 不能压缩目录</li></ul> <h5 id="_1-6-4-tar">1.6.4 tar</h5> <ul><li>打包命令</li> <li>tar -cvf 打包文件名 源文件
<ul><li>-c 打包</li> <li>-v 显示过程</li> <li>-f 指定打包后的文件名</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>tar -cvf book.tar book
gzip book.tar
bzip2 book.tar
</code></pre></div><ul><li>x 解打包</li></ul> <div class="language- extra-class"><pre class="language-text"><code>tar -xvf book.tar
</code></pre></div><h5 id="_1-6-5-tar-gz压缩格式">1.6.5 tar.gz压缩格式</h5> <ul><li>可以先打包为<code>.tar</code>格式，再压缩为<code>.gz</code>格式 <code>-z</code> 压缩为<code>.tar.gz</code>格式 <code>-x</code> 解压缩<code>.tar.gz</code>格式 。</li></ul> <table><thead><tr><th>命令</th> <th>示例</th> <th>含义</th></tr></thead> <tbody><tr><td><code>tar -zcvf</code> 压缩包名 <code>.tar.gz</code>源文件</td> <td><code>tar -zcvf book.gar.gz book</code></td> <td>可以先打包为<code>.tar</code>格式，再压缩为<code>.gz</code>格式</td></tr> <tr><td><code>tar -zxvf</code> 压缩包名<code>.tar.gz</code></td> <td><code>tar -zxvf book.tar.gz</code></td> <td>解压<code>tar.gz</code>压缩包</td></tr> <tr><td><code>tar -jcvf</code> 压缩包名 <code>.tar.bz2</code>源文件</td> <td><code>tar -zcvf .tar.bz2 book</code></td> <td>可以先打包为<code>.tar</code>格式，再压缩为<code>.bz2</code>格式</td></tr> <tr><td><code>tar -jxvf</code> 压缩包名<code>.tar.bz2</code></td> <td><code>tar -zxvf book.tar.bz2</code></td> <td>解压<code>tar.bz2</code>压缩包</td></tr></tbody></table> <h4 id="_1-7-关机和重启命令">1.7 关机和重启命令</h4> <h5 id="_1-7-1-shutdown">1.7.1 shutdown</h5> <p>shutdown 关机命令</p> <ul><li>-c 取消前一个关机命令</li> <li>-h 关机</li> <li>-r 重启</li></ul> <div class="language- extra-class"><pre class="language-text"><code>shutdown -r 06:00
shutdown -c
</code></pre></div><h5 id="_1-7-2-init">1.7.2 init</h5> <p>关机</p> <div class="language- extra-class"><pre class="language-text"><code>init 0
</code></pre></div><p>重启</p> <div class="language- extra-class"><pre class="language-text"><code>init 6
</code></pre></div><p>系统的运行级别</p> <ul><li>0 关机</li> <li>1 但用户</li> <li>2 不 完全多用户，不包含NFS服务</li> <li>3 完全多用户</li> <li>4 未分配</li> <li>5 图形界面</li> <li>6 重启</li></ul> <h5 id="_1-7-3-logout">1.7.3 logout</h5> <p>退出登录</p> <div class="language- extra-class"><pre class="language-text"><code>logout
</code></pre></div><h4 id="_1-8-挂载">1.8 挂载</h4> <h5 id="_1-8-1-挂载命令">1.8.1 挂载命令</h5> <ul><li>mount 查看系统中已经挂载的设备</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mount 
mount -a
</code></pre></div><h5 id="_1-8-2-挂载命令格式">1.8.2 挂载命令格式</h5> <ul><li>mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点</li> <li>选项
<ul><li>-t 文件系统 ext4 iso9660</li> <li>-o 特殊选项</li></ul></li></ul> <h5 id="_1-8-3-挂载光驱">1.8.3 挂载光驱</h5> <div class="language- extra-class"><pre class="language-text"><code>mkdir /mnt/cd
mount -t iso9660 /dev/sr0 /mnt/cdrom
</code></pre></div><h5 id="_1-8-4-卸载光驱">1.8.4 卸载光驱</h5> <div class="language- extra-class"><pre class="language-text"><code>umount /dev/sr0
umount /mnt/cdrom
</code></pre></div><h5 id="_1-8-4-挂载u盘">1.8.4 挂载U盘</h5> <div class="language- extra-class"><pre class="language-text"><code>fdisk -l
mount -t vfat /dev/sdb1 /mnt/usb
</code></pre></div><ul><li>linux默认不支持NTFS格式</li></ul> <h4 id="_1-9-查看登录用户信息">1.9 查看登录用户信息</h4> <h5 id="_1-9-1-w">1.9.1 w</h5> <p>查看登录用户信息</p> <ul><li>USER 登录的用户名</li> <li>TTY 登录的终端 tty1 本地终端 pts/0远程终端</li> <li>FROM 登录的IP</li> <li>LOGIN 登录时间</li> <li>IDLE 用户闲置时间</li> <li>JCPU 该终端所有进程占用的时间</li> <li>PCPU 当前进程所占用的时间</li> <li>WHAT 正在执行的命令</li></ul> <h5 id="_1-9-2-who">1.9.2 who</h5> <p>查看登录用户信息</p> <ul><li>USER 登录的用户名</li> <li>TTY 登录的终端 tty1 本地终端 pts/0远程终端</li> <li>LOGIN 登录时间（登录的IP）</li></ul> <h5 id="_1-9-3-last">1.9.3 last</h5> <p>查看当前登录和过去登录的用户信息 默认读取 /var/log/wtmp 文件</p> <ul><li>用户名</li> <li>登录终端</li> <li>登录IP</li> <li>登录时间</li> <li>退出时间(在线时间)</li></ul> <h5 id="_1-9-4-lastlog">1.9.4 lastlog</h5> <p>查看所有用户的最后一次登录时间</p> <ul><li>用户名</li> <li>登录终端</li> <li>登录IP</li> <li>最后一次登录时间</li></ul> <h3 id="_2-shell">2. shell</h3> <ul><li>shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序</li> <li>用户可以用Shell来启动、挂起、停止或者编写一些程序</li> <li>Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。</li> <li>Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。</li></ul> <h4 id="_2-1-查看支持的shell">2.1 查看支持的shell</h4> <ul><li>/etc/shells</li></ul> <h4 id="_2-2-echo">2.2 echo</h4> <ul><li>输出命令</li> <li>--e 支持反斜线控制的字符转换</li></ul> <table><thead><tr><th>控制字符</th> <th>作用</th></tr></thead> <tbody><tr><td>\a</td> <td>输出警告音</td></tr> <tr><td>\b</td> <td>退格键，也就是向左删除键</td></tr> <tr><td>\n</td> <td>换行符</td></tr> <tr><td>\r</td> <td>回车键</td></tr> <tr><td>\t</td> <td>制表符，也就是Tab键</td></tr> <tr><td>\v</td> <td>垂直制表符</td></tr> <tr><td>\onnn</td> <td>按照八进制ASCII码表输出字符，其中0为数字零，nnn是三位八进制数</td></tr> <tr><td>\xhh</td> <td>按照十六进制ASCII码表输出字符，其中hh是两位十六进制数</td></tr></tbody></table> <ul><li>30m-47m</li> <li>echo -e &quot;\e[1;31m warning \e[0m&quot;</li></ul> <table><thead><tr><th>符号</th> <th>颜色</th></tr></thead> <tbody><tr><td>#30m</td> <td>黑色</td></tr> <tr><td>#31</td> <td>红色</td></tr> <tr><td>#32</td> <td>绿色</td></tr> <tr><td>#33</td> <td>黄色</td></tr> <tr><td>##34</td> <td>蓝色</td></tr> <tr><td>##35</td> <td>洋红</td></tr> <tr><td>##36</td> <td>青涩</td></tr> <tr><td>##37</td> <td>白色</td></tr></tbody></table> <h4 id="_2-3-编写执行shell">2.3 编写执行shell</h4> <div class="language- extra-class"><pre class="language-text"><code>#!/bin/bash
echo -e &quot;\e[1;34m hello world \e[0m&quot;
</code></pre></div><p>赋予执行权限，直接运行</p> <div class="language- extra-class"><pre class="language-text"><code>chmod 755 hello.sh
./hello.sh
</code></pre></div><p>通过Bash调用执行脚本</p> <div class="language- extra-class"><pre class="language-text"><code>bash hello.sh
</code></pre></div><h4 id="_2-4-别名">2.4 别名</h4> <ul><li>命令别名 == 小名</li> <li>临时生效</li> <li>alias</li> <li>alias rm=&quot;rm -i&quot;</li> <li>写入环境变量配置文件 vi ~/.bashrc</li> <li>source ~/.bashrc</li> <li>unalias 别名 删除别名</li></ul> <h4 id="_2-5-命令的生效顺序">2.5 命令的生效顺序</h4> <ul><li>绝对路径或者相对路径</li> <li>别名</li> <li>bash内部命令</li> <li>按照$PATH环境变量定义的目录查找顺序找到的第一个命令</li></ul> <h4 id="_2-6-命令快捷键">2.6 命令快捷键</h4> <table><thead><tr><th>命令</th> <th>含义</th></tr></thead> <tbody><tr><td>ctrl+c</td> <td>强制终止当前命令</td></tr> <tr><td>ctrl+l</td> <td>清屏</td></tr> <tr><td>ctrl+a</td> <td>光标移动到命令行首</td></tr> <tr><td>ctrl+e</td> <td>光标移动到命令行尾</td></tr> <tr><td>ctrl+u</td> <td>从光标所在的位置删除到行首</td></tr> <tr><td>ctrl+z</td> <td>把命令放入后台</td></tr> <tr><td>ctrl+r</td> <td>在历史命令中搜索</td></tr></tbody></table> <h4 id="_2-7-历史命令">2.7 历史命令</h4> <ul><li>history [选项] [历史命令保存文件]</li> <li>选项
<ul><li>-c 清空历史命令</li> <li>-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history</li></ul></li> <li>默认保存1000条 /etc/profile HISSIZE=10000</li></ul> <h4 id="_2-8-调用">2.8 调用</h4> <ul><li>使用上下箭头调用以前的历史命令</li> <li>使用 !n 重复执行第n条历史命令</li> <li>使用 !! 重复执行上一条命令</li> <li>使用 !字符 重复执行最后一条以该字符串开头的命令</li></ul> <h4 id="_2-9-输出重定向">2.9 输出重定向</h4> <h5 id="_2-9-1-标准输入输出">2.9.1 标准输入输出</h5> <table><thead><tr><th>设备</th> <th>设备文件名</th> <th>文件描述符</th> <th>类型</th></tr></thead> <tbody><tr><td>键盘</td> <td>/dev/stdin</td> <td>0</td> <td>标准输入</td></tr> <tr><td>显示器</td> <td>/dev/stdout</td> <td>1</td> <td>标准输出</td></tr> <tr><td>显示器</td> <td>/dev/stderr</td> <td>2</td> <td>标准错误输出</td></tr></tbody></table> <table><thead><tr><th>类型</th> <th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>标准输出重定向</td> <td>命令 &gt; 文件</td> <td>以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>标准输出重定向</td> <td>命令 &gt;&gt; 文件</td> <td>以追加的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;文件</td> <td>以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;&gt;文件</td> <td>以追加的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&amp;1</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&gt;&amp;1</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;文件</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;&gt;文件</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;&gt;文件1 2&gt;文件2</td> <td>以覆盖的方式，正确的输出追加到文件1中，把错误输出追加到文件2中</td></tr></tbody></table> <h5 id="_2-9-2-输入重定向">2.9.2 输入重定向</h5> <ul><li><p>命令 &lt; 文件把文件做为命令的输入</p></li> <li><p>命令 &lt;&lt; 标识符 标识符把标识符之间内容作为命令的输入</p></li> <li><p>wc &lt; access.log</p></li> <li><p>wc &lt;&gt;</p></li></ul> <h4 id="_2-10-管道符号">2.10 管道符号</h4> <h5 id="_2-10-1-多命令顺序执行">2.10.1 多命令顺序执行</h5> <table><thead><tr><th>多命令执行符</th> <th>格式</th> <th>作用</th></tr></thead> <tbody><tr><td>;</td> <td>命令1;命令2</td> <td>多个命令执行，命令之间没有任何逻辑联系</td></tr> <tr><td>&amp;&amp;</td> <td>命令1&amp;&amp;命令2</td> <td>逻辑与 当命令1正确执行，则命令2才会执行 当命令1执行不正确，则命令2不会执行</td></tr> <tr><td><code>||</code></td> <td>命令1 <code>||</code> 命令2</td> <td>逻辑或 当命令1执行不正确，则命令2才会执行 当命令1正确执行，则命令2不会执行</td></tr></tbody></table> <ul><li>date;ls;date;ls</li> <li>ls &amp;&amp; echo yes || echo no</li></ul> <h5 id="_2-10-2-管道符号">2.10.2 管道符号</h5> <ul><li>命令1的正确输出会作为命令2的操作对象</li> <li>命令1|命令2</li></ul> <div class="language- extra-class"><pre class="language-text"><code>ls /etc/ | more
netstat -an | grep ESTABLISHED | wc -l
</code></pre></div><h5 id="_2-10-3-通配符">2.10.3 通配符</h5> <p>匹配文件名和目录名</p> <table><thead><tr><th style="text-align:left;">通配符</th> <th style="text-align:left;">作用</th></tr></thead> <tbody><tr><td style="text-align:left;">?</td> <td style="text-align:left;">匹配一个任意字符</td></tr> <tr><td style="text-align:left;">*</td> <td style="text-align:left;">匹配0个或任意字符，也就是可以匹配任意内容</td></tr> <tr><td style="text-align:left;">[]</td> <td style="text-align:left;">匹配中括号中任意一个字符</td></tr> <tr><td style="text-align:left;">[-]</td> <td style="text-align:left;">匹配中括号中任意一个字符,-代表范围</td></tr> <tr><td style="text-align:left;">[^]</td> <td style="text-align:left;">匹配不是中括号中的一个字符</td></tr></tbody></table> <h5 id="_2-10-4-其它符号">2.10.4 其它符号</h5> <table><thead><tr><th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>''</td> <td>单引号。在单引号中所有的特殊符号，如$和`都没有特殊含义</td></tr> <tr><td>&quot;&quot;</td> <td>双引号，在双引号里特殊符号都没有特殊含义，但是 $ ` \ 例外，拥有调用变量值，引用命令和转义的含义</td></tr> <tr><td>``</td> <td>反引号，扩起来的是系统命令</td></tr> <tr><td>$()</td> <td>和反引号一样</td></tr> <tr><td>#</td> <td>在shell脚本中，#开头的行代表注释</td></tr> <tr><td>$</td> <td>用于调用变量的值</td></tr> <tr><td>\</td> <td>转义符号</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code> a=`ls`
 b=$(ls)
</code></pre></div><h3 id="_3-vi编辑器">3. vi编辑器</h3> <ul><li>VI visual interface</li> <li>可视化接口</li> <li>类似与windows中的记事本</li> <li>vim支持多级撤销</li> <li>跨平台</li> <li>语法高亮</li> <li>支持图形界面</li></ul> <h4 id="_3-1-操作模式">3.1 操作模式</h4> <table><thead><tr><th>模式名</th> <th>含义</th></tr></thead> <tbody><tr><td>Command Mode 命令模式</td> <td>等待输入的模式</td></tr> <tr><td>Insert Mode 输入模式</td> <td>编辑模式，用于输入文本</td></tr> <tr><td>Last Line Mode 底行模式(尾行、末行)</td> <td>可以输入指令，搜索，保存</td></tr></tbody></table> <ul><li>vim + abc</li> <li>vim +3 abc</li> <li>vim +5 abc</li> <li>vim +/xxx abc</li> <li>vim a b c :n</li></ul> <h4 id="_3-2-常用指令">3.2 常用指令</h4> <h5 id="_3-2-1-底行模式">3.2.1 底行模式</h5> <ul><li>:w 保存</li> <li>:q 退出</li> <li>:! 强制保存</li> <li>:ls 列出所有的文件</li> <li>:n 下一个</li> <li>:N 上一个</li> <li>:15 跳转到指定行</li> <li>/xxx 从光标位置开始向后搜索 xxx 字符串</li> <li>?xxx 从光标位置开始向前搜索</li></ul> <h5 id="_3-2-2-命令模式">3.2.2 命令模式</h5> <ul><li><p>h 光标左移</p></li> <li><p>j 光标下移</p></li> <li><p>k 光标上移</p></li> <li><p>l 光标右移</p></li> <li><p>ctrl+f 向下翻页(front)</p></li> <li><p>ctrl+b 向上翻页</p></li> <li><p>ctrl+d 向下翻半页</p></li> <li><p>ctrl+u 向上翻半页</p></li> <li><p>dd 删除光标所在行</p></li> <li><p>o 在光标所在行的下方插入一行并切换到输入模式</p></li> <li><p>yy 复制光标所在的行</p></li> <li><p>p 在光标所在行的下方粘贴</p></li> <li><p>P 在光标所在行的上方粘贴</p></li></ul> <h3 id="_4-用户和用户组">4. 用户和用户组</h3> <ul><li>使用操作系统的人都是用户</li> <li>用户组是具有相同系统权限的一组用户</li></ul> <h4 id="_4-1-用户组">4.1 用户组</h4> <h5 id="_4-1-1-etc-group">4.1.1 /etc/group</h5> <ul><li><code>/etc/group</code> 存储当前系统中所有用户组信息</li> <li><code>group:x:123:abc,def</code></li> <li>组名称:组密码占位符:组编号:组中用户名列表</li> <li>root 组编号为0</li> <li>1-499系统预留的编号 预留给安装的软件和服务的</li> <li>用户手动创建的用户组从500开始</li> <li>组密码占位符都是x</li></ul> <h5 id="_4-1-2-etc-gshadow">4.1.2 /etc/gshadow</h5> <ul><li>存放当前系统中用户组的密码信息</li> <li>和group中的记录一一对应</li> <li><code>Group: * : :abc</code></li> <li>组名称 组密码 组管理者 组中用户名</li></ul> <h5 id="_4-1-3-etc-passwd">4.1.3 /etc/passwd</h5> <ul><li>存储当前系统中所有用户的信息</li> <li><code>user:x:123:456:xxxxx:/home/user:/bin/bash</code></li> <li>用户名:密码占位符:用户编号: 用户注释信息:用户主目录:shell类型</li></ul> <h5 id="_4-1-4-etc-shadow">4.1.4 /etc/shadow</h5> <ul><li>存放当前系统中所有用户的密码信息</li> <li><code>user:xxx:::::::</code></li> <li>用户名:密码:</li></ul> <h4 id="_4-2-用户操作">4.2 用户操作</h4> <p>添加组</p> <div class="language- extra-class"><pre class="language-text"><code>groupadd student
</code></pre></div><p>修改组名称</p> <div class="language- extra-class"><pre class="language-text"><code>groupmod -n stu student 
</code></pre></div><p>修改组编号</p> <div class="language- extra-class"><pre class="language-text"><code>groupmod -g 111 stu 
</code></pre></div><p>添加分组并指定编号</p> <div class="language- extra-class"><pre class="language-text"><code>groupadd -g 222 teacher 
</code></pre></div><p>删除分组</p> <div class="language- extra-class"><pre class="language-text"><code>groupdel 222 
</code></pre></div><p>添加分组</p> <div class="language- extra-class"><pre class="language-text"><code>groupadd teacher 
</code></pre></div><p>为用户指定所属组</p> <div class="language- extra-class"><pre class="language-text"><code>useradd -g teacher zhangsan 
</code></pre></div><p>为用户指定所属组</p> <div class="language- extra-class"><pre class="language-text"><code>useradd -g teacher lisi 
</code></pre></div><p>为用户指定工作目录</p> <div class="language- extra-class"><pre class="language-text"><code>useradd -d /home/zhangsan zhangsan 
</code></pre></div><p>指定注释</p> <div class="language- extra-class"><pre class="language-text"><code>usermod -c iamateacher zhangsan 
</code></pre></div><p>修改用户名</p> <div class="language- extra-class"><pre class="language-text"><code>usermod -l zhangsan zhangsan2
</code></pre></div><p>指定文件夹</p> <div class="language- extra-class"><pre class="language-text"><code>usermod -d /home/zhangsan2 zhangsan2 
</code></pre></div><p>修改用户所属组</p> <div class="language- extra-class"><pre class="language-text"><code>usermod -g stu zhangsan2 
</code></pre></div><p>删除用户</p> <div class="language- extra-class"><pre class="language-text"><code>userdel zhangsan2 
</code></pre></div><p>删除所属文件夹</p> <div class="language- extra-class"><pre class="language-text"><code>userdel -r lisi 
</code></pre></div><h3 id="_5-用户命令">5. 用户命令</h3> <p>显示登录的用户名</p> <div class="language- extra-class"><pre class="language-text"><code>whoami
</code></pre></div><p>显示指定用户信息，包括用户编号，用户名 主要组的编号及名称，附属组列表</p> <div class="language- extra-class"><pre class="language-text"><code>id zhangsan  
</code></pre></div><p>显示zhangsan用户所在的所有组</p> <div class="language- extra-class"><pre class="language-text"><code>groups zhangsan 
</code></pre></div><p>显示用户详细资料</p> <div class="language- extra-class"><pre class="language-text"><code>finger zhangsan  
</code></pre></div><h3 id="_6-附录">6. 附录</h3> <h4 id="_6-1-系统启动">6.1 系统启动</h4> <h5 id="_6-1-1-bios">6.1.1 BIOS</h5> <ul><li>计算机通电后，第一件事就是读取刷入ROM芯片的开机程序，这个程序叫做(Basic Input/Output System)</li></ul> <h5 id="_6-1-2-硬件自检">6.1.2 硬件自检</h5> <ul><li>BIOS程序首先检查，计算机硬件能否满足运行的基本条件，这叫做&quot;硬件自检&quot;（Power-On Self-Test)</li> <li>如果硬件出现问题，主板会发出不同含义的蜂鸣，启动中止。如果没有问题，屏幕就会显示出CPU、内存、硬盘等信息。</li></ul> <h5 id="_6-1-3-启动顺序">6.1.3 启动顺序</h5> <ul><li>硬件自检完成后，BIOS把控制权转交给下一阶段的启动程序。</li> <li>这时，BIOS需要知道，&quot;下一阶段的启动程序&quot;具体存放在哪一个设备</li> <li>BIOS需要有一个外部储存设备的排序，排在前面的设备就是优先转交控制权的设备。这种排序叫做&quot;启动顺序&quot;（Boot Sequence）</li> <li>BIOS按照&quot;启动顺序&quot;，把控制权转交给排在第一位的储存设备。</li> <li>这时，计算机读取该设备的第一个扇区，也就是读取最前面的512个字节。如果这512个字节的最后两个字节是0x55和0xAA，表明这个设备可以用于启动；如果不是，表明设备不能用于启动，控制权于是被转交给&quot;启动顺序&quot;中的下一个设备。</li> <li>这最前面的512个字节，就叫做&quot;主引导记录&quot;（Master boot record，缩写为MBR）</li></ul> <h5 id="_6-1-4-主引导记录的结构">6.1.4 主引导记录的结构</h5> <ul><li>&quot;主引导记录&quot;只有512个字节，放不了太多东西。它的主要作用是，告诉计算机到硬盘的哪一个位置去找操作系统。
<ul><li>（1） 第1-446字节：是用来记录系统的启动信息的,调用操作系统的机器码</li> <li>（2） 第447-510字节(64个字节)：分区表（Partition table），分区表的作用，是将硬盘分成若干个区</li> <li>（3） 第511-512字节：主引导记录签名（0x55和0xAA）</li></ul></li></ul> <h5 id="_6-1-5-分区表">6.1.5 分区表</h5> <ul><li>磁盘分区是使用分区编辑器在磁盘上划分几个逻辑部分</li> <li>磁盘一旦划分成多个分区，不同类的目录与文件可以存储进不同的分区内</li> <li>&quot;主引导记录&quot;因此必须知道将控制权转交给哪个区</li> <li>分区表的长度只有64个字节，里面又分成四项，每项16个字节。所以，一个硬盘最多只能分四个一级分区，又叫做&quot;主分区&quot;
<ul><li>（1） 第1个字节：如果为0x80，就表示该主分区是激活分区，控制权要转交给这个分区。四个主分区里面只能有一个是激活的。</li> <li>（2） 第2-4个字节：主分区第一个扇区的物理位置（柱面、磁头、扇区号等等）。</li> <li>（3） 第5个字节：主分区类型，比如FAT32、NTFS等。</li> <li>（4） 第6-8个字节：主分区最后一个扇区的物理位置。</li> <li>（5） 第9-12字节：该主分区第一个扇区的逻辑地址。</li> <li>（6） 第13-16字节：主分区的扇区总数。</li></ul></li></ul> <h5 id="_6-1-6-硬盘启动">6.1.6 硬盘启动</h5> <ul><li>计算机的控制权就要转交给硬盘的某个分区了</li> <li>四个主分区里面，只有一个是激活的。计算机会读取激活分区的第一个扇区，叫做&quot;卷引导记录&quot;（Volume boot record，缩写为VBR）</li></ul> <h5 id="_6-1-7-操作系统">6.1.7 操作系统</h5> <ul><li>控制权转交给操作系统后，操作系统的内核首先被载入内存。</li> <li>以Linux系统为例，先载入/boot目录下面的kernel。内核加载成功后，第一个运行的程序是/sbin/init。它根据配置文件（Debian系统是/etc/initab）产生init进程。这是Linux启动后的第一个进程，pid进程编号为1，其他进程都是它的后代</li> <li>然后，init线程加载系统的各个模块，比如窗口程序和网络程序，直至执行/bin/login程序，跳出登录界面，等待用户输入用户名和密码。</li></ul> <h3 id="_7-进程管理">7 进程管理</h3> <h4 id="_7-1-进程">7.1 进程</h4> <ul><li>进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间并且用一定的系统资源</li> <li>进程就是正在执行的某个程序</li></ul> <h4 id="_7-2-进程管理简介">7.2 进程管理简介</h4> <ul><li>判断服务器的状态</li> <li>查看系统中的所有进程</li> <li>杀死进程，只有无法关闭才要杀死进程</li></ul> <h4 id="_7-3-进程的查看命令-ps">7.3 进程的查看命令(ps)</h4> <ul><li>ps aux 查看系统中所有进程，使用BSD操作系统格式</li> <li>ps -le 查看系统中所有进程，使用Linux标准格式</li> <li>TTY是TeleType的一个缩写，原来指的是电传打字机，是通过串行线用打印机键盘通过阅读和发送信息的东西</li> <li><code>pts(pseudo['su:doʊ]-terminal slave)</code>是所谓的伪终端或虚拟终端</li></ul> <h5 id="_7-3-1-选项">7.3.1 选项</h5> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>-a</td> <td>显示一个终端的所有进程</td></tr> <tr><td>-u</td> <td>显示进程的归属用户及内存的使用情况</td></tr> <tr><td>-x</td> <td>显示没有控制终端的进程</td></tr> <tr><td>-l</td> <td>长格式显示，显示更详细的信息</td></tr></tbody></table> <h5 id="_7-3-2-结果字段含义">7.3.2 结果字段含义</h5> <table><thead><tr><th>数据</th> <th>含义</th></tr></thead> <tbody><tr><td>USER</td> <td>该进程是由哪个用户创建的</td></tr> <tr><td>PID</td> <td>进程的ID号</td></tr> <tr><td><code>%CPU</code></td> <td>该进程占用CPU资源的百分比，占用越高说明越消耗系统资源</td></tr> <tr><td><code>%MEM</code></td> <td>该进程占用物理内存的百分比，占用越高说明越消耗系统资源</td></tr> <tr><td>VSZ</td> <td>该进程占用虚拟内存的百分比，单位是KB</td></tr> <tr><td>RSS</td> <td>该进程占用实际物理内存大小，单位是KB</td></tr> <tr><td>TTY</td> <td>该进程在哪个终端中运行。tty1~tty7表示本地控制终端，tty1~tty6是字符终端，tty7是图形终端。pts/0~255代表虚拟终端，?表示此终端是系统启动的</td></tr> <tr><td>STAT</td> <td>进程状态</td></tr> <tr><td>START</td> <td>该进程的启动时间</td></tr> <tr><td>TIME</td> <td>该进程占用CPU的运算时间,数值越高说明越消耗系统资源</td></tr> <tr><td>COMMAND</td> <td>产生此进程的命令名</td></tr></tbody></table> <h5 id="_7-3-3-进程状态-stat">7.3.3 进程状态(STAT)</h5> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>R(Runing)</td> <td>运行</td></tr> <tr><td>S(Sleep)</td> <td>休眠</td></tr> <tr><td>T(Terminated)</td> <td>停止</td></tr> <tr><td>S(Son)</td> <td>包含子进程</td></tr> <tr><td><code>+</code></td> <td>位于后台</td></tr></tbody></table> <h4 id="_7-4-pstree">7.4 pstree</h4> <ul><li><code>pstree [选项]</code> <ul><li>-p 显示进程PID</li> <li>-u 显示进程的所属用户</li></ul></li></ul> <h4 id="_7-5-进程的查看-top">7.5 进程的查看(top)</h4> <ul><li>top</li></ul> <div class="language- extra-class"><pre class="language-text"><code>top -b -n 1 &gt; top.txt
</code></pre></div><h5 id="_7-5-1-选项">7.5.1 选项</h5> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-b</td> <td>使用批处理模式输出，一般和-n配合使用</td></tr> <tr><td>-n</td> <td>次数，指定top命令执行的次数。一般了-b选项配合使用</td></tr> <tr><td>-d</td> <td>秒数，指定top命令每隔几秒更新。默认是3秒</td></tr></tbody></table> <h5 id="_7-5-2-交互模式的命令">7.5.2 交互模式的命令</h5> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>?或h</td> <td>显示交互模式的帮助</td></tr> <tr><td>P</td> <td>按CPU使用率排序，默认就是此选项</td></tr> <tr><td>M</td> <td>以内存的使用率排序</td></tr> <tr><td>N</td> <td>以PID排序</td></tr> <tr><td>q</td> <td>退出top</td></tr></tbody></table> <h5 id="_7-5-3-状态栏">7.5.3 状态栏</h5> <h6 id="_7-5-3-1-第一行为任务队列信息">7.5.3.1 第一行为任务队列信息</h6> <table><thead><tr><th>内容</th> <th>说明</th></tr></thead> <tbody><tr><td>12:12:12</td> <td>系统的当前时间</td></tr> <tr><td>up 1 day 5:33</td> <td>系统的运行时间，本机已经运行了1天5小时33分</td></tr> <tr><td>2 users</td> <td>当前登录了二个客户端</td></tr> <tr><td>load average 0 0 0</td> <td>系统在之前1分钟、5分钟、15分钟的平均负载。一般认为小于1小时负载较小，大于1超过负载</td></tr></tbody></table> <h6 id="_7-5-3-2-第二行为进程信息">7.5.3.2 第二行为进程信息</h6> <table><thead><tr><th>内容</th> <th>说明</th></tr></thead> <tbody><tr><td>Tasks: 100 total</td> <td>系统中的进程总数</td></tr> <tr><td>1 running</td> <td>正在运行的进程数</td></tr> <tr><td>94 sleeping</td> <td>睡眠的进程</td></tr> <tr><td>0 stopped</td> <td>正在停止的进程</td></tr> <tr><td>0 zombie</td> <td>僵尸进程。如果不是0的话要进行检查</td></tr></tbody></table> <h6 id="_7-5-3-3-第三行为cpu信息">7.5.3.3 第三行为CPU信息</h6> <table><thead><tr><th>内容</th> <th>说明</th></tr></thead> <tbody><tr><td>Cpu(s): 0.1%us</td> <td>用户模式占用的CPU百分比</td></tr> <tr><td>0.1%sy</td> <td>系统模式占用的CPU百分比</td></tr> <tr><td>0.0%ni</td> <td>改变过优先级的用户进程 占用的CPU百分比</td></tr> <tr><td>99.7%id</td> <td>空闲CPU的CPU百分比</td></tr> <tr><td>0.1%wa</td> <td>等待输入/输出的进程的占用CPU百分比</td></tr> <tr><td>0.1%hi</td> <td>硬中断请求服务占用的CPU百分比</td></tr> <tr><td>0.1%si</td> <td>软中断请求服务占用的CPU百分比</td></tr> <tr><td>0.0%st</td> <td>st(Steal time)虚拟时间百分比，就是当有</td></tr></tbody></table> <h6 id="_7-5-3-4-第四行为物理内存信息">7.5.3.4 第四行为物理内存信息</h6> <table><thead><tr><th>内容</th> <th>说明</th></tr></thead> <tbody><tr><td>Mem: 1030720k total</td> <td>物理内存的问题，单位是KB</td></tr> <tr><td>551860k used</td> <td>已经使用的物理内存数量</td></tr> <tr><td>478860k free</td> <td>空闲的物理内存数量，虚拟机分配了1024M内存，使用了538M,空闲467M</td></tr> <tr><td>43180k buffers</td> <td>作为缓冲的内存数量，可以存放需要写入硬盘的数据，用来加速数据的写入</td></tr></tbody></table> <h6 id="_7-5-3-5-第四行为交换分区信息">7.5.3.5 第四行为交换分区信息</h6> <table><thead><tr><th>内容</th> <th>说明</th></tr></thead> <tbody><tr><td>Swap: 2047992k total</td> <td>总计的交换分区(虚拟内存)大小</td></tr> <tr><td>536k used</td> <td>已经使用的交换分区大小</td></tr> <tr><td>2047456k free</td> <td>空闲的交换分区大小</td></tr> <tr><td>368164k cached</td> <td>把需要经常读取的数据从硬盘读到内存中，加速了数据的读取</td></tr></tbody></table> <h4 id="_7-6-杀死进程-kill">7.6 杀死进程(kill)</h4> <h5 id="_7-6-1-进程信号">7.6.1 进程信号</h5> <ul><li>kill -l 查看可用的进程信号
|信号 |代码	|信号名称	|说明	|示例|
| -- | -- | -- | -- | -- |
|1	|SIGHUP	|该信号让进程立即关闭，然后重写读取配置文件后重启,平滑重启	|kill -1 -HUP 进程号|
|2	|SIGINT	|程序终止信号，用于关闭前台进程,相当于ctrl+c	|
|9	|SIGKILL	|用来立刻结束程序的运行，本信号不能阻塞、处理和忽略，一般用于强制中止	|
|15	|SIGTERM	|正常结束进程的信号，kill命令的默认信号。如果不能正常中止，才会尝试SIGKILL信号|</li></ul> <h5 id="_7-6-2-杀死进程">7.6.2 杀死进程</h5> <p>sleep.sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> <span class="token parameter variable">-le</span> <span class="token number">1000</span> <span class="token punctuation">]</span>
 <span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
   <span class="token function">sleep</span> 1s
 <span class="token keyword">done</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sh</span> sleep.sh <span class="token operator">&amp;</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> sleep.sh
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">kill</span>  进程号
</code></pre></div><h3 id="_8-系统资源查看">8. 系统资源查看</h3> <h4 id="_8-1-vmstat">8.1 vmstat</h4> <ul><li>监控系统资源使用状态</li> <li><code>vmstat [刷新延时 刷新次数]</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>vmstat 1 3
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 1  0    532 329932  99388 459768    0    0    16    81   59   50  3  1 96  0  0    
</code></pre></div><h5 id="_8-1-1-procs-进程信息字段">8.1.1 (procs)进程信息字段</h5> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>procs</td> <td>r</td> <td>等待运行的进程数，数量越大，系统就越繁忙</td></tr> <tr><td>procs</td> <td>b</td> <td>不可被唤醒的进程数量，数量越大，系统越繁忙</td></tr></tbody></table> <h5 id="_8-1-2-memory-内存信息字段">8.1.2 memory(内存信息字段)</h5> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>memory</td> <td>swpd</td> <td>使用的Swap空间的大小，单位KB</td></tr> <tr><td>memory</td> <td>free</td> <td>空闲的内存容量，单位KB</td></tr> <tr><td>memory</td> <td>buff</td> <td>缓冲的内存容量，单位KB</td></tr> <tr><td>memory</td> <td>cache</td> <td>缓存的内存容量，单位KB</td></tr></tbody></table> <h5 id="_8-1-3-swap-交换分区信息">8.1.3 swap(交换分区信息)</h5> <ul><li>如果说si和so数越大说明数据经常要在磁盘和内存之间数据交换，系统性能就会越差</li></ul> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>swap</td> <td>si(in)</td> <td>从磁盘中交换到内存中的数据的数量，单位KB</td></tr> <tr><td>swap</td> <td>so(out)</td> <td>从内存中交换到硬盘中的数据的数量，单位KB</td></tr></tbody></table> <h5 id="_8-1-4-io-磁盘读写">8.1.4 io(磁盘读写)</h5> <ul><li>bi和bo数越大，说明磁盘的I/O越繁忙</li></ul> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>io</td> <td>bi(in)</td> <td>从块设备读入数据的问题，单位是块</td></tr> <tr><td>io</td> <td>bo(out)</td> <td>写到块设备的数据的总量，单位是块</td></tr></tbody></table> <h5 id="_8-1-5-system-系统信息字段">8.1.5 system(系统信息字段)</h5> <ul><li>in和cs数越大，说明系统与接口设备的通信越繁忙</li></ul> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>system</td> <td>in(interrupt)</td> <td>每秒被中断的进程次数</td></tr> <tr><td>system</td> <td>cs(switch)</td> <td>每秒钟进行的事件切换次数</td></tr></tbody></table> <h5 id="_8-1-6-cpu-cpu信息字段">8.1.6 CPU(CPU信息字段)</h5> <table><thead><tr><th>分类</th> <th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>CPU</td> <td>us(user)</td> <td>非内核进程消耗CPU运算时间的百分比</td></tr> <tr><td>CPU</td> <td>sy(system)</td> <td>内核进程消耗CPU运算时间的百分比</td></tr> <tr><td>CPU</td> <td>id(idea)</td> <td>空闲CPU的百分比</td></tr> <tr><td>CPU</td> <td>wa(wait)</td> <td>等待I/O所消耗的CPU百分比</td></tr> <tr><td>CPU</td> <td>st(steal)</td> <td>被虚拟机偷走的CPU百分比</td></tr></tbody></table> <h4 id="_8-3-free">8.3 free</h4> <ul><li>查看内存使用状态</li> <li><code>free [-b|-k|-m|-g]</code></li> <li>选项
<ul><li>-b 以字节为单位</li> <li>-k 以KB字节为单位</li> <li>-m 以MB字节为单位</li> <li>-g 以GB字节为单位</li></ul></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># free -m</span>
             total       used       <span class="token function">free</span>     shared    buffers     cached
Mem:          <span class="token number">1006</span>        <span class="token number">687</span>        <span class="token number">319</span>          <span class="token number">0</span>         <span class="token number">98</span>        <span class="token number">449</span>
-/+ buffers/cache:        <span class="token number">139</span>        <span class="token number">866</span>
Swap:         <span class="token number">1999</span>          <span class="token number">0</span>       <span class="token number">1999</span>
</code></pre></div><h5 id="_8-3-1-第一行">8.3.1 第一行</h5> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>total</td> <td>内存总数</td></tr> <tr><td>used</td> <td>已经使用的内存数</td></tr> <tr><td>free</td> <td>空闲的内存数</td></tr> <tr><td>shared</td> <td>多个进程共享的内存数</td></tr> <tr><td>buffers</td> <td>缓冲区内存数</td></tr> <tr><td>cached</td> <td>缓存内存数</td></tr></tbody></table> <h5 id="_8-3-2-第二行">8.3.2 第二行</h5> <table><thead><tr><th>参数</th> <th>算法</th> <th>含义</th></tr></thead> <tbody><tr><td>- buffers/cache</td> <td>第一行的used-buffers-cached</td> <td>已经使用的要减去缓存和缓冲的内存量</td></tr> <tr><td>+ buffers/cache</td> <td>第一行的free+buffers+cached</td> <td>空闲的要加上缓存和缓冲的内存量</td></tr></tbody></table> <h5 id="_8-3-3-第三行">8.3.3 第三行</h5> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>total</td> <td>swap总数，默认单位是K</td></tr> <tr><td>used</td> <td>已经使用的swap数，默认单位是K</td></tr> <tr><td>free</td> <td>空闲的swap数，默认单位是K</td></tr></tbody></table> <h4 id="_8-6-查看内核相关信息">8.6 查看内核相关信息</h4> <ul><li>uname</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># uname -a</span>
Linux localhost <span class="token number">2.6</span>.32-279.el6.i686 <span class="token comment">#1 SMP Fri Jun 22 10:59:55 UTC 2012 i686 i686 i386 GNU/Linux</span>
<span class="token comment"># uname -s</span>
Linux
<span class="token comment"># uname -r</span>
<span class="token number">8.6</span>.32-279.el6.i686
</code></pre></div><h4 id="_8-7-查看操作系统位数">8.7 查看操作系统位数</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">file</span> /bin/ls
</code></pre></div><h4 id="_8-8-查看发行版本">8.8 查看发行版本</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lsb_release <span class="token parameter variable">-a</span>
</code></pre></div><h4 id="_8-9-查看发行版本">8.9 查看发行版本</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> redhat-lsb <span class="token parameter variable">-y</span>
lsb_release <span class="token parameter variable">-v</span>
</code></pre></div><h3 id="_9-系统定时任务">9. 系统定时任务</h3> <ul><li>有些任务比如备份数据库等操作需要在系统空闲的时候执行</li></ul> <h4 id="_9-2-crontab">9.2 crontab</h4> <ul><li>可以循环定时执行定时任务</li> <li><a href="https://www.bejson.com/othertools/cron/" target="_blank" rel="noopener noreferrer">cron<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>systemctl restart crond.service
</code></pre></div><h5 id="_9-2-3-crontab设置">9.2.3 crontab设置</h5> <ul><li>crontab [选项]</li> <li>选项
<ul><li>-e 编辑crontab定时任务</li> <li>-l 查询crontab任务</li> <li>-r 删除当前用户所有的crontab任务</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>* * * * *  执行的任务
</code></pre></div><h6 id="_9-2-3-1-语法">9.2.3.1 语法</h6> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># .---------------- minute (0 - 59)</span>
<span class="token comment"># |  .------------- hour (0 - 23)</span>
<span class="token comment"># |  |  .---------- day of month (1 - 31)</span>
<span class="token comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
<span class="token comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span>
<span class="token comment"># |  |  |  |  |</span>
<span class="token comment"># *  *  *  *  * user-name command to be executed</span>
</code></pre></div><h6 id="_9-2-3-2-位置">9.2.3.2 位置</h6> <table><thead><tr><th>项目</th> <th>含义</th> <th>范围</th></tr></thead> <tbody><tr><td>第1个星</td> <td>1个小时中的第几分钟</td> <td>0~59</td></tr> <tr><td>第2个星</td> <td>1天当中的第几小时</td> <td>0~23</td></tr> <tr><td>第3个星</td> <td>1月当中的第几天</td> <td>1~31</td></tr> <tr><td>第4个星</td> <td>1年当中的第几月</td> <td>1~12</td></tr> <tr><td>第5个星</td> <td>1周当中的星期几</td> <td>0~6</td></tr></tbody></table> <h6 id="_9-2-3-3-特殊符号">9.2.3.3 特殊符号</h6> <table><thead><tr><th>符号</th> <th>含义</th> <th>例子</th></tr></thead> <tbody><tr><td><code>*</code></td> <td>代表任意时间</td> <td>比如第一个星就代表一个小时中每分钟都执行一次</td></tr> <tr><td><code>,</code></td> <td>代表不连续的时间</td> <td>比如&quot;1,2,3 &quot;,就代表每小时的1分、2分、3分执行命令</td></tr> <tr><td><code>-</code></td> <td>代表连续的时间范围</td> <td>比如 &quot; 1-5 * ** &quot;,代表每小时的第1分到第5分执行命令</td></tr> <tr><td><code>*/n</code></td> <td>代表每隔多久执行一次</td> <td>比如 &quot;/10 &quot; 就代表每隔10分钟就执行一次命令</td></tr> <tr><td><code>0 0 1,10 * 1</code></td> <td>每月1号和10号，每周1的0点0分都会执行</td> <td></td></tr></tbody></table> <h6 id="_9-2-3-4-案例">9.2.3.4 案例</h6> <table><thead><tr><th>符号</th> <th>含义</th></tr></thead> <tbody><tr><td>10 22 *</td> <td>在每天的22点10分执行</td></tr> <tr><td>0 15 1</td> <td>每周1的15点0分执行</td></tr> <tr><td>0 5 5,10</td> <td>每月5号和10号的凌晨5点整执行</td></tr> <tr><td>10 5 1-5</td> <td>每周一到周五的凌晨5点10分执行命令</td></tr> <tr><td>/10 10</td> <td>每天凌晨10点钟，每隔10分钟执行一次</td></tr></tbody></table> <h6 id="_9-2-3-5-注意事项">9.2.3.5 注意事项</h6> <ul><li>所有选项不能为空，必须填写</li> <li>crontab最小单位是分钟,最大单位是天</li> <li>不管写命令还是脚本都要使用绝对路径</li></ul> <h4 id="_9-3-系统定时任务">9.3 系统定时任务</h4> <p>crontab -e是用户执行的命令，不同的用户身份可以执行自己的定时任务
如果需要系统执行定时任务，可以编辑/etc/crontab文件
/etc/crontab可以指定shell、路径、邮件发送和家目录</p> <h5 id="_9-3-1-etc-crontab">9.3.1 /etc/crontab</h5> <ul><li>修改/etc/crontab配置文件</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token number">5</span> <span class="token number">5</span> * * * <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">date</span><span class="token variable">`</span></span> <span class="token operator">&gt;&gt;</span> /root/date.log
</code></pre></div><h3 id="_10-实战任务">10. 实战任务</h3> <h4 id="_10-1-监控nginx">10.1 监控nginx</h4> <p>nginx.sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">local</span> nginx
<span class="token assign-left variable">nginx</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> nginx<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span><span class="token operator">|</span><span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">`</span></span>
 <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$nginx</span> <span class="token parameter variable">-gt</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;your nginx is running&quot;</span>
    <span class="token builtin class-name">exit</span> <span class="token number">0</span>
 <span class="token keyword">else</span>
    /bin/systemctl start nginx.service
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre></div><h4 id="_10-2-监控mysql状态">10.2 监控mysql状态</h4> <p>mysql.sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">PortNum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">netstat</span> -lnt<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">3306</span><span class="token operator">|</span><span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$PortNum</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
 <span class="token builtin class-name">echo</span> <span class="token string">&quot;mysqld is running.&quot;</span>
<span class="token keyword">else</span>
 <span class="token builtin class-name">echo</span> <span class="token string">&quot;mysqld is stoped.&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h4 id="_10-3-mysql备份脚本">10.3 mysql备份脚本</h4> <p>mysql_backup.sh</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%F_%H-%M-%S<span class="token variable">)</span></span>
<span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token assign-left variable">DB</span><span class="token operator">=</span>test
<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span>root
<span class="token assign-left variable">PASS</span><span class="token operator">=</span>abcd1<span class="token comment">#EFG</span>
<span class="token assign-left variable">MAIL</span><span class="token operator">=</span><span class="token string">&quot;xxxx@qq.com&quot;</span>
<span class="token assign-left variable">BACKUP_DIR</span><span class="token operator">=</span>/data/db_backup
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BACKUP_DIR</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
 <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$BACKUP_DIR</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">SQL_FILE</span><span class="token operator">=</span><span class="token variable">${DB}</span>_FULL_<span class="token variable">$DATE</span>.sql
<span class="token assign-left variable">BAK_FILE</span><span class="token operator">=</span><span class="token variable">${DB}</span>_FULL_<span class="token variable">$DATE</span>.zip
<span class="token builtin class-name">cd</span> <span class="token variable">$BACKUP_DIR</span>
<span class="token keyword">if</span> mysqldump -h<span class="token variable">$HOST</span> -u<span class="token environment constant">$USER</span> -p<span class="token variable">$PASS</span> <span class="token parameter variable">-B</span> <span class="token variable">$DB</span> <span class="token operator">&gt;</span> <span class="token variable">$SQL_FILE</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">zip</span> <span class="token variable">$BAK_FILE</span> <span class="token variable">$SQL_FILE</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">$SQL_FILE</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-s</span> <span class="token variable">$BAK_FILE</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$DATE</span> 备份失败&quot;</span> <span class="token operator">|</span> mail <span class="token parameter variable">-s</span> <span class="token string">&quot;备份失败&quot;</span> <span class="token variable">$MAIL</span>
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$DATE</span> 备份失败&quot;</span> <span class="token operator">|</span> mail <span class="token parameter variable">-s</span> <span class="token string">&quot;备份失败&quot;</span> <span class="token variable">$MAIL</span>
<span class="token keyword">fi</span>
<span class="token function">find</span> <span class="token variable">$BACKUP_DIR</span> <span class="token parameter variable">-name</span> <span class="token string">'*.zip'</span> <span class="token parameter variable">-ctime</span> +14 <span class="token parameter variable">-exec</span> <span class="token function">rm</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="登陆授权">登陆授权</h4> <p>授权后下次登陆不用输密码</p> <div class="language- extra-class"><pre class="language-text"><code>ssh-copy-id 47.104.220.xx
</code></pre></div><p>如果没有生成 <code>/root/.ssh/id_rsa</code>可以通过下面命令生成密钥</p> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa
</code></pre></div><h4 id="关闭防火墙">关闭防火墙</h4> <h5 id="关闭-iptables">关闭 iptables</h5> <p>iptables命令是Linux上常用的防火墙软件</p> <table><thead><tr><th>功能</th> <th>命令</th></tr></thead> <tbody><tr><td>停止防火墙</td> <td>systemctl stop firewalld.service</td></tr> <tr><td>永久关闭防火墙</td> <td>systemctl disable firewalld.service</td></tr></tbody></table> <h5 id="确认停用-selinux">确认停用 selinux</h5> <p>安全增强型 Linux（Security-Enhanced Linux）简称 SELinux，它是一个 Linux 内核模块，也是 Linux 的一个安全子系统。
SELinux 主要作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。</p> <table><thead><tr><th>功能</th> <th>命令</th></tr></thead> <tbody><tr><td>检查状态</td> <td><code>getenforce</code></td></tr> <tr><td>检查状态</td> <td><code>/usr/sbin/sestatus -v</code></td></tr> <tr><td>临时关闭</td> <td><code>setenforce 0</code></td></tr> <tr><td>永久关闭</td> <td><code>/etc/selinux/config SELINUX=enforcing改为SELINUX=disabled</code></td></tr></tbody></table> <h5 id="安装依赖模块">安装依赖模块</h5> <div class="language- extra-class"><pre class="language-text"><code>yum  -y install gcc gcc-c++ autoconf pcre pcre-devel make automake
yum  -y install wget httpd-tools vim
</code></pre></div></div></article> <section class="post-meta main-div" data-v-12a4d4fc><section class="post-date clearfix" data-v-12a4d4fc><span class="create-date" data-v-12a4d4fc>
      发布于 : 2015-08-22
    </span> <span class="update-date" data-v-12a4d4fc>
      修改于 : 2022-03-12
    </span></section> <section class="post-links" data-v-12a4d4fc><a href="/posts/2016/02/20/linux-shell.html" class="post-link" data-v-12a4d4fc>
      下一篇 : shell基础知识
    </a> <a href="/posts/2015/04/29/http.html" class="post-link" data-v-12a4d4fc>
      上一篇 : HTTP协议详解
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-0874e876><div class="info-card main-div" data-v-2bd66a30 data-v-0874e876><div class="info-card-header" data-v-2bd66a30><img src="https://www.mamingjuan.cn/assets/img/avatar.jpeg" alt="Glitr" class="info-avatar" data-v-2bd66a30></div> <div class="info-card-body" data-v-2bd66a30><section class="info-nickname" data-v-2bd66a30>
      Glitr
    </section> <section class="info-desc" data-v-2bd66a30>Enjoy coding,<br/>Enjoy life:)</section> <section class="info-contact" data-v-2bd66a30><section data-v-2bd66a30><span title="Beijing City, China" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Beijing City, China</title><use xlink:href="#icon-location" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Beijing City, China
        </span></span></section> <section data-v-2bd66a30><span title="Secrecy" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>Secrecy</title><use xlink:href="#icon-organization" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          Secrecy
        </span></span></section> <section data-v-2bd66a30><a href="mailto:glitteringma@gmail.com" title="glitteringma@gmail.com" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>glitteringma@gmail.com</title><use xlink:href="#icon-email" data-v-2bd66a30 data-v-2bd66a30></use></svg><span class="info-text" data-v-2bd66a30 data-v-2bd66a30>
          glitteringma@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-2bd66a30><section class="info-sns clearfix" data-v-2bd66a30><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-2bd66a30><span title="GitHub: glitzma" class="sns-icon" data-v-2bd66a30 data-v-2bd66a30><svg class="icon" style="font-size:1.5em;" data-v-2bd66a30 data-v-2bd66a30><title data-v-2bd66a30 data-v-2bd66a30>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-2bd66a30 data-v-2bd66a30></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-0874e876><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2015/08/22/linux.html#linux基础及文件">Linux基础及文件</a></li><li><a href="/posts/2015/08/22/linux.html#linux常用命令">linux常用命令</a><ul><li><a href="/posts/2015/08/22/linux.html#_1-目录">1. 目录</a></li><li><a href="/posts/2015/08/22/linux.html#_2-shell">2. shell</a></li><li><a href="/posts/2015/08/22/linux.html#_3-vi编辑器">3. vi编辑器</a></li><li><a href="/posts/2015/08/22/linux.html#_4-用户和用户组">4. 用户和用户组</a></li><li><a href="/posts/2015/08/22/linux.html#_5-用户命令">5. 用户命令</a></li><li><a href="/posts/2015/08/22/linux.html#_6-附录">6. 附录</a></li><li><a href="/posts/2015/08/22/linux.html#_7-进程管理">7 进程管理</a></li><li><a href="/posts/2015/08/22/linux.html#_8-系统资源查看">8. 系统资源查看</a></li><li><a href="/posts/2015/08/22/linux.html#_9-系统定时任务">9. 系统定时任务</a></li><li><a href="/posts/2015/08/22/linux.html#_10-实战任务">10. 实战任务</a></li></ul></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2015/08/22/linux.html#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-ede90b42><p class="sns-links" data-v-ede90b42><a href="https://github.com/happy760690" target="_blank" class="sns-link" data-v-ede90b42><span title="GitHub: glitzma" class="sns-icon" data-v-ede90b42 data-v-ede90b42><svg class="icon" style="font-size:25px;" data-v-ede90b42 data-v-ede90b42><title data-v-ede90b42 data-v-ede90b42>GitHub: glitzma</title><use xlink:href="#icon-github" data-v-ede90b42 data-v-ede90b42></use></svg></span></a></p> <div class="copyright" data-v-ede90b42>
    © 2014 –
    <span itemprop="copyrightYear" data-v-ede90b42>2023</span> <span class="post-meta-divider" data-v-ede90b42>|</span> <span itemprop="copyrightHolder" class="author" data-v-ede90b42>Glitr</span></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app~748942c6.4f687fc7.js" defer></script><script src="/assets/js/10.685e93e4.js" defer></script><script src="/assets/js/17.af41a430.js" defer></script><script src="/assets/js/app~2a42e354.de89d32b.js" defer></script><script src="/assets/js/app~1f20a385.d6fa771c.js" defer></script>
  </body>
</html>
